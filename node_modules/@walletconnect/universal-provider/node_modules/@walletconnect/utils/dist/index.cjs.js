"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var vs=require("detect-browser"),Ye=require("@walletconnect/time"),be=require("@walletconnect/window-getters"),Es=require("@walletconnect/window-metadata"),As=require("viem"),Ss=require("bs58"),Xn=require("@msgpack/msgpack"),Is=require("@scure/base"),Bs=require("@walletconnect/relay-auth"),V=require("uint8arrays"),Ns=require("@walletconnect/relay-api"),Os=require("blakejs");function Us(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var it=Us(Ss);const St=":";function Gt(e){const[t,n]=e.split(St);return{namespace:t,reference:n}}function Jn(e){const{namespace:t,reference:n}=e;return[t,n].join(St)}function Zt(e){const[t,n,r]=e.split(St);return{namespace:t,reference:n,address:r}}function Qn(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(St)}function Yt(e,t){const n=[];return e.forEach(r=>{const o=t(r);n.includes(o)||n.push(o)}),n}function er(e){const{address:t}=Zt(e);return t}function tr(e){const{namespace:t,reference:n}=Zt(e);return Jn({namespace:t,reference:n})}function Rs(e,t){const{namespace:n,reference:r}=Gt(t);return Qn({namespace:n,reference:r,address:e})}function Ts(e){return Yt(e,er)}function nr(e){return Yt(e,tr)}function _s(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...o.accounts)}),n}function Cs(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...nr(o.accounts))}),n}function Ls(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const o=e[r];n.push(...It(r,o))}),n}function It(e,t){return e.includes(":")?[e]:t.chains||[]}var Ps=Object.defineProperty,$s=Object.defineProperties,js=Object.getOwnPropertyDescriptors,rr=Object.getOwnPropertySymbols,ks=Object.prototype.hasOwnProperty,Ds=Object.prototype.propertyIsEnumerable,or=(e,t,n)=>t in e?Ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sr=(e,t)=>{for(var n in t||(t={}))ks.call(t,n)&&or(e,n,t[n]);if(rr)for(var n of rr(t))Ds.call(t,n)&&or(e,n,t[n]);return e},Hs=(e,t)=>$s(e,js(t));const ir="ReactNative",ee={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Bt=" ",Vs=":",cr="/",Wt=2,Ms=1e3,ar="js";function Xt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ae(){return!be.getDocument()&&!!be.getNavigator()&&navigator.product===ir}function qs(){return Ae()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Fs(){return Ae()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function We(){return!Xt()&&!!be.getNavigator()&&!!be.getDocument()}function Ve(){return Ae()?ee.reactNative:Xt()?ee.node:We()?ee.browser:ee.unknown}function Ks(){var e;try{return Ae()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function fr(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const o=t[r];o!==void 0&&n.set(r,o)}return n.toString()}function zs(e){var t,n;const r=ur();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(o=>o!=="")),Hs(sr(sr({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(o){return console.warn("Error populating app metadata",o),e||r}}function ur(){return Es.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Gs(e,t){var n;const r=Ve(),o={protocol:e,version:t,env:r};return r==="browser"&&(o.host=((n=be.getLocation())==null?void 0:n.host)||"unknown"),o}function lr(){if(Ve()===ee.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=vs.detect();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function dr(){var e;const t=Ve();return t===ee.browser?[t,((e=be.getLocation())==null?void 0:e.host)||"unknown"].join(":"):t}function hr(e,t,n){const r=lr(),o=dr();return[[e,t].join("-"),[ar,n].join("-"),r,o].join("/")}function Zs({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:i,bundleId:c,packageName:a}){const f=n.split("?"),l=hr(e,t,r),u={auth:o,ua:l,projectId:s,useOnCloseEvent:i||void 0,packageName:a||void 0,bundleId:c||void 0},h=fr(f[1]||"",u);return f[0]+"?"+h}function Ys(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function Ws(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function pr(e,t=Wt){return gr(e.split(cr),t)}function Xs(e){return pr(e).join(Bt)}function Se(e,t){return e.filter(n=>t.includes(n)).length===e.length}function gr(e,t=Wt){return e.slice(Math.max(e.length-t,0))}function Js(e){return Object.fromEntries(e.entries())}function Qs(e){return new Map(Object.entries(e))}function ei(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const ti=e=>e;function br(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function ni(e){return e.split(Bt).map(t=>br(t)).join(Bt)}function ri(e=Ye.FIVE_MINUTES,t){const n=Ye.toMiliseconds(e||Ye.FIVE_MINUTES);let r,o,s,i;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c),i=Promise.resolve(c))},reject:c=>{s&&o&&(clearTimeout(s),o(c))},done:()=>new Promise((c,a)=>{if(i)return c(i);s=setTimeout(()=>{const f=new Error(t);i=Promise.reject(f),a(f)},n),r=c,o=a})}}function oi(e,t,n){return new Promise(async(r,o)=>{const s=setTimeout(()=>o(new Error(n)),t);try{const i=await e;r(i)}catch(i){o(i)}clearTimeout(s)})}function Jt(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function si(e){return Jt("topic",e)}function ii(e){return Jt("id",e)}function ci(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function ai(e,t){return Ye.fromMiliseconds((t||Date.now())+Ye.toMiliseconds(e))}function fi(e){return Date.now()>=Ye.toMiliseconds(e)}function ui(e,t){return`${e}${t?`:${t}`:""}`}function fe(e=[],t=[]){return[...new Set([...e,...t])]}async function li({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const o=typeof n=="string"?JSON.parse(n):n,s=o?.href;if(typeof s!="string")return;const i=mr(s,e,t),c=Ve();if(c===ee.browser){if(!((r=be.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}yr(i)}else c===ee.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(i)}catch(o){console.error(o)}}function mr(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let o=`${e}`;if(e.startsWith("https://t.me")){const s=e.includes("?")?"&startapp=":"?startapp=";o=`${o}${s}${vr(r,!0)}`}else o=`${o}/wc?${r}`;return o}function yr(e){let t="_self";xr()?t="_top":(wr()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function di(e,t){let n="";try{if(We()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function Qt(e,t){return e.filter(n=>t.includes(n))}function hi(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function pi(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function gi(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function wr(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function xr(){try{return window.self!==window.top}catch{return!1}}function vr(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function en(e){return Buffer.from(e,"base64").toString("utf-8")}function bi(e){return new Promise(t=>setTimeout(t,e))}const Nt=BigInt(2**32-1),Er=BigInt(32);function Ar(e,t=!1){return t?{h:Number(e&Nt),l:Number(e>>Er&Nt)}:{h:Number(e>>Er&Nt)|0,l:Number(e&Nt)|0}}function Sr(e,t=!1){const n=e.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let s=0;s<n;s++){const{h:i,l:c}=Ar(e[s],t);[r[s],o[s]]=[i,c]}return[r,o]}const Ir=(e,t,n)=>e>>>n,Br=(e,t,n)=>e<<32-n|t>>>n,Ie=(e,t,n)=>e>>>n|t<<32-n,Be=(e,t,n)=>e<<32-n|t>>>n,ct=(e,t,n)=>e<<64-n|t>>>n-32,at=(e,t,n)=>e>>>n-32|t<<64-n,mi=(e,t)=>t,yi=(e,t)=>e,wi=(e,t,n)=>e<<n|t>>>32-n,xi=(e,t,n)=>t<<n|e>>>32-n,vi=(e,t,n)=>t<<n-32|e>>>64-n,Ei=(e,t,n)=>e<<n-32|t>>>64-n;function le(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const tn=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),nn=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Ai=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Si=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,Ii=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0),Bi=(e,t,n,r,o,s)=>t+n+r+o+s+(e/2**32|0)|0,Xe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ni(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function me(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ne(e,...t){if(!Ni(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function rn(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");me(e.outputLen),me(e.blockLen)}function Oe(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function on(e,t){Ne(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ft(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function ue(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function sn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function pe(e,t){return e<<32-t|e>>>t}const Nr=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Or(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const ye=Nr?e=>e:e=>Or(e);function Oi(e){for(let t=0;t<e.length;t++)e[t]=Or(e[t]);return e}const Ue=Nr?e=>e:Oi;function Ui(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function de(e){return typeof e=="string"&&(e=Ui(e)),Ne(e),e}function Ri(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];Ne(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const s=e[r];n.set(s,o),o+=s.length}return n}class Ot{}function ut(e){const t=r=>e().update(de(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ti(e){const t=(r,o)=>e(o).update(de(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function Je(e=32){if(Xe&&typeof Xe.getRandomValues=="function")return Xe.getRandomValues(new Uint8Array(e));if(Xe&&typeof Xe.randomBytes=="function")return Uint8Array.from(Xe.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const _i=BigInt(0),lt=BigInt(1),Ci=BigInt(2),Li=BigInt(7),Pi=BigInt(256),$i=BigInt(113),Ur=[],Rr=[],Tr=[];for(let e=0,t=lt,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Ur.push(2*(5*r+n)),Rr.push((e+1)*(e+2)/2%64);let o=_i;for(let s=0;s<7;s++)t=(t<<lt^(t>>Li)*$i)%Pi,t&Ci&&(o^=lt<<(lt<<BigInt(s))-lt);Tr.push(o)}const _r=Sr(Tr,!0),ji=_r[0],ki=_r[1],Cr=(e,t,n)=>n>32?vi(e,t,n):wi(e,t,n),Lr=(e,t,n)=>n>32?Ei(e,t,n):xi(e,t,n);function Di(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const c=(i+8)%10,a=(i+2)%10,f=n[a],l=n[a+1],u=Cr(f,l,1)^n[c],h=Lr(f,l,1)^n[c+1];for(let y=0;y<50;y+=10)e[i+y]^=u,e[i+y+1]^=h}let o=e[2],s=e[3];for(let i=0;i<24;i++){const c=Rr[i],a=Cr(o,s,c),f=Lr(o,s,c),l=Ur[i];o=e[l],s=e[l+1],e[l]=a,e[l+1]=f}for(let i=0;i<50;i+=10){for(let c=0;c<10;c++)n[c]=e[i+c];for(let c=0;c<10;c++)e[i+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=ji[r],e[1]^=ki[r]}ue(n)}class Yn extends Ot{constructor(t,n,r,o=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=s,me(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ft(this.state)}clone(){return this._cloneInto()}keccak(){Ue(this.state32),Di(this.state32,this.rounds),Ue(this.state32),this.posOut=0,this.pos=0}update(t){Oe(this),t=de(t),Ne(t);const{blockLen:n,state:r}=this,o=t.length;for(let s=0;s<o;){const i=Math.min(n-this.pos,o-s);for(let c=0;c<i;c++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:o}=this;t[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){Oe(this,!1),Ne(t),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,s=t.length;o<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-o);t.set(n.subarray(this.posOut,this.posOut+i),o),this.posOut+=i,o+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return me(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(on(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ue(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:o,rounds:s,enableXOF:i}=this;return t||(t=new Yn(n,r,o,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=o,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Hi=(e,t,n)=>ut(()=>new Yn(t,e,n)),Vi=Hi(1,136,256/8);function Mi(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),c=Number(n&s),a=r?4:0,f=r?0:4;e.setUint32(t+a,i,r),e.setUint32(t+f,c,r)}function qi(e,t,n){return e&t^~e&n}function Fi(e,t,n){return e&t^e&n^t&n}class Pr extends Ot{constructor(t,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=sn(this.buffer)}update(t){Oe(this),t=de(t),Ne(t);const{view:n,buffer:r,blockLen:o}=this,s=t.length;for(let i=0;i<s;){const c=Math.min(o-this.pos,s-i);if(c===o){const a=sn(t);for(;o<=s-i;i+=o)this.process(a,i);continue}r.set(t.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Oe(this),on(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,ue(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(r,0),i=0);for(let u=i;u<o;u++)n[u]=0;Mi(r,o-8,BigInt(this.length*8),s),this.process(r,0);const c=sn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,l=this.get();if(f>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<f;u++)c.setUint32(4*u,l[u],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:c}=this;return t.destroyed=i,t.finished=s,t.length=o,t.pos=c,o%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Re=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),X=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),J=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ki=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Te=new Uint32Array(64);class zi extends Pr{constructor(t=32){super(64,t,8,!1),this.A=Re[0]|0,this.B=Re[1]|0,this.C=Re[2]|0,this.D=Re[3]|0,this.E=Re[4]|0,this.F=Re[5]|0,this.G=Re[6]|0,this.H=Re[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:i,G:c,H:a}=this;return[t,n,r,o,s,i,c,a]}set(t,n,r,o,s,i,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=c|0,this.H=a|0}process(t,n){for(let u=0;u<16;u++,n+=4)Te[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const h=Te[u-15],y=Te[u-2],p=pe(h,7)^pe(h,18)^h>>>3,d=pe(y,17)^pe(y,19)^y>>>10;Te[u]=d+Te[u-7]+p+Te[u-16]|0}let{A:r,B:o,C:s,D:i,E:c,F:a,G:f,H:l}=this;for(let u=0;u<64;u++){const h=pe(c,6)^pe(c,11)^pe(c,25),y=l+h+qi(c,a,f)+Ki[u]+Te[u]|0,d=(pe(r,2)^pe(r,13)^pe(r,22))+Fi(r,o,s)|0;l=f,f=a,a=c,c=i+y|0,i=s,s=o,o=r,r=y+d|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,l=l+this.H|0,this.set(r,o,s,i,c,a,f,l)}roundClean(){ue(Te)}destroy(){this.set(0,0,0,0,0,0,0,0),ue(this.buffer)}}const $r=Sr(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Gi=$r[0],Zi=$r[1],_e=new Uint32Array(80),Ce=new Uint32Array(80);class cn extends Pr{constructor(t=64){super(128,t,16,!1),this.Ah=J[0]|0,this.Al=J[1]|0,this.Bh=J[2]|0,this.Bl=J[3]|0,this.Ch=J[4]|0,this.Cl=J[5]|0,this.Dh=J[6]|0,this.Dl=J[7]|0,this.Eh=J[8]|0,this.El=J[9]|0,this.Fh=J[10]|0,this.Fl=J[11]|0,this.Gh=J[12]|0,this.Gl=J[13]|0,this.Hh=J[14]|0,this.Hl=J[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:o,Ch:s,Cl:i,Dh:c,Dl:a,Eh:f,El:l,Fh:u,Fl:h,Gh:y,Gl:p,Hh:d,Hl:I}=this;return[t,n,r,o,s,i,c,a,f,l,u,h,y,p,d,I]}set(t,n,r,o,s,i,c,a,f,l,u,h,y,p,d,I){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=c|0,this.Dl=a|0,this.Eh=f|0,this.El=l|0,this.Fh=u|0,this.Fl=h|0,this.Gh=y|0,this.Gl=p|0,this.Hh=d|0,this.Hl=I|0}process(t,n){for(let B=0;B<16;B++,n+=4)_e[B]=t.getUint32(n),Ce[B]=t.getUint32(n+=4);for(let B=16;B<80;B++){const g=_e[B-15]|0,x=Ce[B-15]|0,R=Ie(g,x,1)^Ie(g,x,8)^Ir(g,x,7),v=Be(g,x,1)^Be(g,x,8)^Br(g,x,7),N=_e[B-2]|0,T=Ce[B-2]|0,_=Ie(N,T,19)^ct(N,T,61)^Ir(N,T,6),E=Be(N,T,19)^at(N,T,61)^Br(N,T,6),O=Ai(v,E,Ce[B-7],Ce[B-16]),S=Si(O,R,_,_e[B-7],_e[B-16]);_e[B]=S|0,Ce[B]=O|0}let{Ah:r,Al:o,Bh:s,Bl:i,Ch:c,Cl:a,Dh:f,Dl:l,Eh:u,El:h,Fh:y,Fl:p,Gh:d,Gl:I,Hh:j,Hl:D}=this;for(let B=0;B<80;B++){const g=Ie(u,h,14)^Ie(u,h,18)^ct(u,h,41),x=Be(u,h,14)^Be(u,h,18)^at(u,h,41),R=u&y^~u&d,v=h&p^~h&I,N=Ii(D,x,v,Zi[B],Ce[B]),T=Bi(N,j,g,R,Gi[B],_e[B]),_=N|0,E=Ie(r,o,28)^ct(r,o,34)^ct(r,o,39),O=Be(r,o,28)^at(r,o,34)^at(r,o,39),S=r&s^r&c^s&c,P=o&i^o&a^i&a;j=d|0,D=I|0,d=y|0,I=p|0,y=u|0,p=h|0,{h:u,l:h}=le(f|0,l|0,T|0,_|0),f=c|0,l=a|0,c=s|0,a=i|0,s=r|0,i=o|0;const b=tn(_,O,P);r=nn(b,T,E,S),o=b|0}({h:r,l:o}=le(this.Ah|0,this.Al|0,r|0,o|0)),{h:s,l:i}=le(this.Bh|0,this.Bl|0,s|0,i|0),{h:c,l:a}=le(this.Ch|0,this.Cl|0,c|0,a|0),{h:f,l}=le(this.Dh|0,this.Dl|0,f|0,l|0),{h:u,l:h}=le(this.Eh|0,this.El|0,u|0,h|0),{h:y,l:p}=le(this.Fh|0,this.Fl|0,y|0,p|0),{h:d,l:I}=le(this.Gh|0,this.Gl|0,d|0,I|0),{h:j,l:D}=le(this.Hh|0,this.Hl|0,j|0,D|0),this.set(r,o,s,i,c,a,f,l,u,h,y,p,d,I,j,D)}roundClean(){ue(_e,Ce)}destroy(){ue(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Yi extends cn{constructor(){super(48),this.Ah=X[0]|0,this.Al=X[1]|0,this.Bh=X[2]|0,this.Bl=X[3]|0,this.Ch=X[4]|0,this.Cl=X[5]|0,this.Dh=X[6]|0,this.Dl=X[7]|0,this.Eh=X[8]|0,this.El=X[9]|0,this.Fh=X[10]|0,this.Fl=X[11]|0,this.Gh=X[12]|0,this.Gl=X[13]|0,this.Hh=X[14]|0,this.Hl=X[15]|0}}const Q=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Wi extends cn{constructor(){super(32),this.Ah=Q[0]|0,this.Al=Q[1]|0,this.Bh=Q[2]|0,this.Bl=Q[3]|0,this.Ch=Q[4]|0,this.Cl=Q[5]|0,this.Dh=Q[6]|0,this.Dl=Q[7]|0,this.Eh=Q[8]|0,this.El=Q[9]|0,this.Fh=Q[10]|0,this.Fl=Q[11]|0,this.Gh=Q[12]|0,this.Gl=Q[13]|0,this.Hh=Q[14]|0,this.Hl=Q[15]|0}}const Ut=ut(()=>new zi),Xi=ut(()=>new cn),Ji=ut(()=>new Yi),Qi=ut(()=>new Wi),ec=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),K=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),U=new Uint32Array(32);function Le(e,t,n,r,o,s){const i=o[s],c=o[s+1];let a=U[2*e],f=U[2*e+1],l=U[2*t],u=U[2*t+1],h=U[2*n],y=U[2*n+1],p=U[2*r],d=U[2*r+1],I=tn(a,l,i);f=nn(I,f,u,c),a=I|0,{Dh:d,Dl:p}={Dh:d^f,Dl:p^a},{Dh:d,Dl:p}={Dh:mi(d,p),Dl:yi(d)},{h:y,l:h}=le(y,h,d,p),{Bh:u,Bl:l}={Bh:u^y,Bl:l^h},{Bh:u,Bl:l}={Bh:Ie(u,l,24),Bl:Be(u,l,24)},U[2*e]=a,U[2*e+1]=f,U[2*t]=l,U[2*t+1]=u,U[2*n]=h,U[2*n+1]=y,U[2*r]=p,U[2*r+1]=d}function Pe(e,t,n,r,o,s){const i=o[s],c=o[s+1];let a=U[2*e],f=U[2*e+1],l=U[2*t],u=U[2*t+1],h=U[2*n],y=U[2*n+1],p=U[2*r],d=U[2*r+1],I=tn(a,l,i);f=nn(I,f,u,c),a=I|0,{Dh:d,Dl:p}={Dh:d^f,Dl:p^a},{Dh:d,Dl:p}={Dh:Ie(d,p,16),Dl:Be(d,p,16)},{h:y,l:h}=le(y,h,d,p),{Bh:u,Bl:l}={Bh:u^y,Bl:l^h},{Bh:u,Bl:l}={Bh:ct(u,l,63),Bl:at(u,l,63)},U[2*e]=a,U[2*e+1]=f,U[2*t]=l,U[2*t+1]=u,U[2*n]=h,U[2*n+1]=y,U[2*r]=p,U[2*r+1]=d}function tc(e,t={},n,r,o){if(me(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:s,salt:i,personalization:c}=t;if(s!==void 0&&(s.length<1||s.length>n))throw new Error("key length must be undefined or 1.."+n);if(i!==void 0&&i.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==o)throw new Error("personalization must be undefined or "+o)}class nc extends Ot{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,me(t),me(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=ft(this.buffer)}update(t){Oe(this),t=de(t),Ne(t);const{blockLen:n,buffer:r,buffer32:o}=this,s=t.length,i=t.byteOffset,c=t.buffer;for(let a=0;a<s;){this.pos===n&&(Ue(o),this.compress(o,0,!1),Ue(o),this.pos=0);const f=Math.min(n-this.pos,s-a),l=i+a;if(f===n&&!(l%4)&&a+f<s){const u=new Uint32Array(c,l,Math.floor((s-a)/4));Ue(u);for(let h=0;a+n<s;h+=o.length,a+=n)this.length+=n,this.compress(u,h,!1);Ue(u);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,this.length+=f,a+=f}return this}digestInto(t){Oe(this),on(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,ue(this.buffer.subarray(n)),Ue(r),this.compress(r,0,!0),Ue(r);const o=ft(t);this.get().forEach((s,i)=>o[i]=ye(s))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:o,destroyed:s,outputLen:i,pos:c}=this;return t||(t=new this.constructor({dkLen:i})),t.set(...this.get()),t.buffer.set(n),t.destroyed=s,t.finished=o,t.length=r,t.pos=c,t.outputLen=i,t}clone(){return this._cloneInto()}}class rc extends nc{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=K[0]|0,this.v0h=K[1]|0,this.v1l=K[2]|0,this.v1h=K[3]|0,this.v2l=K[4]|0,this.v2h=K[5]|0,this.v3l=K[6]|0,this.v3h=K[7]|0,this.v4l=K[8]|0,this.v4h=K[9]|0,this.v5l=K[10]|0,this.v5h=K[11]|0,this.v6l=K[12]|0,this.v6h=K[13]|0,this.v7l=K[14]|0,this.v7h=K[15]|0,tc(n,t,64,16,16);let{key:r,personalization:o,salt:s}=t,i=0;if(r!==void 0&&(r=de(r),i=r.length),this.v0l^=this.outputLen|i<<8|65536|1<<24,s!==void 0){s=de(s);const c=ft(s);this.v4l^=ye(c[0]),this.v4h^=ye(c[1]),this.v5l^=ye(c[2]),this.v5h^=ye(c[3])}if(o!==void 0){o=de(o);const c=ft(o);this.v6l^=ye(c[0]),this.v6h^=ye(c[1]),this.v7l^=ye(c[2]),this.v7h^=ye(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:o,v2l:s,v2h:i,v3l:c,v3h:a,v4l:f,v4h:l,v5l:u,v5h:h,v6l:y,v6h:p,v7l:d,v7h:I}=this;return[t,n,r,o,s,i,c,a,f,l,u,h,y,p,d,I]}set(t,n,r,o,s,i,c,a,f,l,u,h,y,p,d,I){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=o|0,this.v2l=s|0,this.v2h=i|0,this.v3l=c|0,this.v3h=a|0,this.v4l=f|0,this.v4h=l|0,this.v5l=u|0,this.v5h=h|0,this.v6l=y|0,this.v6h=p|0,this.v7l=d|0,this.v7h=I|0}compress(t,n,r){this.get().forEach((a,f)=>U[f]=a),U.set(K,16);let{h:o,l:s}=Ar(BigInt(this.length));U[24]=K[8]^s,U[25]=K[9]^o,r&&(U[28]=~U[28],U[29]=~U[29]);let i=0;const c=ec;for(let a=0;a<12;a++)Le(0,4,8,12,t,n+2*c[i++]),Pe(0,4,8,12,t,n+2*c[i++]),Le(1,5,9,13,t,n+2*c[i++]),Pe(1,5,9,13,t,n+2*c[i++]),Le(2,6,10,14,t,n+2*c[i++]),Pe(2,6,10,14,t,n+2*c[i++]),Le(3,7,11,15,t,n+2*c[i++]),Pe(3,7,11,15,t,n+2*c[i++]),Le(0,5,10,15,t,n+2*c[i++]),Pe(0,5,10,15,t,n+2*c[i++]),Le(1,6,11,12,t,n+2*c[i++]),Pe(1,6,11,12,t,n+2*c[i++]),Le(2,7,8,13,t,n+2*c[i++]),Pe(2,7,8,13,t,n+2*c[i++]),Le(3,4,9,14,t,n+2*c[i++]),Pe(3,4,9,14,t,n+2*c[i++]);this.v0l^=U[0]^U[16],this.v0h^=U[1]^U[17],this.v1l^=U[2]^U[18],this.v1h^=U[3]^U[19],this.v2l^=U[4]^U[20],this.v2h^=U[5]^U[21],this.v3l^=U[6]^U[22],this.v3h^=U[7]^U[23],this.v4l^=U[8]^U[24],this.v4h^=U[9]^U[25],this.v5l^=U[10]^U[26],this.v5h^=U[11]^U[27],this.v6l^=U[12]^U[28],this.v6h^=U[13]^U[29],this.v7l^=U[14]^U[30],this.v7h^=U[15]^U[31],ue(U)}destroy(){this.destroyed=!0,ue(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const oc=Ti(e=>new rc(e)),sc="https://rpc.walletconnect.org/v1";function an(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(Vi(n)).toString("hex")}async function jr(e,t,n,r,o,s){switch(n.t){case"eip191":return await kr(e,t,n.s);case"eip1271":return await Dr(e,t,n.s,r,o,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function kr(e,t,n){return(await As.recoverAddress({hash:an(t),signature:n})).toLowerCase()===e.toLowerCase()}async function Dr(e,t,n,r,o,s){const i=Gt(r);if(!i.namespace||!i.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",f="0000000000000000000000000000000000000000000000000000000000000041",l=n.substring(2),u=an(t).substring(2),h=c+u+a+f+l,y=await fetch(`${s||sc}/?chainId=${r}&projectId=${o}`,{method:"POST",body:JSON.stringify({id:ic(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:h},"latest"]})}),{result:p}=await y.json();return p?p.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function ic(){return Date.now()+Math.floor(Math.random()*1e3)}function cc(e){const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);const r=n[0];if(r===0)throw new Error("No signatures found");const o=1+r*64;if(n.length<o)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(e,"base64").slice(1,65);return it.default.encode(s)}function ac(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const o=oc(r,{dkLen:32});return it.default.encode(o)}function fc(e){const t=new Uint8Array(Ut(Hr(e)));return it.default.encode(t)}function Hr(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function uc(e){const t=Buffer.from(e,"base64"),n=Xn.decode(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Xn.encode(n),o=Buffer.from("TX"),s=Buffer.concat([o,Buffer.from(r)]),i=Qi(s);return Is.base32.encode(i).replace(/=+$/,"")}function fn(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function lc(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),o=[];o.push(Buffer.from([10])),o.push(fn(t.length)),o.push(t),o.push(Buffer.from([18])),o.push(fn(n.length)),o.push(n),o.push(Buffer.from([26])),o.push(fn(r.length)),o.push(r);const s=Buffer.concat(o),i=Ut(s);return Buffer.from(i).toString("hex").toUpperCase()}var dc=Object.defineProperty,hc=Object.defineProperties,pc=Object.getOwnPropertyDescriptors,Vr=Object.getOwnPropertySymbols,gc=Object.prototype.hasOwnProperty,bc=Object.prototype.propertyIsEnumerable,Mr=(e,t,n)=>t in e?dc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,un=(e,t)=>{for(var n in t||(t={}))gc.call(t,n)&&Mr(e,n,t[n]);if(Vr)for(var n of Vr(t))bc.call(t,n)&&Mr(e,n,t[n]);return e},qr=(e,t)=>hc(e,pc(t));const mc="did:pkh:",Rt=e=>e?.split(":"),Fr=e=>{const t=e&&Rt(e);if(t)return e.includes(mc)?t[3]:t[1]},Kr=e=>{const t=e&&Rt(e);if(t)return t[2]+":"+t[3]},ln=e=>{const t=e&&Rt(e);if(t)return t.pop()};async function yc(e){const{cacao:t,projectId:n}=e,{s:r,p:o}=t,s=zr(o,o.iss),i=ln(o.iss);return await jr(i,s,r,Kr(o.iss),n)}const zr=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=ln(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let o=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,i=`Version: ${e.version}`,c=`Chain ID: ${Fr(t)}`,a=`Nonce: ${e.nonce}`,f=`Issued At: ${e.iat}`,l=e.exp?`Expiration Time: ${e.exp}`:void 0,u=e.nbf?`Not Before: ${e.nbf}`:void 0,h=e.requestId?`Request ID: ${e.requestId}`:void 0,y=e.resources?`Resources:${e.resources.map(d=>`
- ${d}`).join("")}`:void 0,p=_t(e.resources);if(p){const d=$e(p);o=pn(o,d)}return[n,r,"",o,"",s,i,c,a,f,l,u,h,y].filter(d=>d!=null).join(`
`)};function wc(e,t,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function xc(e){var t;const{authPayload:n,chains:r,methods:o}=e,s=n.statement||"";if(!(r!=null&&r.length))return n;const i=n.chains,c=Qt(i,r);if(!(c!=null&&c.length))throw new Error("No supported chains");const a=Gr(n.resources);if(!a)return n;ge(a);const f=Zr(a,"eip155");let l=n?.resources||[];if(f!=null&&f.length){const u=Yr(f),h=Qt(u,o);if(!(h!=null&&h.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(u)}, supported: ${JSON.stringify(o)}`);const y=dn("request",h,{chains:c}),p=Qr(a,"eip155",y);l=((t=n?.resources)==null?void 0:t.slice(0,-1))||[],l.push(Tt(p))}return qr(un({},n),{statement:to(s,_t(l)),chains:c,resources:n!=null&&n.resources||l.length>0?l:void 0})}function Gr(e){const t=_t(e);if(t&&hn(t))return $e(t)}function vc(e,t){var n;return(n=e?.att)==null?void 0:n.hasOwnProperty(t)}function Zr(e,t){var n,r;return(n=e?.att)!=null&&n[t]?Object.keys((r=e?.att)==null?void 0:r[t]):[]}function Ec(e){return e?.map(t=>Object.keys(t))||[]}function Yr(e){return e?.map(t=>{var n;return(n=t.split("/"))==null?void 0:n[1]})||[]}function Wr(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function Xr(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function ge(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(o=>{const s=r[o];if(!Array.isArray(s))throw new Error(`Ability limits ${o} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${o} is empty array, must be an array with objects`);s.forEach(i=>{if(typeof i!="object")throw new Error(`Ability limits (${o}) must be an array of objects, found: ${i}`)})})})}function Jr(e,t,n,r={}){return n?.sort((o,s)=>o.localeCompare(s)),{att:{[e]:dn(t,n,r)}}}function Qr(e,t,n){var r;e.att[t]=un({},n);const o=(r=Object.keys(e.att))==null?void 0:r.sort((i,c)=>i.localeCompare(c)),s={att:{}};return o.reduce((i,c)=>(i.att[c]=e.att[c],i),s)}function dn(e,t,n={}){t=t?.sort((o,s)=>o.localeCompare(s));const r=t.map(o=>({[`${e}/${o}`]:[n]}));return Object.assign({},...r)}function Tt(e){return ge(e),`urn:recap:${Wr(e).replace(/=/g,"")}`}function $e(e){const t=Xr(e.replace("urn:recap:",""));return ge(t),t}function Ac(e,t,n){const r=Jr(e,t,n);return Tt(r)}function hn(e){return e&&e.includes("urn:recap:")}function Sc(e,t){const n=$e(e),r=$e(t),o=eo(n,r);return Tt(o)}function eo(e,t){ge(e),ge(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((o,s)=>o.localeCompare(s)),r={att:{}};return n.forEach(o=>{var s,i;Object.keys(((s=e.att)==null?void 0:s[o])||{}).concat(Object.keys(((i=t.att)==null?void 0:i[o])||{})).sort((c,a)=>c.localeCompare(a)).forEach(c=>{var a,f;r.att[o]=qr(un({},r.att[o]),{[c]:((a=e.att[o])==null?void 0:a[c])||((f=t.att[o])==null?void 0:f[c])})})}),r}function pn(e="",t){ge(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let o=0;Object.keys(t.att).forEach(c=>{const a=Object.keys(t.att[c]).map(u=>({ability:u.split("/")[0],action:u.split("/")[1]}));a.sort((u,h)=>u.action.localeCompare(h.action));const f={};a.forEach(u=>{f[u.ability]||(f[u.ability]=[]),f[u.ability].push(u.action)});const l=Object.keys(f).map(u=>(o++,`(${o}) '${u}': '${f[u].join("', '")}' for '${c}'.`));r.push(l.join(", ").replace(".,","."))});const s=r.join(" "),i=`${n}${s}`;return`${e?e+" ":""}${i}`}function Ic(e){var t;const n=$e(e);ge(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(o=>o.split("/")[1]):[]}function Bc(e){const t=$e(e);ge(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(o=>{var s;(s=o?.[0])!=null&&s.chains&&n.push(o[0].chains)})}),[...new Set(n.flat())]}function to(e,t){if(!t)return e;const n=$e(t);return ge(n),pn(e,n)}function _t(e){if(!e)return;const t=e?.[e.length-1];return hn(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function no(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function gn(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function bn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function re(e,...t){if(!no(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ro(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Nc(e,t){re(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function je(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Qe(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Oc(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const Uc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Rc(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function mn(e){if(typeof e=="string")e=Rc(e);else if(no(e))e=yn(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function Tc(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function _c(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const Cc=(e,t)=>{function n(r,...o){if(re(r),!Uc)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const l=o[0];if(!l)throw new Error("nonce / iv required");e.varSizeNonce?re(l):re(l,e.nonceLength)}const s=e.tagLength;s&&o[1]!==void 0&&re(o[1]);const i=t(r,...o),c=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");re(u)}};let a=!1;return{encrypt(l,u){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,re(l),c(i.encrypt.length,u),i.encrypt(l,u)},decrypt(l,u){if(re(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(i.decrypt.length,u),i.decrypt(l,u)}}}return Object.assign(n,e),n};function oo(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!Pc(t))throw new Error("invalid output, must be aligned");return t}function so(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),c=Number(n&s),a=r?4:0,f=r?0:4;e.setUint32(t+a,i,r),e.setUint32(t+f,c,r)}function Lc(e,t,n){gn(n);const r=new Uint8Array(16),o=Oc(r);return so(o,0,BigInt(t),n),so(o,8,BigInt(e),n),r}function Pc(e){return e.byteOffset%4===0}function yn(e){return Uint8Array.from(e)}const io=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),$c=io("expand 16-byte k"),jc=io("expand 32-byte k"),kc=je($c),Dc=je(jc);function H(e,t){return e<<t|e>>>32-t}function wn(e){return e.byteOffset%4===0}const Ct=64,Hc=16,co=2**32-1,ao=new Uint32Array;function Vc(e,t,n,r,o,s,i,c){const a=o.length,f=new Uint8Array(Ct),l=je(f),u=wn(o)&&wn(s),h=u?je(o):ao,y=u?je(s):ao;for(let p=0;p<a;i++){if(e(t,n,r,l,i,c),i>=co)throw new Error("arx: counter overflow");const d=Math.min(Ct,a-p);if(u&&d===Ct){const I=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let j=0,D;j<Hc;j++)D=I+j,y[D]=h[D]^l[j];p+=Ct;continue}for(let I=0,j;I<d;I++)j=p+I,s[j]=o[j]^f[I];p+=d}}function Mc(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:s,rounds:i}=Tc({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return bn(o),bn(i),gn(s),gn(n),(c,a,f,l,u=0)=>{re(c),re(a),re(f);const h=f.length;if(l===void 0&&(l=new Uint8Array(h)),re(l),bn(u),u<0||u>=co)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);const y=[];let p=c.length,d,I;if(p===32)y.push(d=yn(c)),I=Dc;else if(p===16&&n)d=new Uint8Array(32),d.set(c),d.set(c,16),I=kc,y.push(d);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);wn(a)||y.push(a=yn(a));const j=je(d);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(I,j,je(a.subarray(0,16)),j),a=a.subarray(16)}const D=16-o;if(D!==a.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){const g=new Uint8Array(12);g.set(a,s?0:12-a.length),a=g,y.push(a)}const B=je(a);return Vc(e,I,j,B,f,l,u,i),Qe(...y),l}}const Y=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class qc{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=mn(t),re(t,32);const n=Y(t,0),r=Y(t,2),o=Y(t,4),s=Y(t,6),i=Y(t,8),c=Y(t,10),a=Y(t,12),f=Y(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|o<<6)&7939,this.r[3]=(o>>>7|s<<9)&8191,this.r[4]=(s>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Y(t,16+2*l)}process(t,n,r=!1){const o=r?0:2048,{h:s,r:i}=this,c=i[0],a=i[1],f=i[2],l=i[3],u=i[4],h=i[5],y=i[6],p=i[7],d=i[8],I=i[9],j=Y(t,n+0),D=Y(t,n+2),B=Y(t,n+4),g=Y(t,n+6),x=Y(t,n+8),R=Y(t,n+10),v=Y(t,n+12),N=Y(t,n+14);let T=s[0]+(j&8191),_=s[1]+((j>>>13|D<<3)&8191),E=s[2]+((D>>>10|B<<6)&8191),O=s[3]+((B>>>7|g<<9)&8191),S=s[4]+((g>>>4|x<<12)&8191),P=s[5]+(x>>>1&8191),b=s[6]+((x>>>14|R<<2)&8191),m=s[7]+((R>>>11|v<<5)&8191),A=s[8]+((v>>>8|N<<8)&8191),C=s[9]+(N>>>5|o),w=0,L=w+T*c+_*(5*I)+E*(5*d)+O*(5*p)+S*(5*y);w=L>>>13,L&=8191,L+=P*(5*h)+b*(5*u)+m*(5*l)+A*(5*f)+C*(5*a),w+=L>>>13,L&=8191;let $=w+T*a+_*c+E*(5*I)+O*(5*d)+S*(5*p);w=$>>>13,$&=8191,$+=P*(5*y)+b*(5*h)+m*(5*u)+A*(5*l)+C*(5*f),w+=$>>>13,$&=8191;let k=w+T*f+_*a+E*c+O*(5*I)+S*(5*d);w=k>>>13,k&=8191,k+=P*(5*p)+b*(5*y)+m*(5*h)+A*(5*u)+C*(5*l),w+=k>>>13,k&=8191;let q=w+T*l+_*f+E*a+O*c+S*(5*I);w=q>>>13,q&=8191,q+=P*(5*d)+b*(5*p)+m*(5*y)+A*(5*h)+C*(5*u),w+=q>>>13,q&=8191;let F=w+T*u+_*l+E*f+O*a+S*c;w=F>>>13,F&=8191,F+=P*(5*I)+b*(5*d)+m*(5*p)+A*(5*y)+C*(5*h),w+=F>>>13,F&=8191;let M=w+T*h+_*u+E*l+O*f+S*a;w=M>>>13,M&=8191,M+=P*c+b*(5*I)+m*(5*d)+A*(5*p)+C*(5*y),w+=M>>>13,M&=8191;let W=w+T*y+_*h+E*u+O*l+S*f;w=W>>>13,W&=8191,W+=P*a+b*c+m*(5*I)+A*(5*d)+C*(5*p),w+=W>>>13,W&=8191;let z=w+T*p+_*y+E*h+O*u+S*l;w=z>>>13,z&=8191,z+=P*f+b*a+m*c+A*(5*I)+C*(5*d),w+=z>>>13,z&=8191;let ce=w+T*d+_*p+E*y+O*h+S*u;w=ce>>>13,ce&=8191,ce+=P*l+b*f+m*a+A*c+C*(5*I),w+=ce>>>13,ce&=8191;let Z=w+T*I+_*d+E*p+O*y+S*h;w=Z>>>13,Z&=8191,Z+=P*u+b*l+m*f+A*a+C*c,w+=Z>>>13,Z&=8191,w=(w<<2)+w|0,w=w+L|0,L=w&8191,w=w>>>13,$+=w,s[0]=L,s[1]=$,s[2]=k,s[3]=q,s[4]=F,s[5]=M,s[6]=W,s[7]=z,s[8]=ce,s[9]=Z}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let o=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=o,o=t[c]>>>13,t[c]&=8191;t[0]+=o*5,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+o,o=r[c]>>>13,r[c]&=8191;r[9]-=8192;let s=(o^1)-1;for(let c=0;c<10;c++)r[c]&=s;s=~s;for(let c=0;c<10;c++)t[c]=t[c]&s|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let i=t[0]+n[0];t[0]=i&65535;for(let c=1;c<8;c++)i=(t[c]+n[c]|0)+(i>>>16)|0,t[c]=i&65535;Qe(r)}update(t){ro(this),t=mn(t),re(t);const{buffer:n,blockLen:r}=this,o=t.length;for(let s=0;s<o;){const i=Math.min(r-this.pos,o-s);if(i===r){for(;r<=o-s;s+=r)this.process(t,s);continue}n.set(t.subarray(s,s+i),this.pos),this.pos+=i,s+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Qe(this.h,this.r,this.buffer,this.pad)}digestInto(t){ro(this),Nc(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let i=0;i<8;i++)t[s++]=r[i]>>>0,t[s++]=r[i]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Fc(e){const t=(r,o)=>e(o).update(mn(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const Kc=Fc(e=>new qc(e));function zc(e,t,n,r,o,s=20){let i=e[0],c=e[1],a=e[2],f=e[3],l=t[0],u=t[1],h=t[2],y=t[3],p=t[4],d=t[5],I=t[6],j=t[7],D=o,B=n[0],g=n[1],x=n[2],R=i,v=c,N=a,T=f,_=l,E=u,O=h,S=y,P=p,b=d,m=I,A=j,C=D,w=B,L=g,$=x;for(let q=0;q<s;q+=2)R=R+_|0,C=H(C^R,16),P=P+C|0,_=H(_^P,12),R=R+_|0,C=H(C^R,8),P=P+C|0,_=H(_^P,7),v=v+E|0,w=H(w^v,16),b=b+w|0,E=H(E^b,12),v=v+E|0,w=H(w^v,8),b=b+w|0,E=H(E^b,7),N=N+O|0,L=H(L^N,16),m=m+L|0,O=H(O^m,12),N=N+O|0,L=H(L^N,8),m=m+L|0,O=H(O^m,7),T=T+S|0,$=H($^T,16),A=A+$|0,S=H(S^A,12),T=T+S|0,$=H($^T,8),A=A+$|0,S=H(S^A,7),R=R+E|0,$=H($^R,16),m=m+$|0,E=H(E^m,12),R=R+E|0,$=H($^R,8),m=m+$|0,E=H(E^m,7),v=v+O|0,C=H(C^v,16),A=A+C|0,O=H(O^A,12),v=v+O|0,C=H(C^v,8),A=A+C|0,O=H(O^A,7),N=N+S|0,w=H(w^N,16),P=P+w|0,S=H(S^P,12),N=N+S|0,w=H(w^N,8),P=P+w|0,S=H(S^P,7),T=T+_|0,L=H(L^T,16),b=b+L|0,_=H(_^b,12),T=T+_|0,L=H(L^T,8),b=b+L|0,_=H(_^b,7);let k=0;r[k++]=i+R|0,r[k++]=c+v|0,r[k++]=a+N|0,r[k++]=f+T|0,r[k++]=l+_|0,r[k++]=u+E|0,r[k++]=h+O|0,r[k++]=y+S|0,r[k++]=p+P|0,r[k++]=d+b|0,r[k++]=I+m|0,r[k++]=j+A|0,r[k++]=D+C|0,r[k++]=B+w|0,r[k++]=g+L|0,r[k++]=x+$|0}const Gc=Mc(zc,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Zc=new Uint8Array(16),fo=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Zc.subarray(n))},Yc=new Uint8Array(32);function uo(e,t,n,r,o){const s=e(t,n,Yc),i=Kc.create(s);o&&fo(i,o),fo(i,r);const c=Lc(r.length,o?o.length:0,!0);i.update(c);const a=i.digest();return Qe(s,c),a}const Wc=e=>(t,n,r)=>({encrypt(s,i){const c=s.length;i=oo(c+16,i,!1),i.set(s);const a=i.subarray(0,-16);e(t,n,a,a,1);const f=uo(e,t,n,a,r);return i.set(f,c),Qe(f),i},decrypt(s,i){i=oo(s.length-16,i,!1);const c=s.subarray(0,-16),a=s.subarray(-16),f=uo(e,t,n,c,r);if(!_c(a,f))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),e(t,n,i,i,1),Qe(f),i}}),lo=Cc({blockSize:64,nonceLength:12,tagLength:16},Wc(Gc));class ho extends Ot{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,rn(t);const r=de(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),ue(s)}update(t){return Oe(this),this.iHash.update(t),this}digestInto(t){Oe(this),Ne(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Lt=(e,t,n)=>new ho(e,t).update(n).digest();Lt.create=(e,t)=>new ho(e,t);function Xc(e,t,n){return rn(e),n===void 0&&(n=new Uint8Array(e.outputLen)),Lt(e,de(n),de(t))}const xn=Uint8Array.from([0]),po=Uint8Array.of();function Jc(e,t,n,r=32){rn(e),me(r);const o=e.outputLen;if(r>255*o)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/o);n===void 0&&(n=po);const i=new Uint8Array(s*o),c=Lt.create(e,t),a=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let l=0;l<s;l++)xn[0]=l+1,a.update(l===0?po:f).update(n).update(xn).digestInto(f),i.set(f,o*l),c._cloneInto(a);return c.destroy(),a.destroy(),ue(f,xn),i.slice(0,r)}const Qc=(e,t,n,r,o)=>Jc(e,Xc(e,t,n),r,o),Pt=Ut;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vn=BigInt(0),En=BigInt(1);function dt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function An(e){if(!dt(e))throw new Error("Uint8Array expected")}function ht(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function $t(e){const t=e.toString(16);return t.length&1?"0"+t:t}function go(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?vn:BigInt("0x"+e)}const bo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ea=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function pt(e){if(An(e),bo)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=ea[e[n]];return t}const we={_0:48,_9:57,A:65,F:70,a:97,f:102};function mo(e){if(e>=we._0&&e<=we._9)return e-we._0;if(e>=we.A&&e<=we.F)return e-(we.A-10);if(e>=we.a&&e<=we.f)return e-(we.a-10)}function jt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(bo)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,s=0;o<n;o++,s+=2){const i=mo(e.charCodeAt(s)),c=mo(e.charCodeAt(s+1));if(i===void 0||c===void 0){const a=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+s)}r[o]=i*16+c}return r}function Me(e){return go(pt(e))}function kt(e){return An(e),go(pt(Uint8Array.from(e).reverse()))}function gt(e,t){return jt(e.toString(16).padStart(t*2,"0"))}function Sn(e,t){return gt(e,t).reverse()}function oe(e,t,n){let r;if(typeof t=="string")try{r=jt(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(dt(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r}function Dt(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];An(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const s=e[r];n.set(s,o),o+=s.length}return n}const In=e=>typeof e=="bigint"&&vn<=e;function Bn(e,t,n){return In(e)&&In(t)&&In(n)&&t<=e&&e<n}function ke(e,t,n,r){if(!Bn(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function ta(e){let t;for(t=0;e>vn;e>>=En,t+=1);return t}const Ht=e=>(En<<BigInt(e))-En,Nn=e=>new Uint8Array(e),yo=e=>Uint8Array.from(e);function na(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Nn(e),o=Nn(e),s=0;const i=()=>{r.fill(1),o.fill(0),s=0},c=(...u)=>n(o,r,...u),a=(u=Nn(0))=>{o=c(yo([0]),u),r=c(),u.length!==0&&(o=c(yo([1]),u),r=c())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const h=[];for(;u<t;){r=c();const y=r.slice();h.push(y),u+=r.length}return Dt(...h)};return(u,h)=>{i(),a(u);let y;for(;!(y=h(f()));)a();return i(),y}}const ra={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||dt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function bt(e,t,n={}){const r=(o,s,i)=>{const c=ra[s];if(typeof c!="function")throw new Error("invalid validator function");const a=e[o];if(!(i&&a===void 0)&&!c(a,e))throw new Error("param "+String(o)+" is invalid. Expected "+s+", got "+a)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}function wo(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(o!==void 0)return o;const s=e(n,...r);return t.set(n,s),s}}const se=BigInt(0),te=BigInt(1),qe=BigInt(2),oa=BigInt(3),xo=BigInt(4),vo=BigInt(5),Eo=BigInt(8);function ie(e,t){const n=e%t;return n>=se?n:t+n}function he(e,t,n){let r=e;for(;t-- >se;)r*=r,r%=n;return r}function On(e,t){if(e===se)throw new Error("invert: expected non-zero number");if(t<=se)throw new Error("invert: expected positive modulus, got "+t);let n=ie(e,t),r=t,o=se,s=te;for(;n!==se;){const c=r/n,a=r%n,f=o-s*c;r=n,n=a,o=s,s=f}if(r!==te)throw new Error("invert: does not exist");return ie(o,t)}function Ao(e,t){const n=(e.ORDER+te)/xo,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function sa(e,t){const n=(e.ORDER-vo)/Eo,r=e.mul(t,qe),o=e.pow(r,n),s=e.mul(t,o),i=e.mul(e.mul(s,qe),o),c=e.mul(s,e.sub(i,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function ia(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-te,n=0;for(;t%qe===se;)t/=qe,n++;let r=qe;const o=mt(e);for(;Io(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Ao;let s=o.pow(r,t);const i=(t+te)/qe;return function(a,f){if(a.is0(f))return f;if(Io(a,f)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,s),h=a.pow(f,t),y=a.pow(f,i);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let p=1,d=a.sqr(h);for(;!a.eql(d,a.ONE);)if(p++,d=a.sqr(d),p===l)throw new Error("Cannot find square root");const I=te<<BigInt(l-p-1),j=a.pow(u,I);l=p,u=a.sqr(j),h=a.mul(h,u),y=a.mul(y,j)}return y}}function ca(e){return e%xo===oa?Ao:e%Eo===vo?sa:ia(e)}const aa=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fa(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=aa.reduce((r,o)=>(r[o]="function",r),t);return bt(e,n)}function ua(e,t,n){if(n<se)throw new Error("invalid exponent, negatives unsupported");if(n===se)return e.ONE;if(n===te)return t;let r=e.ONE,o=t;for(;n>se;)n&te&&(r=e.mul(r,o)),o=e.sqr(o),n>>=te;return r}function So(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),o=t.reduce((i,c,a)=>e.is0(c)?i:(r[a]=i,e.mul(i,c)),e.ONE),s=e.inv(o);return t.reduceRight((i,c,a)=>e.is0(c)?i:(r[a]=e.mul(i,r[a]),e.mul(i,c)),s),r}function Io(e,t){const n=(e.ORDER-te)/qe,r=e.pow(t,n),o=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function Bo(e,t){t!==void 0&&me(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function mt(e,t,n=!1,r={}){if(e<=se)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:o,nByteLength:s}=Bo(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const c=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:s,MASK:Ht(o),ZERO:se,ONE:te,create:a=>ie(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return se<=a&&a<e},is0:a=>a===se,isOdd:a=>(a&te)===te,neg:a=>ie(-a,e),eql:(a,f)=>a===f,sqr:a=>ie(a*a,e),add:(a,f)=>ie(a+f,e),sub:(a,f)=>ie(a-f,e),mul:(a,f)=>ie(a*f,e),pow:(a,f)=>ua(c,a,f),div:(a,f)=>ie(a*On(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>On(a,e),sqrt:r.sqrt||(a=>(i||(i=ca(e)),i(c,a))),toBytes:a=>n?Sn(a,s):gt(a,s),fromBytes:a=>{if(a.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+a.length);return n?kt(a):Me(a)},invertBatch:a=>So(c,a),cmov:(a,f,l)=>l?f:a});return Object.freeze(c)}function No(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Oo(e){const t=No(e);return t+Math.ceil(t/2)}function la(e,t,n=!1){const r=e.length,o=No(t),s=Oo(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const i=n?kt(e):Me(e),c=ie(i,t-te)+te;return n?Sn(c,o):gt(c,o)}const Uo=BigInt(0),Un=BigInt(1);function Rn(e,t){const n=t.negate();return e?n:t}function Ro(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Tn(e,t){Ro(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),o=2**e,s=Ht(e),i=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:o,shiftBy:i}}function To(e,t,n){const{windowSize:r,mask:o,maxNumber:s,shiftBy:i}=n;let c=Number(e&o),a=e>>i;c>r&&(c-=s,a+=Un);const f=t*r,l=f+Math.abs(c)-1,u=c===0,h=c<0,y=t%2!==0;return{nextN:a,offset:l,isZero:u,isNeg:h,isNegF:y,offsetF:f}}function da(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function ha(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const _n=new WeakMap,_o=new WeakMap;function Cn(e){return _o.get(e)||1}function pa(e,t){return{constTimeNegate:Rn,hasPrecomputes(n){return Cn(n)!==1},unsafeLadder(n,r,o=e.ZERO){let s=n;for(;r>Uo;)r&Un&&(o=o.add(s)),s=s.double(),r>>=Un;return o},precomputeWindow(n,r){const{windows:o,windowSize:s}=Tn(r,t),i=[];let c=n,a=c;for(let f=0;f<o;f++){a=c,i.push(a);for(let l=1;l<s;l++)a=a.add(c),i.push(a);c=a.double()}return i},wNAF(n,r,o){let s=e.ZERO,i=e.BASE;const c=Tn(n,t);for(let a=0;a<c.windows;a++){const{nextN:f,offset:l,isZero:u,isNeg:h,isNegF:y,offsetF:p}=To(o,a,c);o=f,u?i=i.add(Rn(y,r[p])):s=s.add(Rn(h,r[l]))}return{p:s,f:i}},wNAFUnsafe(n,r,o,s=e.ZERO){const i=Tn(n,t);for(let c=0;c<i.windows&&o!==Uo;c++){const{nextN:a,offset:f,isZero:l,isNeg:u}=To(o,c,i);if(o=a,!l){const h=r[f];s=s.add(u?h.negate():h)}}return s},getPrecomputes(n,r,o){let s=_n.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&_n.set(r,o(s))),s},wNAFCached(n,r,o){const s=Cn(n);return this.wNAF(s,this.getPrecomputes(s,n,o),r)},wNAFCachedUnsafe(n,r,o,s){const i=Cn(n);return i===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,n,o),r,s)},setWindowSize(n,r){Ro(r,t),_o.set(n,r),_n.delete(n)}}}function ga(e,t,n,r){da(n,e),ha(r,t);const o=n.length,s=r.length;if(o!==s)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,c=ta(BigInt(o));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=Ht(a),l=new Array(Number(f)+1).fill(i),u=Math.floor((t.BITS-1)/a)*a;let h=i;for(let y=u;y>=0;y-=a){l.fill(i);for(let d=0;d<s;d++){const I=r[d],j=Number(I>>BigInt(y)&f);l[j]=l[j].add(n[d])}let p=i;for(let d=l.length-1,I=i;d>0;d--)I=I.add(l[d]),p=p.add(I);if(h=h.add(p),y!==0)for(let d=0;d<a;d++)h=h.double()}return h}function Co(e){return fa(e.Fp),bt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Bo(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const yt=BigInt(0),et=BigInt(1),Vt=BigInt(2);function ba(e){return bt(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function ma(e){const t=ba(e),{P:n,type:r,adjustScalarBytes:o,powPminus2:s}=t,i=r==="x25519";if(!i&&r!=="x448")throw new Error("invalid type");const c=i?255:448,a=i?32:56,f=BigInt(i?9:5),l=BigInt(i?121665:39081),u=i?Vt**BigInt(254):Vt**BigInt(447),h=i?BigInt(8)*Vt**BigInt(251)-et:BigInt(4)*Vt**BigInt(445)-et,y=u+h+et,p=v=>ie(v,n),d=I(f);function I(v){return Sn(p(v),a)}function j(v){const N=oe("u coordinate",v,a);return i&&(N[31]&=127),p(kt(N))}function D(v){return kt(o(oe("scalar",v,a)))}function B(v,N){const T=R(j(N),D(v));if(T===yt)throw new Error("invalid private or public key received");return I(T)}function g(v){return B(v,d)}function x(v,N,T){const _=p(v*(N-T));return N=p(N-_),T=p(T+_),{x_2:N,x_3:T}}function R(v,N){ke("u",v,yt,n),ke("scalar",N,u,y);const T=N,_=v;let E=et,O=yt,S=v,P=et,b=yt;for(let A=BigInt(c-1);A>=yt;A--){const C=T>>A&et;b^=C,{x_2:E,x_3:S}=x(b,E,S),{x_2:O,x_3:P}=x(b,O,P),b=C;const w=E+O,L=p(w*w),$=E-O,k=p($*$),q=L-k,F=S+P,M=S-P,W=p(M*w),z=p(F*$),ce=W+z,Z=W-z;S=p(ce*ce),P=p(_*p(Z*Z)),E=p(L*k),O=p(q*(L+p(l*q)))}({x_2:E,x_3:S}=x(b,E,S)),{x_2:O,x_3:P}=x(b,O,P);const m=s(O);return p(E*m)}return{scalarMult:B,scalarMultBase:g,getSharedSecret:(v,N)=>B(v,N),getPublicKey:v=>g(v),utils:{randomPrivateKey:()=>t.randomBytes(a)},GuBytes:d.slice()}}const Ln=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const ya=BigInt(1),Lo=BigInt(2),wa=BigInt(3),xa=BigInt(5);BigInt(8);function va(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),s=Ln,c=e*e%s*e%s,a=he(c,Lo,s)*c%s,f=he(a,ya,s)*e%s,l=he(f,xa,s)*f%s,u=he(l,t,s)*l%s,h=he(u,n,s)*u%s,y=he(h,r,s)*h%s,p=he(y,o,s)*y%s,d=he(p,o,s)*y%s,I=he(d,t,s)*l%s;return{pow_p_5_8:he(I,Lo,s)*e%s,b2:c}}function Ea(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Pn=ma({P:Ln,type:"x25519",powPminus2:e=>{const t=Ln,{pow_p_5_8:n,b2:r}=va(e);return ie(he(n,wa,t)*r,t)},adjustScalarBytes:Ea,randomBytes:Je});function Po(e){e.lowS!==void 0&&ht("lowS",e.lowS),e.prehash!==void 0&&ht("prehash",e.prehash)}function Aa(e){const t=Co(e);bt(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class Sa extends Error{constructor(t=""){super(t)}}const xe={Err:Sa,_tlv:{encode:(e,t)=>{const{Err:n}=xe;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,o=$t(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?$t(o.length/2|128):"";return $t(e)+s+o+t},decode(e,t){const{Err:n}=xe;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const o=t[r++],s=!!(o&128);let i=0;if(!s)i=o;else{const a=o&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of f)i=i<<8|l;if(r+=a,i<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+i);if(c.length!==i)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=xe;if(e<ve)throw new t("integer: negative integers are not allowed");let n=$t(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=xe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Me(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=xe,o=oe("signature",e),{v:s,l:i}=r.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,s),{v:f,l}=r.decode(2,a);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=xe,r=t.encode(2,n.encode(e.r)),o=t.encode(2,n.encode(e.s)),s=r+o;return t.encode(48,s)}};function $n(e,t){return pt(gt(e,t))}const ve=BigInt(0),G=BigInt(1);BigInt(2);const jn=BigInt(3),Ia=BigInt(4);function Ba(e){const t=Aa(e),{Fp:n}=t,r=mt(t.n,t.nBitLength),o=t.toBytes||((B,g,x)=>{const R=g.toAffine();return Dt(Uint8Array.from([4]),n.toBytes(R.x),n.toBytes(R.y))}),s=t.fromBytes||(B=>{const g=B.subarray(1),x=n.fromBytes(g.subarray(0,n.BYTES)),R=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x,y:R}});function i(B){const{a:g,b:x}=t,R=n.sqr(B),v=n.mul(R,B);return n.add(n.add(v,n.mul(B,g)),x)}function c(B,g){const x=n.sqr(g),R=i(B);return n.eql(x,R)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,jn),Ia),f=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,f)))throw new Error("bad curve params: a or b");function l(B){return Bn(B,G,t.n)}function u(B){const{allowedPrivateKeyLengths:g,nByteLength:x,wrapPrivateKey:R,n:v}=t;if(g&&typeof B!="bigint"){if(dt(B)&&(B=pt(B)),typeof B!="string"||!g.includes(B.length))throw new Error("invalid private key");B=B.padStart(x*2,"0")}let N;try{N=typeof B=="bigint"?B:Me(oe("private key",B,x))}catch{throw new Error("invalid private key, expected hex or "+x+" bytes, got "+typeof B)}return R&&(N=ie(N,v)),ke("private key",N,G,v),N}function h(B){if(!(B instanceof d))throw new Error("ProjectivePoint expected")}const y=wo((B,g)=>{const{px:x,py:R,pz:v}=B;if(n.eql(v,n.ONE))return{x,y:R};const N=B.is0();g==null&&(g=N?n.ONE:n.inv(v));const T=n.mul(x,g),_=n.mul(R,g),E=n.mul(v,g);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:T,y:_}}),p=wo(B=>{if(B.is0()){if(t.allowInfinityPoint&&!n.is0(B.py))return;throw new Error("bad point: ZERO")}const{x:g,y:x}=B.toAffine();if(!n.isValid(g)||!n.isValid(x))throw new Error("bad point: x or y not FE");if(!c(g,x))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(g,x,R){if(g==null||!n.isValid(g))throw new Error("x required");if(x==null||!n.isValid(x)||n.is0(x))throw new Error("y required");if(R==null||!n.isValid(R))throw new Error("z required");this.px=g,this.py=x,this.pz=R,Object.freeze(this)}static fromAffine(g){const{x,y:R}=g||{};if(!g||!n.isValid(x)||!n.isValid(R))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const v=N=>n.eql(N,n.ZERO);return v(x)&&v(R)?d.ZERO:new d(x,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const x=So(n,g.map(R=>R.pz));return g.map((R,v)=>R.toAffine(x[v])).map(d.fromAffine)}static fromHex(g){const x=d.fromAffine(s(oe("pointHex",g)));return x.assertValidity(),x}static fromPrivateKey(g){return d.BASE.multiply(u(g))}static msm(g,x){return ga(d,r,g,x)}_setWindowSize(g){D.setWindowSize(this,g)}assertValidity(){p(this)}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){h(g);const{px:x,py:R,pz:v}=this,{px:N,py:T,pz:_}=g,E=n.eql(n.mul(x,_),n.mul(N,v)),O=n.eql(n.mul(R,_),n.mul(T,v));return E&&O}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:x}=t,R=n.mul(x,jn),{px:v,py:N,pz:T}=this;let _=n.ZERO,E=n.ZERO,O=n.ZERO,S=n.mul(v,v),P=n.mul(N,N),b=n.mul(T,T),m=n.mul(v,N);return m=n.add(m,m),O=n.mul(v,T),O=n.add(O,O),_=n.mul(g,O),E=n.mul(R,b),E=n.add(_,E),_=n.sub(P,E),E=n.add(P,E),E=n.mul(_,E),_=n.mul(m,_),O=n.mul(R,O),b=n.mul(g,b),m=n.sub(S,b),m=n.mul(g,m),m=n.add(m,O),O=n.add(S,S),S=n.add(O,S),S=n.add(S,b),S=n.mul(S,m),E=n.add(E,S),b=n.mul(N,T),b=n.add(b,b),S=n.mul(b,m),_=n.sub(_,S),O=n.mul(b,P),O=n.add(O,O),O=n.add(O,O),new d(_,E,O)}add(g){h(g);const{px:x,py:R,pz:v}=this,{px:N,py:T,pz:_}=g;let E=n.ZERO,O=n.ZERO,S=n.ZERO;const P=t.a,b=n.mul(t.b,jn);let m=n.mul(x,N),A=n.mul(R,T),C=n.mul(v,_),w=n.add(x,R),L=n.add(N,T);w=n.mul(w,L),L=n.add(m,A),w=n.sub(w,L),L=n.add(x,v);let $=n.add(N,_);return L=n.mul(L,$),$=n.add(m,C),L=n.sub(L,$),$=n.add(R,v),E=n.add(T,_),$=n.mul($,E),E=n.add(A,C),$=n.sub($,E),S=n.mul(P,L),E=n.mul(b,C),S=n.add(E,S),E=n.sub(A,S),S=n.add(A,S),O=n.mul(E,S),A=n.add(m,m),A=n.add(A,m),C=n.mul(P,C),L=n.mul(b,L),A=n.add(A,C),C=n.sub(m,C),C=n.mul(P,C),L=n.add(L,C),m=n.mul(A,L),O=n.add(O,m),m=n.mul($,L),E=n.mul(w,E),E=n.sub(E,m),m=n.mul(w,A),S=n.mul($,S),S=n.add(S,m),new d(E,O,S)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return D.wNAFCached(this,g,d.normalizeZ)}multiplyUnsafe(g){const{endo:x,n:R}=t;ke("scalar",g,ve,R);const v=d.ZERO;if(g===ve)return v;if(this.is0()||g===G)return this;if(!x||D.hasPrecomputes(this))return D.wNAFCachedUnsafe(this,g,d.normalizeZ);let{k1neg:N,k1:T,k2neg:_,k2:E}=x.splitScalar(g),O=v,S=v,P=this;for(;T>ve||E>ve;)T&G&&(O=O.add(P)),E&G&&(S=S.add(P)),P=P.double(),T>>=G,E>>=G;return N&&(O=O.negate()),_&&(S=S.negate()),S=new d(n.mul(S.px,x.beta),S.py,S.pz),O.add(S)}multiply(g){const{endo:x,n:R}=t;ke("scalar",g,G,R);let v,N;if(x){const{k1neg:T,k1:_,k2neg:E,k2:O}=x.splitScalar(g);let{p:S,f:P}=this.wNAF(_),{p:b,f:m}=this.wNAF(O);S=D.constTimeNegate(T,S),b=D.constTimeNegate(E,b),b=new d(n.mul(b.px,x.beta),b.py,b.pz),v=S.add(b),N=P.add(m)}else{const{p:T,f:_}=this.wNAF(g);v=T,N=_}return d.normalizeZ([v,N])[0]}multiplyAndAddUnsafe(g,x,R){const v=d.BASE,N=(_,E)=>E===ve||E===G||!_.equals(v)?_.multiplyUnsafe(E):_.multiply(E),T=N(this,x).add(N(g,R));return T.is0()?void 0:T}toAffine(g){return y(this,g)}isTorsionFree(){const{h:g,isTorsionFree:x}=t;if(g===G)return!0;if(x)return x(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:x}=t;return g===G?this:x?x(d,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return ht("isCompressed",g),this.assertValidity(),o(d,this,g)}toHex(g=!0){return ht("isCompressed",g),pt(this.toRawBytes(g))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const{endo:I,nBitLength:j}=t,D=pa(d,I?Math.ceil(j/2):j);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:l}}function Na(e){const t=Co(e);return bt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Oa(e){const t=Na(e),{Fp:n,n:r,nByteLength:o,nBitLength:s}=t,i=n.BYTES+1,c=2*n.BYTES+1;function a(b){return ie(b,r)}function f(b){return On(b,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:y}=Ba({...t,toBytes(b,m,A){const C=m.toAffine(),w=n.toBytes(C.x),L=Dt;return ht("isCompressed",A),A?L(Uint8Array.from([m.hasEvenY()?2:3]),w):L(Uint8Array.from([4]),w,n.toBytes(C.y))},fromBytes(b){const m=b.length,A=b[0],C=b.subarray(1);if(m===i&&(A===2||A===3)){const w=Me(C);if(!Bn(w,G,n.ORDER))throw new Error("Point is not on curve");const L=h(w);let $;try{$=n.sqrt(L)}catch(F){const M=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+M)}const k=($&G)===G;return(A&1)===1!==k&&($=n.neg($)),{x:w,y:$}}else if(m===c&&A===4){const w=n.fromBytes(C.subarray(0,n.BYTES)),L=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:w,y:L}}else{const w=i,L=c;throw new Error("invalid Point, expected length of "+w+", or uncompressed "+L+", got "+m)}}});function p(b){const m=r>>G;return b>m}function d(b){return p(b)?a(-b):b}const I=(b,m,A)=>Me(b.slice(m,A));class j{constructor(m,A,C){ke("r",m,G,r),ke("s",A,G,r),this.r=m,this.s=A,C!=null&&(this.recovery=C),Object.freeze(this)}static fromCompact(m){const A=o;return m=oe("compactSignature",m,A*2),new j(I(m,0,A),I(m,A,2*A))}static fromDER(m){const{r:A,s:C}=xe.toSig(oe("DER",m));return new j(A,C)}assertValidity(){}addRecoveryBit(m){return new j(this.r,this.s,m)}recoverPublicKey(m){const{r:A,s:C,recovery:w}=this,L=v(oe("msgHash",m));if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");const $=w===2||w===3?A+t.n:A;if($>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const k=(w&1)===0?"02":"03",q=l.fromHex(k+$n($,n.BYTES)),F=f($),M=a(-L*F),W=a(C*F),z=l.BASE.multiplyAndAddUnsafe(q,M,W);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new j(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return jt(this.toDERHex())}toDERHex(){return xe.hexFromSig(this)}toCompactRawBytes(){return jt(this.toCompactHex())}toCompactHex(){const m=o;return $n(this.r,m)+$n(this.s,m)}}const D={isValidPrivateKey(b){try{return u(b),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const b=Oo(t.n);return la(t.randomBytes(b),t.n)},precompute(b=8,m=l.BASE){return m._setWindowSize(b),m.multiply(BigInt(3)),m}};function B(b,m=!0){return l.fromPrivateKey(b).toRawBytes(m)}function g(b){if(typeof b=="bigint")return!1;if(b instanceof l)return!0;const A=oe("key",b).length,C=n.BYTES,w=C+1,L=2*C+1;if(!(t.allowedPrivateKeyLengths||o===w))return A===w||A===L}function x(b,m,A=!0){if(g(b)===!0)throw new Error("first arg must be private key");if(g(m)===!1)throw new Error("second arg must be public key");return l.fromHex(m).multiply(u(b)).toRawBytes(A)}const R=t.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const m=Me(b),A=b.length*8-s;return A>0?m>>BigInt(A):m},v=t.bits2int_modN||function(b){return a(R(b))},N=Ht(s);function T(b){return ke("num < 2^"+s,b,ve,N),gt(b,o)}function _(b,m,A=E){if(["recovered","canonical"].some(Z=>Z in A))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:w}=t;let{lowS:L,prehash:$,extraEntropy:k}=A;L==null&&(L=!0),b=oe("msgHash",b),Po(A),$&&(b=oe("prehashed msgHash",C(b)));const q=v(b),F=u(m),M=[T(F),T(q)];if(k!=null&&k!==!1){const Z=k===!0?w(n.BYTES):k;M.push(oe("extraEntropy",Z))}const W=Dt(...M),z=q;function ce(Z){const Ge=R(Z);if(!y(Ge))return;const zt=f(Ge),ot=l.BASE.multiply(Ge).toAffine(),He=a(ot.x);if(He===ve)return;const st=a(zt*a(z+He*F));if(st===ve)return;let Ze=(ot.x===He?0:2)|Number(ot.y&G),Wn=st;return L&&p(st)&&(Wn=d(st),Ze^=1),new j(He,Wn,Ze)}return{seed:W,k2sig:ce}}const E={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function S(b,m,A=E){const{seed:C,k2sig:w}=_(b,m,A),L=t;return na(L.hash.outputLen,L.nByteLength,L.hmac)(C,w)}l.BASE._setWindowSize(8);function P(b,m,A,C=O){const w=b;m=oe("msgHash",m),A=oe("publicKey",A);const{lowS:L,prehash:$,format:k}=C;if(Po(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&k!=="compact"&&k!=="der")throw new Error("format must be compact or der");const q=typeof w=="string"||dt(w),F=!q&&!k&&typeof w=="object"&&w!==null&&typeof w.r=="bigint"&&typeof w.s=="bigint";if(!q&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let M,W;try{if(F&&(M=new j(w.r,w.s)),q){try{k!=="compact"&&(M=j.fromDER(w))}catch(Ze){if(!(Ze instanceof xe.Err))throw Ze}!M&&k!=="der"&&(M=j.fromCompact(w))}W=l.fromHex(A)}catch{return!1}if(!M||L&&M.hasHighS())return!1;$&&(m=t.hash(m));const{r:z,s:ce}=M,Z=v(m),Ge=f(ce),zt=a(Z*Ge),ot=a(z*Ge),He=l.BASE.multiplyAndAddUnsafe(W,zt,ot)?.toAffine();return He?a(He.x)===z:!1}return{CURVE:t,getPublicKey:B,getSharedSecret:x,sign:S,verify:P,ProjectivePoint:l,Signature:j,utils:D}}function Ua(e){return{hash:e,hmac:(t,...n)=>Lt(e,t,Ri(...n)),randomBytes:Je}}function kn(e,t){const n=r=>Oa({...e,...Ua(r)});return{...n(t),create:n}}const $o=mt(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Ra=$o.create(BigInt("-3")),Ta=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),_a=kn({a:Ra,b:Ta,Fp:$o,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Ut),jo=mt(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),Ca=jo.create(BigInt("-3")),La=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");kn({a:Ca,b:La,Fp:jo,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},Ji);const ko=mt(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),Pa=ko.create(BigInt("-3")),$a=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");kn({a:Pa,b:$a,Fp:ko,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Xi);const ja=_a,Dn="base10",ne="base16",tt="base64pad",Mt="base64url",nt="utf8",Hn=0,rt=1,wt=2,ka=0,Do=1,xt=12,Vn=32;function Da(){const e=Pn.utils.randomPrivateKey(),t=Pn.getPublicKey(e);return{privateKey:V.toString(e,ne),publicKey:V.toString(t,ne)}}function Ha(){const e=Je(Vn);return V.toString(e,ne)}function Va(e,t){const n=Pn.getSharedSecret(V.fromString(e,ne),V.fromString(t,ne)),r=Qc(Pt,n,void 0,void 0,Vn);return V.toString(r,ne)}function Ma(e){const t=Pt(V.fromString(e,ne));return V.toString(t,ne)}function qa(e){const t=Pt(V.fromString(e,nt));return V.toString(t,ne)}function Mn(e){return V.fromString(`${e}`,Dn)}function Fe(e){return Number(V.toString(e,Dn))}function Ho(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Vo(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function Fa(e){const t=Mn(typeof e.type<"u"?e.type:Hn);if(Fe(t)===rt&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?V.fromString(e.senderPublicKey,ne):void 0,r=typeof e.iv<"u"?V.fromString(e.iv,ne):Je(xt),o=V.fromString(e.symKey,ne),s=lo(o,r).encrypt(V.fromString(e.message,nt)),i=qn({type:t,sealed:s,iv:r,senderPublicKey:n});return e.encoding===Mt?Ho(i):i}function Ka(e){const t=V.fromString(e.symKey,ne),{sealed:n,iv:r}=qt({encoded:e.encoded,encoding:e.encoding}),o=lo(t,r).decrypt(n);if(o===null)throw new Error("Failed to decrypt");return V.toString(o,nt)}function za(e,t){const n=Mn(wt),r=Je(xt),o=V.fromString(e,nt),s=qn({type:n,sealed:o,iv:r});return t===Mt?Ho(s):s}function Ga(e,t){const{sealed:n}=qt({encoded:e,encoding:t});return V.toString(n,nt)}function qn(e){if(Fe(e.type)===wt)return V.toString(V.concat([e.type,e.sealed]),tt);if(Fe(e.type)===rt){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return V.toString(V.concat([e.type,e.senderPublicKey,e.iv,e.sealed]),tt)}return V.toString(V.concat([e.type,e.iv,e.sealed]),tt)}function qt(e){const t=(e.encoding||tt)===Mt?Vo(e.encoded):e.encoded,n=V.fromString(t,tt),r=n.slice(ka,Do),o=Do;if(Fe(r)===rt){const a=o+Vn,f=a+xt,l=n.slice(o,a),u=n.slice(a,f),h=n.slice(f);return{type:r,sealed:h,iv:u,senderPublicKey:l}}if(Fe(r)===wt){const a=n.slice(o),f=Je(xt);return{type:r,sealed:a,iv:f}}const s=o+xt,i=n.slice(o,s),c=n.slice(s);return{type:r,sealed:c,iv:i}}function Za(e,t){const n=qt({encoded:e,encoding:t?.encoding});return Mo({type:Fe(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?V.toString(n.senderPublicKey,ne):void 0,receiverPublicKey:t?.receiverPublicKey})}function Mo(e){const t=e?.type||Hn;if(t===rt){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Ya(e){return e.type===rt&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function Wa(e){return e.type===wt}function qo(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return V.concat([new Uint8Array([4]),t,n])}function Xa(e,t){const[n,r,o]=e.split("."),s=Buffer.from(Vo(o),"base64");if(s.length!==64)throw new Error("Invalid signature length");const i=s.slice(0,32),c=s.slice(32,64),a=`${n}.${r}`,f=Pt(a),l=qo(t);if(!ja.verify(V.concat([i,c]),f,l))throw new Error("Invalid signature");return Bs.decodeJWT(e).payload}const Fo="irn";function Ja(e){return e?.relay||{protocol:Fo}}function Qa(e){const t=Ns.RELAY_JSONRPC[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function Ko(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const s=o.replace(r,""),i=e[o];n[s]=i}}),n}function ef(e){if(!e.includes("wc:")){const f=en(e);f!=null&&f.includes("wc:")&&(e=f)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),o=e.substring(t+1,n).split("@"),s=typeof n<"u"?e.substring(n):"",i=new URLSearchParams(s),c={};i.forEach((f,l)=>{c[l]=f});const a=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:r,topic:zo(o[0]),version:parseInt(o[1],10),symKey:c.symKey,relay:Ko(c),methods:a,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function zo(e){return e.startsWith("//")?e.substring(2):e}function Go(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(o=>{const s=o,i=n+t+s;e[s]&&(r[i]=e[s])}),r}function tf(e){const t=new URLSearchParams,n=Go(e.relay);Object.keys(n).sort().forEach(o=>{t.set(o,n[o])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function nf(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var rf=Object.defineProperty,of=Object.defineProperties,sf=Object.getOwnPropertyDescriptors,Zo=Object.getOwnPropertySymbols,cf=Object.prototype.hasOwnProperty,af=Object.prototype.propertyIsEnumerable,Yo=(e,t,n)=>t in e?rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ff=(e,t)=>{for(var n in t||(t={}))cf.call(t,n)&&Yo(e,n,t[n]);if(Zo)for(var n of Zo(t))af.call(t,n)&&Yo(e,n,t[n]);return e},uf=(e,t)=>of(e,sf(t));function Ke(e){const t=[];return e.forEach(n=>{const[r,o]=n.split(":");t.push(`${r}:${o}`)}),t}function Wo(e){const t=[];return Object.values(e).forEach(n=>{t.push(...Ke(n.accounts))}),t}function Xo(e,t){const n=[];return Object.values(e).forEach(r=>{Ke(r.accounts).includes(t)&&n.push(...r.methods)}),n}function Jo(e,t){const n=[];return Object.values(e).forEach(r=>{Ke(r.accounts).includes(t)&&n.push(...r.events)}),n}function lf(e,t){const n=fs(e,t);if(n)throw new Error(n.message);const r={};for(const[o,s]of Object.entries(e))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)};return r}function df(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:n={}},supportedNamespaces:r}=e,o=vt(t),s=vt(n),i={};Object.keys(r).forEach(f=>{const l=r[f].chains,u=r[f].methods,h=r[f].events,y=r[f].accounts;l.forEach(p=>{if(!y.some(d=>d.includes(p)))throw new Error(`No accounts provided for chain ${p} in namespace ${f}`)}),i[f]={chains:l,methods:u,events:h,accounts:y}});const c=ls(t,i,"approve()");if(c)throw new Error(c.message);const a={};return!Object.keys(t).length&&!Object.keys(n).length?i:(Object.keys(o).forEach(f=>{const l=r[f].chains.filter(p=>{var d,I;return(I=(d=o[f])==null?void 0:d.chains)==null?void 0:I.includes(p)}),u=r[f].methods.filter(p=>{var d,I;return(I=(d=o[f])==null?void 0:d.methods)==null?void 0:I.includes(p)}),h=r[f].events.filter(p=>{var d,I;return(I=(d=o[f])==null?void 0:d.events)==null?void 0:I.includes(p)}),y=l.map(p=>r[f].accounts.filter(d=>d.includes(`${p}:`))).flat();a[f]={chains:l,methods:u,events:h,accounts:y}}),Object.keys(s).forEach(f=>{var l,u,h,y,p,d;if(!r[f])return;const I=(u=(l=s[f])==null?void 0:l.chains)==null?void 0:u.filter(g=>r[f].chains.includes(g)),j=r[f].methods.filter(g=>{var x,R;return(R=(x=s[f])==null?void 0:x.methods)==null?void 0:R.includes(g)}),D=r[f].events.filter(g=>{var x,R;return(R=(x=s[f])==null?void 0:x.events)==null?void 0:R.includes(g)}),B=I?.map(g=>r[f].accounts.filter(x=>x.includes(`${g}:`))).flat();a[f]={chains:fe((h=a[f])==null?void 0:h.chains,I),methods:fe((y=a[f])==null?void 0:y.methods,j),events:fe((p=a[f])==null?void 0:p.events,D),accounts:fe((d=a[f])==null?void 0:d.accounts,B)}}),a)}function Fn(e){return e.includes(":")}function Qo(e){return Fn(e)?e.split(":")[0]:e}function vt(e){var t,n,r;const o={};if(!Ft(e))return o;for(const[s,i]of Object.entries(e)){const c=Fn(s)?[s]:i.chains,a=i.methods||[],f=i.events||[],l=Qo(s);o[l]=uf(ff({},o[l]),{chains:fe(c,(t=o[l])==null?void 0:t.chains),methods:fe(a,(n=o[l])==null?void 0:n.methods),events:fe(f,(r=o[l])==null?void 0:r.events)})}return o}function es(e){const t={};return e?.forEach(n=>{var r;const[o,s]=n.split(":");t[o]||(t[o]={accounts:[],chains:[],events:[],methods:[]}),t[o].accounts.push(n),(r=t[o].chains)==null||r.push(`${o}:${s}`)}),t}function hf(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=es(t);for(const[r,o]of Object.entries(n))o.methods?o.methods=fe(o.methods,e):o.methods=e,o.events=["chainChanged","accountsChanged"];return n}function pf(e,t){var n,r,o,s,i,c;const a=vt(e),f=vt(t),l={},u=Object.keys(a).concat(Object.keys(f));for(const h of u)l[h]={chains:fe((n=a[h])==null?void 0:n.chains,(r=f[h])==null?void 0:r.chains),methods:fe((o=a[h])==null?void 0:o.methods,(s=f[h])==null?void 0:s.methods),events:fe((i=a[h])==null?void 0:i.events,(c=f[h])==null?void 0:c.events)};return l}const ts={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ns={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ee(e,t){const{message:n,code:r}=ns[e];return{message:t?`${n} ${t}`:n,code:r}}function ze(e,t){const{message:n,code:r}=ts[e];return{message:t?`${n} ${t}`:n,code:r}}function Et(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Ft(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function De(e){return typeof e>"u"}function ae(e,t){return t&&De(e)?!0:typeof e=="string"&&!!e.trim().length}function Kt(e,t){return t&&De(e)?!0:typeof e=="number"&&!isNaN(e)}function gf(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),o=Object.keys(n);let s=!0;return Se(o,r)?(r.forEach(i=>{const{accounts:c,methods:a,events:f}=e.namespaces[i],l=Ke(c),u=n[i];(!Se(It(i,u),l)||!Se(u.methods,a)||!Se(u.events,f))&&(s=!1)}),s):!1}function At(e){return ae(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function rs(e){if(ae(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&At(n)}}return!1}function bf(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(ae(e,!1)){if(t(e))return!0;const n=en(e);return t(n)}}catch{}return!1}function mf(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function yf(e){return e?.topic}function wf(e,t){let n=null;return ae(e?.publicKey,!1)||(n=Ee("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function Kn(e){let t=!0;return Et(e)?e.length&&(t=e.every(n=>ae(n,!1))):t=!1,t}function os(e,t,n){let r=null;return Et(t)&&t.length?t.forEach(o=>{r||At(o)||(r=ze("UNSUPPORTED_CHAINS",`${n}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):At(e)||(r=ze("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function ss(e,t,n){let r=null;return Object.entries(e).forEach(([o,s])=>{if(r)return;const i=os(o,It(o,s),`${t} ${n}`);i&&(r=i)}),r}function is(e,t){let n=null;return Et(e)?e.forEach(r=>{n||rs(r)||(n=ze("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=ze("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function cs(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const o=is(r?.accounts,`${t} namespace`);o&&(n=o)}),n}function as(e,t){let n=null;return Kn(e?.methods)?Kn(e?.events)||(n=ze("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=ze("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function zn(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const o=as(r,`${t}, namespace`);o&&(n=o)}),n}function xf(e,t,n){let r=null;if(e&&Ft(e)){const o=zn(e,t);o&&(r=o);const s=ss(e,t,n);s&&(r=s)}else r=Ee("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function fs(e,t){let n=null;if(e&&Ft(e)){const r=zn(e,t);r&&(n=r);const o=cs(e,t);o&&(n=o)}else n=Ee("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function us(e){return ae(e.protocol,!0)}function vf(e,t){let n=!1;return t&&!e?n=!0:e&&Et(e)&&e.length&&e.forEach(r=>{n=us(r)}),n}function Ef(e){return typeof e=="number"}function Af(e){return typeof e<"u"&&typeof e!==null}function Sf(e){return!(!e||typeof e!="object"||!e.code||!Kt(e.code,!1)||!e.message||!ae(e.message,!1))}function If(e){return!(De(e)||!ae(e.method,!1))}function Bf(e){return!(De(e)||De(e.result)&&De(e.error)||!Kt(e.id,!1)||!ae(e.jsonrpc,!1))}function Nf(e){return!(De(e)||!ae(e.name,!1))}function Of(e,t){return!(!At(t)||!Wo(e).includes(t))}function Uf(e,t,n){return ae(n,!1)?Xo(e,t).includes(n):!1}function Rf(e,t,n){return ae(n,!1)?Jo(e,t).includes(n):!1}function ls(e,t,n){let r=null;const o=Tf(e),s=_f(t),i=Object.keys(o),c=Object.keys(s),a=ds(Object.keys(e)),f=ds(Object.keys(t)),l=a.filter(u=>!f.includes(u));return l.length&&(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(t).toString()}`)),Se(i,c)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${i.toString()}
      Approved: ${c.toString()}`)),Object.keys(t).forEach(u=>{if(!u.includes(":")||r)return;const h=Ke(t[u].accounts);h.includes(u)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${u}
        Required: ${u}
        Approved: ${h.toString()}`))}),i.forEach(u=>{r||(Se(o[u].methods,s[u].methods)?Se(o[u].events,s[u].events)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${u}`)):r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${u}`))}),r}function Tf(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(o=>{t[o]={methods:e[n].methods,events:e[n].events}})}),t}function ds(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function _f(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=Ke(e[n].accounts);r?.forEach(o=>{t[o]={accounts:e[n].accounts.filter(s=>s.includes(`${o}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function Cf(e,t){return Kt(e,!1)&&e<=t.max&&e>=t.min}function Lf(){const e=Ve();return new Promise(t=>{switch(e){case ee.browser:t(hs());break;case ee.reactNative:t(ps());break;case ee.node:t(gs());break;default:t(!0)}})}function hs(){return We()&&navigator?.onLine}async function ps(){if(Ae()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function gs(){return!0}function Pf(e){switch(Ve()){case ee.browser:bs(e);break;case ee.reactNative:ms(e);break;case ee.node:break}}function bs(e){!Ae()&&We()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function ms(e){Ae()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function $f(){var e;return We()&&be.getDocument()?((e=be.getDocument())==null?void 0:e.visibilityState)==="visible":!0}const Gn={};class jf{static get(t){return Gn[t]}static set(t,n){Gn[t]=n}static delete(t){delete Gn[t]}}function ys(e){const t=it.default.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function ws({publicKey:e,signature:t,payload:n}){var r;const o=Zn(n.method),s=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),i=Df(n.address),c=n.era==="00"?new Uint8Array([0]):Zn(n.era);if(c.length!==1&&c.length!==2)throw new Error("Invalid era length");const a=parseInt(n.nonce,16),f=new Uint8Array([a&255,a>>8&255]),l=BigInt(`0x${kf(n.tip)}`),u=Vf(l),h=new Uint8Array([0,...e,i,...t,...c,...f,...u,...o]),y=Hf(h.length+1);return new Uint8Array([...y,s,...h])}function xs(e){const t=Zn(e),n=Os.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Zn(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function kf(e){return e.startsWith("0x")?e.slice(2):e}function Df(e){const t=it.default.decode(e)[0];return t===42?0:t===60?2:1}function Hf(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Vf(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Mf(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=ys(e.transaction.address),r=ws({publicKey:n,signature:t,payload:e.transaction}),o=Buffer.from(r).toString("hex");return xs(o)}exports.BASE10=Dn,exports.BASE16=ne,exports.BASE64=tt,exports.BASE64URL=Mt,exports.COLON=Vs,exports.DEFAULT_DEPTH=Wt,exports.EMPTY_SPACE=Bt,exports.ENV_MAP=ee,exports.INTERNAL_ERRORS=ns,exports.MemoryStore=jf,exports.ONE_THOUSAND=Ms,exports.REACT_NATIVE_PRODUCT=ir,exports.RELAYER_DEFAULT_PROTOCOL=Fo,exports.SDK_ERRORS=ts,exports.SDK_TYPE=ar,exports.SLASH=cr,exports.TYPE_0=Hn,exports.TYPE_1=rt,exports.TYPE_2=wt,exports.UTF8=nt,exports.addResourceToRecap=Qr,exports.addSignatureToExtrinsic=ws,exports.appendToQueryString=fr,exports.assertType=Ws,exports.assignAbilityToActions=dn,exports.base64Decode=Xr,exports.base64Encode=Wr,exports.buildApprovedNamespaces=df,exports.buildAuthObject=wc,exports.buildNamespacesFromAuth=hf,exports.buildRecapStatement=to,exports.buildSignedExtrinsicHash=Mf,exports.calcExpiry=ai,exports.capitalize=ni,exports.capitalizeWord=br,exports.createDelayedPromise=ri,exports.createEncodedRecap=Ac,exports.createExpiringPromise=oi,exports.createRecap=Jr,exports.decodeRecap=$e,exports.decodeTypeByte=Fe,exports.decodeTypeTwoEnvelope=Ga,exports.decrypt=Ka,exports.deriveExtrinsicHash=xs,exports.deriveSymKey=Va,exports.deserialize=qt,exports.encodeRecap=Tt,exports.encodeTypeByte=Mn,exports.encodeTypeTwoEnvelope=za,exports.encrypt=Fa,exports.engineEvent=ui,exports.enumify=ti,exports.extractSolanaTransactionId=cc,exports.formatAccountId=Qn,exports.formatAccountWithChain=Rs,exports.formatChainId=Jn,exports.formatDeeplinkUrl=mr,exports.formatExpirerTarget=Jt,exports.formatIdTarget=ii,exports.formatMessage=zr,exports.formatMessageContext=Xs,exports.formatRelayParams=Go,exports.formatRelayRpcUrl=Zs,exports.formatStatementFromRecap=pn,exports.formatTopicTarget=si,exports.formatUA=hr,exports.formatUri=tf,exports.fromBase64=en,exports.generateKeyPair=Da,exports.generateRandomBytes32=Ha,exports.getAccountsChains=Ke,exports.getAccountsFromNamespaces=_s,exports.getAddressFromAccount=er,exports.getAddressesFromAccounts=Ts,exports.getAlgorandTransactionId=uc,exports.getAppId=Ks,exports.getAppMetadata=ur,exports.getBrowserOnlineStatus=hs,exports.getChainFromAccount=tr,exports.getChainsFromAccounts=nr,exports.getChainsFromNamespace=It,exports.getChainsFromNamespaces=Cs,exports.getChainsFromRecap=Bc,exports.getChainsFromRequiredNamespaces=Ls,exports.getCommonValuesInArrays=Qt,exports.getCryptoKeyFromKeyData=qo,exports.getDecodedRecapFromResources=Gr,exports.getDeepLink=di,exports.getDidAddress=ln,exports.getDidAddressSegments=Rt,exports.getDidChainId=Fr,exports.getEnvironment=Ve,exports.getHttpUrl=Ys,exports.getInternalError=Ee,exports.getJavascriptID=dr,exports.getJavascriptOS=lr,exports.getLastItems=gr,exports.getLinkModeURL=nf,exports.getMethodsFromRecap=Ic,exports.getNamespacedDidChainId=Kr,exports.getNamespacesChains=Wo,exports.getNamespacesEventsForChainId=Jo,exports.getNamespacesFromAccounts=es,exports.getNamespacesMethodsForChainId=Xo,exports.getNearTransactionIdFromSignedTransaction=fc,exports.getNearUint8ArrayFromBytes=Hr,exports.getNodeOnlineStatus=gs,exports.getReCapActions=Yr,exports.getReactNativeOnlineStatus=ps,exports.getRecapAbilitiesFromResource=Ec,exports.getRecapFromResources=_t,exports.getRecapResource=Zr,exports.getRelayClientMetadata=Gs,exports.getRelayProtocolApi=Qa,exports.getRelayProtocolName=Ja,exports.getRequiredNamespacesFromNamespaces=lf,exports.getSdkError=ze,exports.getSearchParamFromURL=hi,exports.getSignDirectHash=lc,exports.getSuiDigest=ac,exports.getUniqueValues=Yt,exports.handleDeeplinkRedirect=li,exports.hasOverlap=Se,exports.hashEthereumMessage=an,exports.hashKey=Ma,exports.hashMessage=qa,exports.isAndroid=qs,exports.isAppVisible=$f,exports.isBrowser=We,exports.isCaipNamespace=Fn,exports.isConformingNamespaces=ls,exports.isExpired=fi,exports.isIframe=xr,exports.isIos=Fs,exports.isNode=Xt,exports.isOnline=Lf,exports.isProposalStruct=mf,exports.isReactNative=Ae,exports.isRecap=hn,exports.isSessionCompatible=gf,exports.isSessionStruct=yf,exports.isTelegram=wr,exports.isTestRun=gi,exports.isTypeOneEnvelope=Ya,exports.isTypeTwoEnvelope=Wa,exports.isUndefined=De,exports.isValidAccountId=rs,exports.isValidAccounts=is,exports.isValidActions=as,exports.isValidArray=Et,exports.isValidChainId=At,exports.isValidChains=os,exports.isValidController=wf,exports.isValidEip1271Signature=Dr,exports.isValidEip191Signature=kr,exports.isValidErrorReason=Sf,exports.isValidEvent=Nf,exports.isValidId=Ef,exports.isValidNamespaceAccounts=cs,exports.isValidNamespaceActions=zn,exports.isValidNamespaceChains=ss,exports.isValidNamespaceMethodsOrEvents=Kn,exports.isValidNamespaces=fs,exports.isValidNamespacesChainId=Of,exports.isValidNamespacesEvent=Rf,exports.isValidNamespacesRequest=Uf,exports.isValidNumber=Kt,exports.isValidObject=Ft,exports.isValidParams=Af,exports.isValidRecap=ge,exports.isValidRelay=us,exports.isValidRelays=vf,exports.isValidRequest=If,exports.isValidRequestExpiry=Cf,exports.isValidRequiredNamespaces=xf,exports.isValidResponse=Bf,exports.isValidString=ae,exports.isValidUrl=bf,exports.mapEntries=ei,exports.mapToObj=Js,exports.mergeArrays=fe,exports.mergeEncodedRecaps=Sc,exports.mergeRecaps=eo,exports.mergeRequiredAndOptionalNamespaces=pf,exports.normalizeNamespaces=vt,exports.objToMap=Qs,exports.openDeeplink=yr,exports.parseAccountId=Zt,exports.parseChainId=Gt,exports.parseContextNames=pr,exports.parseExpirerTarget=ci,exports.parseNamespaceKey=Qo,exports.parseRelayParams=Ko,exports.parseTopic=zo,exports.parseUri=ef,exports.populateAppMetadata=zs,exports.populateAuthPayload=xc,exports.recapHasResource=vc,exports.serialize=qn,exports.sleep=bi,exports.ss58AddressToPublicKey=ys,exports.subscribeToBrowserNetworkChange=bs,exports.subscribeToNetworkChange=Pf,exports.subscribeToReactNativeNetworkChange=ms,exports.toBase64=vr,exports.uuidv4=pi,exports.validateDecoding=Za,exports.validateEncoding=Mo,exports.validateSignedCacao=yc,exports.verifyP256Jwt=Xa,exports.verifySignature=jr;
//# sourceMappingURL=index.cjs.js.map

(function(b,nt){typeof exports=="object"&&typeof module<"u"?nt(exports):typeof define=="function"&&define.amd?define(["exports"],nt):(b=typeof globalThis<"u"?globalThis:b||self,nt(b["@walletconnect/utils"]={}))})(this,function(b){"use strict";const nt=":";function Pr(e){const[t,n]=e.split(nt);return{namespace:t,reference:n}}function Xo(e){const{namespace:t,reference:n}=e;return[t,n].join(nt)}function kr(e){const[t,n,r]=e.split(nt);return{namespace:t,reference:n,address:r}}function Jo(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(nt)}function Lr(e,t){const n=[];return e.forEach(r=>{const i=t(r);n.includes(i)||n.push(i)}),n}function Qo(e){const{address:t}=kr(e);return t}function es(e){const{namespace:t,reference:n}=kr(e);return Xo({namespace:t,reference:n})}function Xf(e,t){const{namespace:n,reference:r}=Pr(t);return Jo({namespace:n,reference:r,address:e})}function Jf(e){return Lr(e,Qo)}function ts(e){return Lr(e,es)}function Qf(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...i.accounts)}),n}function el(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...ts(i.accounts))}),n}function tl(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...Kn(r,i))}),n}function Kn(e,t){return e.includes(":")?[e]:t.chains||[]}var ns=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},nl=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),rl=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),il=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),ol=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),sl=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),cl=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,al=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,rs=3,ul=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",cl]],is=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function fl(e){return e?os(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new sl:typeof navigator<"u"?os(navigator.userAgent):hl()}function ll(e){return e!==""&&ul.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]},!1)}function os(e){var t=ll(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new ol;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<rs&&(i=ns(ns([],i,!0),gl(rs-i.length),!0)):i=[];var o=i.join("."),s=dl(e),c=al.exec(e);return c&&c[1]?new il(n,o,s,c[1]):new nl(n,o,s)}function dl(e){for(var t=0,n=is.length;t<n;t++){var r=is[t],i=r[0],o=r[1],s=o.exec(e);if(s)return i}return null}function hl(){var e=typeof process<"u"&&process.version;return e?new rl(process.version.slice(1)):null}function gl(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}function bl(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Tt={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Mr=function(e,t){return Mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Mr(e,t)};function pl(e,t){Mr(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var zr=function(){return zr=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},zr.apply(this,arguments)};function wl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function yl(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function ml(e,t){return function(n,r){t(n,r,e)}}function El(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function xl(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{u(r.next(f))}catch(l){s(l)}}function a(f){try{u(r.throw(f))}catch(l){s(l)}}function u(f){f.done?o(f.value):i(f.value).then(c,a)}u((r=r.apply(e,t||[])).next())})}function vl(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(u){return function(f){return a([u,f])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Dl(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function Al(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Hr(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ss(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Bl(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ss(arguments[t]));return e}function Sl(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r}function an(e){return this instanceof an?(this.v=e,this):new an(e)}function _l(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(p){return new Promise(function(d,g){o.push([h,p,d,g])>1||c(h,p)})})}function c(h,p){try{a(r[h](p))}catch(d){l(o[0][3],d)}}function a(h){h.value instanceof an?Promise.resolve(h.value.v).then(u,f):l(o[0][2],h)}function u(h){c("next",h)}function f(h){c("throw",h)}function l(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ul(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:an(e[i](s)),done:i==="return"}:o?o(s):s}:o}}function Il(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Hr=="function"?Hr(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(c,a){s=e[o](s),i(c,a,s.done,s.value)})}}function i(o,s,c,a){Promise.resolve(a).then(function(u){o({value:u,done:c})},s)}}function Ol(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Cl(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Tl(e){return e&&e.__esModule?e:{default:e}}function Nl(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Rl(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var $l=Object.freeze({__proto__:null,__extends:pl,get __assign(){return zr},__rest:wl,__decorate:yl,__param:ml,__metadata:El,__awaiter:xl,__generator:vl,__createBinding:Dl,__exportStar:Al,__values:Hr,__read:ss,__spread:Bl,__spreadArrays:Sl,__await:an,__asyncGenerator:_l,__asyncDelegator:Ul,__asyncValues:Il,__makeTemplateObject:Ol,__importStar:Cl,__importDefault:Tl,__classPrivateFieldGet:Nl,__classPrivateFieldSet:Rl}),Wn=bl($l),jr={},un={},cs;function Fl(){if(cs)return un;cs=1,Object.defineProperty(un,"__esModule",{value:!0}),un.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return un.delay=e,un}var Nt={},Vr={},Rt={},as;function Pl(){return as||(as=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.ONE_THOUSAND=Rt.ONE_HUNDRED=void 0,Rt.ONE_HUNDRED=100,Rt.ONE_THOUSAND=1e3),Rt}var qr={},us;function kl(){return us||(us=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(qr)),qr}var fs;function ls(){return fs||(fs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Wn;t.__exportStar(Pl(),e),t.__exportStar(kl(),e)}(Vr)),Vr}var ds;function Ll(){if(ds)return Nt;ds=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.fromMiliseconds=Nt.toMiliseconds=void 0;const e=ls();function t(r){return r*e.ONE_THOUSAND}Nt.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return Nt.fromMiliseconds=n,Nt}var hs;function Ml(){return hs||(hs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Wn;t.__exportStar(Fl(),e),t.__exportStar(Ll(),e)}(jr)),jr}var qt={},gs;function zl(){if(gs)return qt;gs=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return qt.Watch=e,qt.default=e,qt}var Kr={},fn={},bs;function Hl(){if(bs)return fn;bs=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.IWatch=void 0;class e{}return fn.IWatch=e,fn}var ps;function jl(){return ps||(ps=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Wn.__exportStar(Hl(),e)}(Kr)),Kr}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Wn;t.__exportStar(Ml(),e),t.__exportStar(zl(),e),t.__exportStar(jl(),e),t.__exportStar(ls(),e)})(Tt);var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.getLocalStorage=J.getLocalStorageOrThrow=J.getCrypto=J.getCryptoOrThrow=Gr=J.getLocation=J.getLocationOrThrow=Wr=J.getNavigator=J.getNavigatorOrThrow=Wt=J.getDocument=J.getDocumentOrThrow=J.getFromWindowOrThrow=J.getFromWindow=void 0;function $t(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}J.getFromWindow=$t;function Kt(e){const t=$t(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}J.getFromWindowOrThrow=Kt;function Vl(){return Kt("document")}J.getDocumentOrThrow=Vl;function ql(){return $t("document")}var Wt=J.getDocument=ql;function Kl(){return Kt("navigator")}J.getNavigatorOrThrow=Kl;function Wl(){return $t("navigator")}var Wr=J.getNavigator=Wl;function Gl(){return Kt("location")}J.getLocationOrThrow=Gl;function Yl(){return $t("location")}var Gr=J.getLocation=Yl;function Zl(){return Kt("crypto")}J.getCryptoOrThrow=Zl;function Xl(){return $t("crypto")}J.getCrypto=Xl;function Jl(){return Kt("localStorage")}J.getLocalStorageOrThrow=Jl;function Ql(){return $t("localStorage")}J.getLocalStorage=Ql;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});var ws=Yr.getWindowMetadata=void 0;const ys=J;function ed(){let e,t;try{e=ys.getDocumentOrThrow(),t=ys.getLocationOrThrow()}catch{return null}function n(){const l=e.getElementsByTagName("link"),h=[];for(let p=0;p<l.length;p++){const d=l[p],g=d.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const E=d.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let B=t.protocol+"//"+t.host;if(E.indexOf("/")===0)B+=E;else{const O=t.pathname.split("/");O.pop();const w=O.join("/");B+=w+"/"+E}h.push(B)}else if(E.indexOf("//")===0){const B=t.protocol+E;h.push(B)}else h.push(E)}}return h}function r(...l){const h=e.getElementsByTagName("meta");for(let p=0;p<h.length;p++){const d=h[p],g=["itemprop","property","name"].map(E=>d.getAttribute(E)).filter(E=>E?l.includes(E):!1);if(g.length&&g){const E=d.getAttribute("content");if(E)return E}}return""}function i(){let l=r("name","og:site_name","og:title","twitter:title");return l||(l=e.title),l}function o(){return r("description","og:description","twitter:description","keywords")}const s=i(),c=o(),a=t.origin,u=n();return{description:c,url:a,icons:u,name:s}}ws=Yr.getWindowMetadata=ed;var td=Object.defineProperty,nd=Object.defineProperties,rd=Object.getOwnPropertyDescriptors,ms=Object.getOwnPropertySymbols,id=Object.prototype.hasOwnProperty,od=Object.prototype.propertyIsEnumerable,Es=(e,t,n)=>t in e?td(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xs=(e,t)=>{for(var n in t||(t={}))id.call(t,n)&&Es(e,n,t[n]);if(ms)for(var n of ms(t))od.call(t,n)&&Es(e,n,t[n]);return e},sd=(e,t)=>nd(e,rd(t));const vs="ReactNative",pe={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Gn=" ",cd=":",Ds="/",Zr=2,ad=1e3,As="js";function Xr(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function rt(){return!Wt()&&!!Wr()&&navigator.product===vs}function ud(){return rt()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function fd(){return rt()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Gt(){return!Xr()&&!!Wr()&&!!Wt()}function Ft(){return rt()?pe.reactNative:Xr()?pe.node:Gt()?pe.browser:pe.unknown}function ld(){var e;try{return rt()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function Bs(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const i=t[r];i!==void 0&&n.set(r,i)}return n.toString()}function dd(e){var t,n;const r=Ss();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),sd(xs(xs({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function Ss(){return ws()||{name:"",description:"",url:"",icons:[""]}}function hd(e,t){var n;const r=Ft(),i={protocol:e,version:t,env:r};return r==="browser"&&(i.host=((n=Gr())==null?void 0:n.host)||"unknown"),i}function _s(){if(Ft()===pe.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=fl();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Us(){var e;const t=Ft();return t===pe.browser?[t,((e=Gr())==null?void 0:e.host)||"unknown"].join(":"):t}function Is(e,t,n){const r=_s(),i=Us();return[[e,t].join("-"),[As,n].join("-"),r,i].join("/")}function gd({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:o,useOnCloseEvent:s,bundleId:c,packageName:a}){const u=n.split("?"),f=Is(e,t,r),l={auth:i,ua:f,projectId:o,useOnCloseEvent:s||void 0,packageName:a||void 0,bundleId:c||void 0},h=Bs(u[1]||"",l);return u[0]+"?"+h}function bd(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function pd(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function Os(e,t=Zr){return Cs(e.split(Ds),t)}function wd(e){return Os(e).join(Gn)}function it(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Cs(e,t=Zr){return e.slice(Math.max(e.length-t,0))}function yd(e){return Object.fromEntries(e.entries())}function md(e){return new Map(Object.entries(e))}function Ed(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const xd=e=>e;function Ts(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function vd(e){return e.split(Gn).map(t=>Ts(t)).join(Gn)}function Dd(e=Tt.FIVE_MINUTES,t){const n=Tt.toMiliseconds(e||Tt.FIVE_MINUTES);let r,i,o,s;return{resolve:c=>{o&&r&&(clearTimeout(o),r(c),s=Promise.resolve(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,a)=>{if(s)return c(s);o=setTimeout(()=>{const u=new Error(t);s=Promise.reject(u),a(u)},n),r=c,i=a})}}function Ad(e,t,n){return new Promise(async(r,i)=>{const o=setTimeout(()=>i(new Error(n)),t);try{const s=await e;r(s)}catch(s){i(s)}clearTimeout(o)})}function Jr(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Bd(e){return Jr("topic",e)}function Sd(e){return Jr("id",e)}function _d(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Ud(e,t){return Tt.fromMiliseconds((t||Date.now())+Tt.toMiliseconds(e))}function Id(e){return Date.now()>=Tt.toMiliseconds(e)}function Od(e,t){return`${e}${t?`:${t}`:""}`}function Oe(e=[],t=[]){return[...new Set([...e,...t])]}async function Cd({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,o=i?.href;if(typeof o!="string")return;const s=Ns(o,e,t),c=Ft();if(c===pe.browser){if(!((r=Wt())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Rs(s)}else c===pe.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}function Ns(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const o=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${o}${Ps(r,!0)}`}else i=`${i}/wc?${r}`;return i}function Rs(e){let t="_self";Fs()?t="_top":($s()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Td(e,t){let n="";try{if(Gt()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function Qr(e,t){return e.filter(n=>t.includes(n))}function Nd(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function Rd(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function $d(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function $s(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Fs(){try{return window.self!==window.top}catch{return!1}}function Ps(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function ei(e){return Buffer.from(e,"base64").toString("utf-8")}function Fd(e){return new Promise(t=>setTimeout(t,e))}const Yn=BigInt(2**32-1),ks=BigInt(32);function Ls(e,t=!1){return t?{h:Number(e&Yn),l:Number(e>>ks&Yn)}:{h:Number(e>>ks&Yn)|0,l:Number(e&Yn)|0}}function Ms(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let o=0;o<n;o++){const{h:s,l:c}=Ls(e[o],t);[r[o],i[o]]=[s,c]}return[r,i]}const zs=(e,t,n)=>e>>>n,Hs=(e,t,n)=>e<<32-n|t>>>n,ot=(e,t,n)=>e>>>n|t<<32-n,st=(e,t,n)=>e<<32-n|t>>>n,ln=(e,t,n)=>e<<64-n|t>>>n-32,dn=(e,t,n)=>e>>>n-32|t<<64-n,Pd=(e,t)=>t,kd=(e,t)=>e,Ld=(e,t,n)=>e<<n|t>>>32-n,Md=(e,t,n)=>t<<n|e>>>32-n,zd=(e,t,n)=>t<<n-32|e>>>64-n,Hd=(e,t,n)=>e<<n-32|t>>>64-n;function $e(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const ti=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),ni=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,jd=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Vd=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,qd=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Kd=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,Yt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Wd(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ke(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ct(e,...t){if(!Wd(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ri(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ke(e.outputLen),Ke(e.blockLen)}function at(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ii(e,t){ct(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function hn(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ce(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function oi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Me(e,t){return e<<32-t|e>>>t}const js=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Vs(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const We=js?e=>e:e=>Vs(e);function Gd(e){for(let t=0;t<e.length;t++)e[t]=Vs(e[t]);return e}const ut=js?e=>e:Gd;function Yd(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Fe(e){return typeof e=="string"&&(e=Yd(e)),ct(e),e}function Zd(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];ct(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class Zn{}function gn(e){const t=r=>e().update(Fe(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Xd(e){const t=(r,i)=>e(i).update(Fe(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function Pt(e=32){if(Yt&&typeof Yt.getRandomValues=="function")return Yt.getRandomValues(new Uint8Array(e));if(Yt&&typeof Yt.randomBytes=="function")return Uint8Array.from(Yt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const Jd=BigInt(0),bn=BigInt(1),Qd=BigInt(2),e0=BigInt(7),t0=BigInt(256),n0=BigInt(113),qs=[],Ks=[],Ws=[];for(let e=0,t=bn,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],qs.push(2*(5*r+n)),Ks.push((e+1)*(e+2)/2%64);let i=Jd;for(let o=0;o<7;o++)t=(t<<bn^(t>>e0)*n0)%t0,t&Qd&&(i^=bn<<(bn<<BigInt(o))-bn);Ws.push(i)}const Gs=Ms(Ws,!0),r0=Gs[0],i0=Gs[1],Ys=(e,t,n)=>n>32?zd(e,t,n):Ld(e,t,n),Zs=(e,t,n)=>n>32?Hd(e,t,n):Md(e,t,n);function o0(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const c=(s+8)%10,a=(s+2)%10,u=n[a],f=n[a+1],l=Ys(u,f,1)^n[c],h=Zs(u,f,1)^n[c+1];for(let p=0;p<50;p+=10)e[s+p]^=l,e[s+p+1]^=h}let i=e[2],o=e[3];for(let s=0;s<24;s++){const c=Ks[s],a=Ys(i,o,c),u=Zs(i,o,c),f=qs[s];i=e[f],o=e[f+1],e[f]=a,e[f+1]=u}for(let s=0;s<50;s+=10){for(let c=0;c<10;c++)n[c]=e[s+c];for(let c=0;c<10;c++)e[s+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=r0[r],e[1]^=i0[r]}Ce(n)}class si extends Zn{constructor(t,n,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,Ke(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=hn(this.state)}clone(){return this._cloneInto()}keccak(){ut(this.state32),o0(this.state32,this.rounds),ut(this.state32),this.posOut=0,this.pos=0}update(t){at(this),t=Fe(t),ct(t);const{blockLen:n,state:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let c=0;c<s;c++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){at(this,!1),ct(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=t.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ke(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ii(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ce(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new si(n,r,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}const s0=(e,t,n)=>gn(()=>new si(t,e,n)),ci=s0(1,136,256/8);function pn(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function ai(e){return pn(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Xs="2.30.6";let ui={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Xs}`};class kt extends Error{constructor(t,n={}){const r=n.cause instanceof kt?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof kt&&n.cause.docsPath||n.docsPath,o=ui.getDocsUrl?.({...n,docsPath:i}),s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...ui.version?[`Version: ${ui.version}`]:[]].join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Xs}walk(t){return Js(this,t)}}function Js(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Js(e.cause,t):t?null:e}class Qs extends kt{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Zt(e,{dir:t,size:n=32}={}){return typeof e=="string"?c0(e,{dir:t,size:n}):a0(e,{dir:t,size:n})}function c0(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Qs({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function a0(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Qs({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const o=t==="right";r[o?i:n-i-1]=e[o?i:e.length-i-1]}return r}class u0 extends kt{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number "${o}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class f0 extends kt{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function Xt(e,{size:t}){if(ai(e)>t)throw new f0({givenSize:ai(e),maxSize:t})}function fi(e,t={}){const{signed:n}=t;t.size&&Xt(e,{size:t.size});const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,o=(1n<<BigInt(i)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function l0(e,t={}){return Number(fi(e,t))}const d0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function li(e,t={}){return typeof e=="number"||typeof e=="bigint"?di(e,t):typeof e=="string"?b0(e,t):typeof e=="boolean"?h0(e,t):ec(e,t)}function h0(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Xt(n,{size:t.size}),Zt(n,{size:t.size})):n}function ec(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=d0[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(Xt(r,{size:t.size}),Zt(r,{dir:"right",size:t.size})):r}function di(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const a=typeof e=="bigint"?"n":"";throw new u0({max:o?`${o}${a}`:void 0,min:`${s}${a}`,signed:n,size:r,value:`${e}${a}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Zt(c,{size:r}):c}const g0=new TextEncoder;function b0(e,t={}){const n=g0.encode(e);return ec(n,t)}const p0=new TextEncoder;function w0(e,t={}){return typeof e=="number"||typeof e=="bigint"?m0(e,t):typeof e=="boolean"?y0(e,t):pn(e)?nc(e,t):rc(e,t)}function y0(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Xt(n,{size:t.size}),Zt(n,{size:t.size})):n}const Ge={zero:48,nine:57,A:65,F:70,a:97,f:102};function tc(e){if(e>=Ge.zero&&e<=Ge.nine)return e-Ge.zero;if(e>=Ge.A&&e<=Ge.F)return e-(Ge.A-10);if(e>=Ge.a&&e<=Ge.f)return e-(Ge.a-10)}function nc(e,t={}){let n=e;t.size&&(Xt(n,{size:t.size}),n=Zt(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,o=new Uint8Array(i);for(let s=0,c=0;s<i;s++){const a=tc(r.charCodeAt(c++)),u=tc(r.charCodeAt(c++));if(a===void 0||u===void 0)throw new kt(`Invalid byte sequence ("${r[c-2]}${r[c-1]}" in "${r}").`);o[s]=a*16+u}return o}function m0(e,t){const n=di(e,t);return nc(n)}function rc(e,t={}){const n=p0.encode(e);return typeof t.size=="number"?(Xt(n,{size:t.size}),Zt(n,{dir:"right",size:t.size})):n}function ic(e,t){const n=t||"hex",r=ci(pn(e,{strict:!1})?w0(e):e);return n==="bytes"?r:li(r)}class oc extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const hi=new oc(8192);function E0(e,t){if(hi.has(`${e}.${t}`))return hi.get(`${e}.${t}`);const n=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),r=ic(rc(n),"bytes"),i=(t?n.substring(`${t}0x`.length):n).split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&i[s]&&(i[s]=i[s].toUpperCase()),(r[s>>1]&15)>=8&&i[s+1]&&(i[s+1]=i[s+1].toUpperCase());const o=`0x${i.join("")}`;return hi.set(`${e}.${t}`,o),o}function x0(e){const t=ic(`0x${e.substring(4)}`).substring(26);return E0(`0x${t}`)}async function v0({hash:e,signature:t}){const n=pn(e)?e:li(e),{secp256k1:r}=await Promise.resolve().then(function(){return Yh});return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:l,yParity:h}=t,p=Number(h??l),d=sc(p);return new r.Signature(fi(u),fi(f)).addRecoveryBit(d)}const s=pn(t)?t:li(t);if(ai(s)!==65)throw new Error("invalid signature length");const c=l0(`0x${s.slice(130)}`),a=sc(c);return r.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(a)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function sc(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function D0({hash:e,signature:t}){return x0(await v0({hash:e,signature:t}))}function A0(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+u,c,r)}function B0(e,t,n){return e&t^~e&n}function S0(e,t,n){return e&t^e&n^t&n}class cc extends Zn{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=oi(this.buffer)}update(t){at(this),t=Fe(t),ct(t);const{view:n,buffer:r,blockLen:i}=this,o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=oi(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){at(this),ii(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,Ce(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let l=s;l<i;l++)n[l]=0;A0(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=oi(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)c.setUint32(4*l,f[l],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=o,t.length=i,t.pos=c,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const ft=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),le=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),de=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),_0=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),lt=new Uint32Array(64);class U0 extends cc{constructor(t=32){super(64,t,8,!1),this.A=ft[0]|0,this.B=ft[1]|0,this.C=ft[2]|0,this.D=ft[3]|0,this.E=ft[4]|0,this.F=ft[5]|0,this.G=ft[6]|0,this.H=ft[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:s,G:c,H:a}=this;return[t,n,r,i,o,s,c,a]}set(t,n,r,i,o,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)lt[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const h=lt[l-15],p=lt[l-2],d=Me(h,7)^Me(h,18)^h>>>3,g=Me(p,17)^Me(p,19)^p>>>10;lt[l]=g+lt[l-7]+d+lt[l-16]|0}let{A:r,B:i,C:o,D:s,E:c,F:a,G:u,H:f}=this;for(let l=0;l<64;l++){const h=Me(c,6)^Me(c,11)^Me(c,25),p=f+h+B0(c,a,u)+_0[l]+lt[l]|0,g=(Me(r,2)^Me(r,13)^Me(r,22))+S0(r,i,o)|0;f=u,u=a,a=c,c=s+p|0,s=o,o=i,i=r,r=p+g|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,i,o,s,c,a,u,f)}roundClean(){Ce(lt)}destroy(){this.set(0,0,0,0,0,0,0,0),Ce(this.buffer)}}const ac=Ms(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),I0=ac[0],O0=ac[1],dt=new Uint32Array(80),ht=new Uint32Array(80);class gi extends cc{constructor(t=64){super(128,t,16,!1),this.Ah=de[0]|0,this.Al=de[1]|0,this.Bh=de[2]|0,this.Bl=de[3]|0,this.Ch=de[4]|0,this.Cl=de[5]|0,this.Dh=de[6]|0,this.Dl=de[7]|0,this.Eh=de[8]|0,this.El=de[9]|0,this.Fh=de[10]|0,this.Fl=de[11]|0,this.Gh=de[12]|0,this.Gl=de[13]|0,this.Hh=de[14]|0,this.Hl=de[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:u,El:f,Fh:l,Fl:h,Gh:p,Gl:d,Hh:g,Hl:E}=this;return[t,n,r,i,o,s,c,a,u,f,l,h,p,d,g,E]}set(t,n,r,i,o,s,c,a,u,f,l,h,p,d,g,E){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=h|0,this.Gh=p|0,this.Gl=d|0,this.Hh=g|0,this.Hl=E|0}process(t,n){for(let w=0;w<16;w++,n+=4)dt[w]=t.getUint32(n),ht[w]=t.getUint32(n+=4);for(let w=16;w<80;w++){const m=dt[w-15]|0,v=ht[w-15]|0,I=ot(m,v,1)^ot(m,v,8)^zs(m,v,7),S=st(m,v,1)^st(m,v,8)^Hs(m,v,7),_=dt[w-2]|0,C=ht[w-2]|0,k=ot(_,C,19)^ln(_,C,61)^zs(_,C,6),N=st(_,C,19)^dn(_,C,61)^Hs(_,C,6),$=jd(S,N,ht[w-7],ht[w-16]),R=Vd($,I,k,dt[w-7],dt[w-16]);dt[w]=R|0,ht[w]=$|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:u,Dl:f,Eh:l,El:h,Fh:p,Fl:d,Gh:g,Gl:E,Hh:B,Hl:O}=this;for(let w=0;w<80;w++){const m=ot(l,h,14)^ot(l,h,18)^ln(l,h,41),v=st(l,h,14)^st(l,h,18)^dn(l,h,41),I=l&p^~l&g,S=h&d^~h&E,_=qd(O,v,S,O0[w],ht[w]),C=Kd(_,B,m,I,I0[w],dt[w]),k=_|0,N=ot(r,i,28)^ln(r,i,34)^ln(r,i,39),$=st(r,i,28)^dn(r,i,34)^dn(r,i,39),R=r&o^r&c^o&c,M=i&s^i&a^s&a;B=g|0,O=E|0,g=p|0,E=d|0,p=l|0,d=h|0,{h:l,l:h}=$e(u|0,f|0,C|0,k|0),u=c|0,f=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const x=ti(k,$,M);r=ni(x,C,N,R),i=x|0}({h:r,l:i}=$e(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=$e(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=$e(this.Ch|0,this.Cl|0,c|0,a|0),{h:u,l:f}=$e(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:h}=$e(this.Eh|0,this.El|0,l|0,h|0),{h:p,l:d}=$e(this.Fh|0,this.Fl|0,p|0,d|0),{h:g,l:E}=$e(this.Gh|0,this.Gl|0,g|0,E|0),{h:B,l:O}=$e(this.Hh|0,this.Hl|0,B|0,O|0),this.set(r,i,o,s,c,a,u,f,l,h,p,d,g,E,B,O)}roundClean(){Ce(dt,ht)}destroy(){Ce(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class C0 extends gi{constructor(){super(48),this.Ah=le[0]|0,this.Al=le[1]|0,this.Bh=le[2]|0,this.Bl=le[3]|0,this.Ch=le[4]|0,this.Cl=le[5]|0,this.Dh=le[6]|0,this.Dl=le[7]|0,this.Eh=le[8]|0,this.El=le[9]|0,this.Fh=le[10]|0,this.Fl=le[11]|0,this.Gh=le[12]|0,this.Gl=le[13]|0,this.Hh=le[14]|0,this.Hl=le[15]|0}}const he=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class T0 extends gi{constructor(){super(32),this.Ah=he[0]|0,this.Al=he[1]|0,this.Bh=he[2]|0,this.Bl=he[3]|0,this.Ch=he[4]|0,this.Cl=he[5]|0,this.Dh=he[6]|0,this.Dl=he[7]|0,this.Eh=he[8]|0,this.El=he[9]|0,this.Fh=he[10]|0,this.Fl=he[11]|0,this.Gh=he[12]|0,this.Gl=he[13]|0,this.Hh=he[14]|0,this.Hl=he[15]|0}}const gt=gn(()=>new U0),N0=gn(()=>new gi),R0=gn(()=>new C0),$0=gn(()=>new T0),Xn=gt;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bi=BigInt(0),pi=BigInt(1);function wn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function bt(e){if(!wn(e))throw new Error("Uint8Array expected")}function yn(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Jn(e){const t=e.toString(16);return t.length&1?"0"+t:t}function uc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?bi:BigInt("0x"+e)}const fc=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",F0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function mn(e){if(bt(e),fc)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=F0[e[n]];return t}const Ye={_0:48,_9:57,A:65,F:70,a:97,f:102};function lc(e){if(e>=Ye._0&&e<=Ye._9)return e-Ye._0;if(e>=Ye.A&&e<=Ye.F)return e-(Ye.A-10);if(e>=Ye.a&&e<=Ye.f)return e-(Ye.a-10)}function Qn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(fc)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=lc(e.charCodeAt(o)),c=lc(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function ze(e){return uc(mn(e))}function er(e){return bt(e),uc(mn(Uint8Array.from(e).reverse()))}function Lt(e,t){return Qn(e.toString(16).padStart(t*2,"0"))}function wi(e,t){return Lt(e,t).reverse()}function re(e,t,n){let r;if(typeof t=="string")try{r=Qn(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(wn(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function Te(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];bt(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}function yi(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const mi=e=>typeof e=="bigint"&&bi<=e;function En(e,t,n){return mi(e)&&mi(t)&&mi(n)&&t<=e&&e<n}function Ze(e,t,n,r){if(!En(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function P0(e){let t;for(t=0;e>bi;e>>=pi,t+=1);return t}const tr=e=>(pi<<BigInt(e))-pi,Ei=e=>new Uint8Array(e),dc=e=>Uint8Array.from(e);function k0(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ei(e),i=Ei(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},c=(...l)=>n(i,r,...l),a=(l=Ei(0))=>{i=c(dc([0]),l),r=c(),l.length!==0&&(i=c(dc([1]),l),r=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const h=[];for(;l<t;){r=c();const p=r.slice();h.push(p),l+=r.length}return Te(...h)};return(l,h)=>{s(),a(l);let p;for(;!(p=h(u()));)a();return s(),p}}const L0={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||wn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Jt(e,t,n={}){const r=(i,o,s)=>{const c=L0[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}function hc(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const M0="0.1.1";function z0(){return M0}class we extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof we){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof we&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${i??""}`,c=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${s}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${z0()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(t){return gc(this,t)}}function gc(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?gc(e.cause,t):t?null:e}function H0(e,t){if(wc(e)>t)throw new Z0({givenSize:wc(e),maxSize:t})}const Xe={zero:48,nine:57,A:65,F:70,a:97,f:102};function bc(e){if(e>=Xe.zero&&e<=Xe.nine)return e-Xe.zero;if(e>=Xe.A&&e<=Xe.F)return e-(Xe.A-10);if(e>=Xe.a&&e<=Xe.f)return e-(Xe.a-10)}function j0(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new X0({size:e.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let o=0;o<r;o++){const s=n==="right";i[s?o:r-o-1]=e[s?o:e.length-o-1]}return i}function xi(e,t){if(Di(e)>t)throw new ih({givenSize:Di(e),maxSize:t})}function pc(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new oh({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const V0=new TextEncoder;function q0(e){return e instanceof Uint8Array?e:typeof e=="string"?W0(e):K0(e)}function K0(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function W0(e,t={}){const{size:n}=t;let r=e;n&&(xi(e,n),r=vi(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const o=i.length/2,s=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const u=bc(i.charCodeAt(a++)),f=bc(i.charCodeAt(a++));if(u===void 0||f===void 0)throw new we(`Invalid byte sequence ("${i[a-2]}${i[a-1]}" in "${i}").`);s[c]=u*16+f}return s}function G0(e,t={}){const{size:n}=t,r=V0.encode(e);return typeof n=="number"?(H0(r,n),Y0(r,n)):r}function Y0(e,t){return j0(e,{dir:"right",size:t})}function wc(e){return e.length}class Z0 extends we{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class X0 extends we{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const J0=new TextEncoder,Q0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function yc(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function eh(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(xi(n,t.size),nr(n,t.size)):n}function mc(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=Q0[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(xi(r,t.size),vi(r,t.size)):r}function th(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const u=typeof e=="bigint"?"n":"";throw new rh({max:o?`${o}${u}`:void 0,min:`${s}${u}`,signed:n,size:r,value:`${e}${u}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?nr(a,r):a}function nh(e,t={}){return mc(J0.encode(e),t)}function nr(e,t){return pc(e,{dir:"left",size:t})}function vi(e,t){return pc(e,{dir:"right",size:t})}function Di(e){return Math.ceil((e.length-2)/2)}class rh extends we{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number \`${o}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class ih extends we{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class oh extends we{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}new oc(128),di(0,{size:32});function sh(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=ci(q0(e));return n==="Bytes"?r:mc(r)}class ch extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Ai={checksum:new ch(8192)}.checksum,ah=/^0x[a-fA-F0-9]{40}$/;function Ec(e,t={}){const{strict:n=!0}=t;if(!ah.test(e))throw new xc({address:e,cause:new fh});if(n){if(e.toLowerCase()===e)return;if(uh(e)!==e)throw new xc({address:e,cause:new lh})}}function uh(e){if(Ai.has(e))return Ai.get(e);Ec(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=sh(G0(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const i=`0x${r.join("")}`;return Ai.set(e,i),i}class xc extends we{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class fh extends we{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class lh extends we{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const dh=/^(.*)\[([0-9]*)\]$/,hh=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,gh=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Bi(e,t){if(e.length!==t.length)throw new ph({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r];n.push(Bi.encode(i,o))}return yc(...n)}(function(e){function t(n,r,i=!1){if(n==="address"){const a=r;return Ec(a),nr(a.toLowerCase(),i?32:0)}if(n==="string")return nh(r);if(n==="bytes")return r;if(n==="bool")return nr(eh(r),i?32:1);const o=n.match(gh);if(o){const[a,u,f="256"]=o,l=Number.parseInt(f)/8;return th(r,{size:i?32:l,signed:u==="int"})}const s=n.match(hh);if(s){const[a,u]=s;if(Number.parseInt(u)!==(r.length-2)/2)throw new bh({expectedSize:Number.parseInt(u),value:r});return vi(r,i?32:0)}const c=n.match(dh);if(c&&Array.isArray(r)){const[a,u]=c,f=[];for(let l=0;l<r.length;l++)f.push(t(u,r[l],!0));return f.length===0?"0x":yc(...f)}throw new wh(n)}e.encode=t})(Bi||(Bi={}));class bh extends we{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Di(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class ph extends we{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class wh extends we{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class vc extends Zn{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ri(t);const r=Fe(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),Ce(o)}update(t){return at(this),this.iHash.update(t),this}digestInto(t){at(this),ct(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const rr=(e,t,n)=>new vc(e,t).update(n).digest();rr.create=(e,t)=>new vc(e,t);const xe=BigInt(0),ye=BigInt(1),Mt=BigInt(2),yh=BigInt(3),Dc=BigInt(4),Ac=BigInt(5),Bc=BigInt(8);function ne(e,t){const n=e%t;return n>=xe?n:t+n}function Q(e,t,n){let r=e;for(;t-- >xe;)r*=r,r%=n;return r}function Si(e,t){if(e===xe)throw new Error("invert: expected non-zero number");if(t<=xe)throw new Error("invert: expected positive modulus, got "+t);let n=ne(e,t),r=t,i=xe,o=ye;for(;n!==xe;){const c=r/n,a=r%n,u=i-o*c;r=n,n=a,i=o,o=u}if(r!==ye)throw new Error("invert: does not exist");return ne(i,t)}function Sc(e,t){const n=(e.ORDER+ye)/Dc,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function mh(e,t){const n=(e.ORDER-Ac)/Bc,r=e.mul(t,Mt),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,Mt),i),c=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function Eh(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-ye,n=0;for(;t%Mt===xe;)t/=Mt,n++;let r=Mt;const i=Qt(e);for(;Uc(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Sc;let o=i.pow(r,t);const s=(t+ye)/Mt;return function(a,u){if(a.is0(u))return u;if(Uc(a,u)!==1)throw new Error("Cannot find square root");let f=n,l=a.mul(a.ONE,o),h=a.pow(u,t),p=a.pow(u,s);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let d=1,g=a.sqr(h);for(;!a.eql(g,a.ONE);)if(d++,g=a.sqr(g),d===f)throw new Error("Cannot find square root");const E=ye<<BigInt(f-d-1),B=a.pow(l,E);f=d,l=a.sqr(B),h=a.mul(h,l),p=a.mul(p,B)}return p}}function xh(e){return e%Dc===yh?Sc:e%Bc===Ac?mh:Eh(e)}const vh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _c(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=vh.reduce((r,i)=>(r[i]="function",r),t);return Jt(e,n)}function Dh(e,t,n){if(n<xe)throw new Error("invalid exponent, negatives unsupported");if(n===xe)return e.ONE;if(n===ye)return t;let r=e.ONE,i=t;for(;n>xe;)n&ye&&(r=e.mul(r,i)),i=e.sqr(i),n>>=ye;return r}function ir(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function Uc(e,t){const n=(e.ORDER-ye)/Mt,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Ic(e,t){t!==void 0&&Ke(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Qt(e,t,n=!1,r={}){if(e<=xe)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=Ic(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:tr(i),ZERO:xe,ONE:ye,create:a=>ne(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return xe<=a&&a<e},is0:a=>a===xe,isOdd:a=>(a&ye)===ye,neg:a=>ne(-a,e),eql:(a,u)=>a===u,sqr:a=>ne(a*a,e),add:(a,u)=>ne(a+u,e),sub:(a,u)=>ne(a-u,e),mul:(a,u)=>ne(a*u,e),pow:(a,u)=>Dh(c,a,u),div:(a,u)=>ne(a*Si(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>Si(a,e),sqrt:r.sqrt||(a=>(s||(s=xh(e)),s(c,a))),toBytes:a=>n?wi(a,o):Lt(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?er(a):ze(a)},invertBatch:a=>ir(c,a),cmov:(a,u,f)=>f?u:a});return Object.freeze(c)}function Oc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Cc(e){const t=Oc(e);return t+Math.ceil(t/2)}function Ah(e,t,n=!1){const r=e.length,i=Oc(t),o=Cc(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?er(e):ze(e),c=ne(s,t-ye)+ye;return n?wi(c,i):Lt(c,i)}const Tc=BigInt(0),_i=BigInt(1);function Ui(e,t){const n=t.negate();return e?n:t}function Nc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Ii(e,t){Nc(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=tr(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function Rc(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=_i);const u=t*r,f=u+Math.abs(c)-1,l=c===0,h=c<0,p=t%2!==0;return{nextN:a,offset:f,isZero:l,isNeg:h,isNegF:p,offsetF:u}}function Bh(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Sh(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Oi=new WeakMap,$c=new WeakMap;function Ci(e){return $c.get(e)||1}function _h(e,t){return{constTimeNegate:Ui,hasPrecomputes(n){return Ci(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>Tc;)r&_i&&(i=i.add(o)),o=o.double(),r>>=_i;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=Ii(r,t),s=[];let c=n,a=c;for(let u=0;u<i;u++){a=c,s.push(a);for(let f=1;f<o;f++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){let o=e.ZERO,s=e.BASE;const c=Ii(n,t);for(let a=0;a<c.windows;a++){const{nextN:u,offset:f,isZero:l,isNeg:h,isNegF:p,offsetF:d}=Rc(i,a,c);i=u,l?s=s.add(Ui(p,r[d])):o=o.add(Ui(h,r[f]))}return{p:o,f:s}},wNAFUnsafe(n,r,i,o=e.ZERO){const s=Ii(n,t);for(let c=0;c<s.windows&&i!==Tc;c++){const{nextN:a,offset:u,isZero:f,isNeg:l}=Rc(i,c,s);if(i=a,!f){const h=r[u];o=o.add(l?h.negate():h)}}return o},getPrecomputes(n,r,i){let o=Oi.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Oi.set(r,i(o))),o},wNAFCached(n,r,i){const o=Ci(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=Ci(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){Nc(r,t),$c.set(n,r),Oi.delete(n)}}}function Uh(e,t,n,r){Bh(n,e),Sh(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=P0(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const u=tr(a),f=new Array(Number(u)+1).fill(s),l=Math.floor((t.BITS-1)/a)*a;let h=s;for(let p=l;p>=0;p-=a){f.fill(s);for(let g=0;g<o;g++){const E=r[g],B=Number(E>>BigInt(p)&u);f[B]=f[B].add(n[g])}let d=s;for(let g=f.length-1,E=s;g>0;g--)E=E.add(f[g]),d=d.add(E);if(h=h.add(d),p!==0)for(let g=0;g<a;g++)h=h.double()}return h}function Fc(e){return _c(e.Fp),Jt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ic(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Pc(e){e.lowS!==void 0&&yn("lowS",e.lowS),e.prehash!==void 0&&yn("prehash",e.prehash)}function Ih(e){const t=Fc(e);Jt(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class Oh extends Error{constructor(t=""){super(t)}}const Je={Err:Oh,_tlv:{encode:(e,t)=>{const{Err:n}=Je;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Jn(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?Jn(i.length/2|128):"";return Jn(e)+o+i+t},decode(e,t){const{Err:n}=Je;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+a);if(u.length!==a)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)s=s<<8|f;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=Je;if(e<Pe)throw new t("integer: negative integers are not allowed");let n=Jn(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Je;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return ze(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Je,i=re("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:u,l:f}=r.decode(2,a);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Je,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}};function Ti(e,t){return mn(Lt(e,t))}const Pe=BigInt(0),Z=BigInt(1),pt=BigInt(2),xn=BigInt(3),Ni=BigInt(4);function Ch(e){const t=Ih(e),{Fp:n}=t,r=Qt(t.n,t.nBitLength),i=t.toBytes||((w,m,v)=>{const I=m.toAffine();return Te(Uint8Array.from([4]),n.toBytes(I.x),n.toBytes(I.y))}),o=t.fromBytes||(w=>{const m=w.subarray(1),v=n.fromBytes(m.subarray(0,n.BYTES)),I=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:v,y:I}});function s(w){const{a:m,b:v}=t,I=n.sqr(w),S=n.mul(I,w);return n.add(n.add(S,n.mul(w,m)),v)}function c(w,m){const v=n.sqr(m),I=s(w);return n.eql(v,I)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,xn),Ni),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,u)))throw new Error("bad curve params: a or b");function f(w){return En(w,Z,t.n)}function l(w){const{allowedPrivateKeyLengths:m,nByteLength:v,wrapPrivateKey:I,n:S}=t;if(m&&typeof w!="bigint"){if(wn(w)&&(w=mn(w)),typeof w!="string"||!m.includes(w.length))throw new Error("invalid private key");w=w.padStart(v*2,"0")}let _;try{_=typeof w=="bigint"?w:ze(re("private key",w,v))}catch{throw new Error("invalid private key, expected hex or "+v+" bytes, got "+typeof w)}return I&&(_=ne(_,S)),Ze("private key",_,Z,S),_}function h(w){if(!(w instanceof g))throw new Error("ProjectivePoint expected")}const p=hc((w,m)=>{const{px:v,py:I,pz:S}=w;if(n.eql(S,n.ONE))return{x:v,y:I};const _=w.is0();m==null&&(m=_?n.ONE:n.inv(S));const C=n.mul(v,m),k=n.mul(I,m),N=n.mul(S,m);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:C,y:k}}),d=hc(w=>{if(w.is0()){if(t.allowInfinityPoint&&!n.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:m,y:v}=w.toAffine();if(!n.isValid(m)||!n.isValid(v))throw new Error("bad point: x or y not FE");if(!c(m,v))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(m,v,I){if(m==null||!n.isValid(m))throw new Error("x required");if(v==null||!n.isValid(v)||n.is0(v))throw new Error("y required");if(I==null||!n.isValid(I))throw new Error("z required");this.px=m,this.py=v,this.pz=I,Object.freeze(this)}static fromAffine(m){const{x:v,y:I}=m||{};if(!m||!n.isValid(v)||!n.isValid(I))throw new Error("invalid affine point");if(m instanceof g)throw new Error("projective point not allowed");const S=_=>n.eql(_,n.ZERO);return S(v)&&S(I)?g.ZERO:new g(v,I,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const v=ir(n,m.map(I=>I.pz));return m.map((I,S)=>I.toAffine(v[S])).map(g.fromAffine)}static fromHex(m){const v=g.fromAffine(o(re("pointHex",m)));return v.assertValidity(),v}static fromPrivateKey(m){return g.BASE.multiply(l(m))}static msm(m,v){return Uh(g,r,m,v)}_setWindowSize(m){O.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){h(m);const{px:v,py:I,pz:S}=this,{px:_,py:C,pz:k}=m,N=n.eql(n.mul(v,k),n.mul(_,S)),$=n.eql(n.mul(I,k),n.mul(C,S));return N&&$}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:v}=t,I=n.mul(v,xn),{px:S,py:_,pz:C}=this;let k=n.ZERO,N=n.ZERO,$=n.ZERO,R=n.mul(S,S),M=n.mul(_,_),x=n.mul(C,C),y=n.mul(S,_);return y=n.add(y,y),$=n.mul(S,C),$=n.add($,$),k=n.mul(m,$),N=n.mul(I,x),N=n.add(k,N),k=n.sub(M,N),N=n.add(M,N),N=n.mul(k,N),k=n.mul(y,k),$=n.mul(I,$),x=n.mul(m,x),y=n.sub(R,x),y=n.mul(m,y),y=n.add(y,$),$=n.add(R,R),R=n.add($,R),R=n.add(R,x),R=n.mul(R,y),N=n.add(N,R),x=n.mul(_,C),x=n.add(x,x),R=n.mul(x,y),k=n.sub(k,R),$=n.mul(x,M),$=n.add($,$),$=n.add($,$),new g(k,N,$)}add(m){h(m);const{px:v,py:I,pz:S}=this,{px:_,py:C,pz:k}=m;let N=n.ZERO,$=n.ZERO,R=n.ZERO;const M=t.a,x=n.mul(t.b,xn);let y=n.mul(v,_),A=n.mul(I,C),U=n.mul(S,k),D=n.add(v,I),T=n.add(_,C);D=n.mul(D,T),T=n.add(y,A),D=n.sub(D,T),T=n.add(v,S);let F=n.add(_,k);return T=n.mul(T,F),F=n.add(y,U),T=n.sub(T,F),F=n.add(I,S),N=n.add(C,k),F=n.mul(F,N),N=n.add(A,U),F=n.sub(F,N),R=n.mul(M,T),N=n.mul(x,U),R=n.add(N,R),N=n.sub(A,R),R=n.add(A,R),$=n.mul(N,R),A=n.add(y,y),A=n.add(A,y),U=n.mul(M,U),T=n.mul(x,T),A=n.add(A,U),U=n.sub(y,U),U=n.mul(M,U),T=n.add(T,U),y=n.mul(A,T),$=n.add($,y),y=n.mul(F,T),N=n.mul(D,N),N=n.sub(N,y),y=n.mul(D,A),R=n.mul(F,R),R=n.add(R,y),new g(N,$,R)}subtract(m){return this.add(m.negate())}is0(){return this.equals(g.ZERO)}wNAF(m){return O.wNAFCached(this,m,g.normalizeZ)}multiplyUnsafe(m){const{endo:v,n:I}=t;Ze("scalar",m,Pe,I);const S=g.ZERO;if(m===Pe)return S;if(this.is0()||m===Z)return this;if(!v||O.hasPrecomputes(this))return O.wNAFCachedUnsafe(this,m,g.normalizeZ);let{k1neg:_,k1:C,k2neg:k,k2:N}=v.splitScalar(m),$=S,R=S,M=this;for(;C>Pe||N>Pe;)C&Z&&($=$.add(M)),N&Z&&(R=R.add(M)),M=M.double(),C>>=Z,N>>=Z;return _&&($=$.negate()),k&&(R=R.negate()),R=new g(n.mul(R.px,v.beta),R.py,R.pz),$.add(R)}multiply(m){const{endo:v,n:I}=t;Ze("scalar",m,Z,I);let S,_;if(v){const{k1neg:C,k1:k,k2neg:N,k2:$}=v.splitScalar(m);let{p:R,f:M}=this.wNAF(k),{p:x,f:y}=this.wNAF($);R=O.constTimeNegate(C,R),x=O.constTimeNegate(N,x),x=new g(n.mul(x.px,v.beta),x.py,x.pz),S=R.add(x),_=M.add(y)}else{const{p:C,f:k}=this.wNAF(m);S=C,_=k}return g.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(m,v,I){const S=g.BASE,_=(k,N)=>N===Pe||N===Z||!k.equals(S)?k.multiplyUnsafe(N):k.multiply(N),C=_(this,v).add(_(m,I));return C.is0()?void 0:C}toAffine(m){return p(this,m)}isTorsionFree(){const{h:m,isTorsionFree:v}=t;if(m===Z)return!0;if(v)return v(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:v}=t;return m===Z?this:v?v(g,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return yn("isCompressed",m),this.assertValidity(),i(g,this,m)}toHex(m=!0){return yn("isCompressed",m),mn(this.toRawBytes(m))}}g.BASE=new g(t.Gx,t.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:E,nBitLength:B}=t,O=_h(g,E?Math.ceil(B/2):B);return{CURVE:t,ProjectivePoint:g,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:f}}function Th(e){const t=Fc(e);return Jt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Nh(e){const t=Th(e),{Fp:n,n:r,nByteLength:i,nBitLength:o}=t,s=n.BYTES+1,c=2*n.BYTES+1;function a(x){return ne(x,r)}function u(x){return Si(x,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:h,isWithinCurveOrder:p}=Ch({...t,toBytes(x,y,A){const U=y.toAffine(),D=n.toBytes(U.x),T=Te;return yn("isCompressed",A),A?T(Uint8Array.from([y.hasEvenY()?2:3]),D):T(Uint8Array.from([4]),D,n.toBytes(U.y))},fromBytes(x){const y=x.length,A=x[0],U=x.subarray(1);if(y===s&&(A===2||A===3)){const D=ze(U);if(!En(D,Z,n.ORDER))throw new Error("Point is not on curve");const T=h(D);let F;try{F=n.sqrt(T)}catch(H){const V=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+V)}const L=(F&Z)===Z;return(A&1)===1!==L&&(F=n.neg(F)),{x:D,y:F}}else if(y===c&&A===4){const D=n.fromBytes(U.subarray(0,n.BYTES)),T=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:D,y:T}}else{const D=s,T=c;throw new Error("invalid Point, expected length of "+D+", or uncompressed "+T+", got "+y)}}});function d(x){const y=r>>Z;return x>y}function g(x){return d(x)?a(-x):x}const E=(x,y,A)=>ze(x.slice(y,A));class B{constructor(y,A,U){Ze("r",y,Z,r),Ze("s",A,Z,r),this.r=y,this.s=A,U!=null&&(this.recovery=U),Object.freeze(this)}static fromCompact(y){const A=i;return y=re("compactSignature",y,A*2),new B(E(y,0,A),E(y,A,2*A))}static fromDER(y){const{r:A,s:U}=Je.toSig(re("DER",y));return new B(A,U)}assertValidity(){}addRecoveryBit(y){return new B(this.r,this.s,y)}recoverPublicKey(y){const{r:A,s:U,recovery:D}=this,T=S(re("msgHash",y));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const F=D===2||D===3?A+t.n:A;if(F>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(D&1)===0?"02":"03",z=f.fromHex(L+Ti(F,n.BYTES)),H=u(F),V=a(-T*H),G=a(U*H),X=f.BASE.multiplyAndAddUnsafe(z,V,G);if(!X)throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Qn(this.toDERHex())}toDERHex(){return Je.hexFromSig(this)}toCompactRawBytes(){return Qn(this.toCompactHex())}toCompactHex(){const y=i;return Ti(this.r,y)+Ti(this.s,y)}}const O={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=Cc(t.n);return Ah(t.randomBytes(x),t.n)},precompute(x=8,y=f.BASE){return y._setWindowSize(x),y.multiply(BigInt(3)),y}};function w(x,y=!0){return f.fromPrivateKey(x).toRawBytes(y)}function m(x){if(typeof x=="bigint")return!1;if(x instanceof f)return!0;const A=re("key",x).length,U=n.BYTES,D=U+1,T=2*U+1;if(!(t.allowedPrivateKeyLengths||i===D))return A===D||A===T}function v(x,y,A=!0){if(m(x)===!0)throw new Error("first arg must be private key");if(m(y)===!1)throw new Error("second arg must be public key");return f.fromHex(y).multiply(l(x)).toRawBytes(A)}const I=t.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const y=ze(x),A=x.length*8-o;return A>0?y>>BigInt(A):y},S=t.bits2int_modN||function(x){return a(I(x))},_=tr(o);function C(x){return Ze("num < 2^"+o,x,Pe,_),Lt(x,i)}function k(x,y,A=N){if(["recovered","canonical"].some(Y=>Y in A))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:D}=t;let{lowS:T,prehash:F,extraEntropy:L}=A;T==null&&(T=!0),x=re("msgHash",x),Pc(A),F&&(x=re("prehashed msgHash",U(x)));const z=S(x),H=l(y),V=[C(H),C(z)];if(L!=null&&L!==!1){const Y=L===!0?D(n.BYTES):L;V.push(re("extraEntropy",Y))}const G=Te(...V),X=z;function ee(Y){const Ee=I(Y);if(!p(Ee))return;const Le=u(Ee),Ve=f.BASE.multiply(Ee).toAffine(),qe=a(Ve.x);if(qe===Pe)return;const Ot=a(Le*a(X+qe*H));if(Ot===Pe)return;let Ct=(Ve.x===qe?0:2)|Number(Ve.y&Z),Fr=Ot;return T&&d(Ot)&&(Fr=g(Ot),Ct^=1),new B(qe,Fr,Ct)}return{seed:G,k2sig:ee}}const N={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function R(x,y,A=N){const{seed:U,k2sig:D}=k(x,y,A),T=t;return k0(T.hash.outputLen,T.nByteLength,T.hmac)(U,D)}f.BASE._setWindowSize(8);function M(x,y,A,U=$){const D=x;y=re("msgHash",y),A=re("publicKey",A);const{lowS:T,prehash:F,format:L}=U;if(Pc(U),"strict"in U)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const z=typeof D=="string"||wn(D),H=!z&&!L&&typeof D=="object"&&D!==null&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!z&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,G;try{if(H&&(V=new B(D.r,D.s)),z){try{L!=="compact"&&(V=B.fromDER(D))}catch(Ct){if(!(Ct instanceof Je.Err))throw Ct}!V&&L!=="der"&&(V=B.fromCompact(D))}G=f.fromHex(A)}catch{return!1}if(!V||T&&V.hasHighS())return!1;F&&(y=t.hash(y));const{r:X,s:ee}=V,Y=S(y),Ee=u(ee),Le=a(Y*Ee),Ve=a(X*Ee),qe=f.BASE.multiplyAndAddUnsafe(G,Le,Ve)?.toAffine();return qe?a(qe.x)===X:!1}return{CURVE:t,getPublicKey:w,getSharedSecret:v,sign:R,verify:M,ProjectivePoint:f,Signature:B,utils:O}}function Rh(e,t){const n=e.ORDER;let r=Pe;for(let d=n-Z;d%pt===Pe;d/=pt)r+=Z;const i=r,o=pt<<i-Z-Z,s=o*pt,c=(n-Z)/s,a=(c-Z)/pt,u=s-Z,f=o,l=e.pow(t,c),h=e.pow(t,(c+Z)/pt);let p=(d,g)=>{let E=l,B=e.pow(g,u),O=e.sqr(B);O=e.mul(O,g);let w=e.mul(d,O);w=e.pow(w,a),w=e.mul(w,B),B=e.mul(w,g),O=e.mul(w,d);let m=e.mul(O,B);w=e.pow(m,f);let v=e.eql(w,e.ONE);B=e.mul(O,h),w=e.mul(m,E),O=e.cmov(B,O,v),m=e.cmov(w,m,v);for(let I=i;I>Z;I--){let S=I-pt;S=pt<<S-Z;let _=e.pow(m,S);const C=e.eql(_,e.ONE);B=e.mul(O,E),E=e.mul(E,E),_=e.mul(m,E),O=e.cmov(B,O,C),m=e.cmov(_,m,C)}return{isValid:v,value:O}};if(e.ORDER%Ni===xn){const d=(e.ORDER-xn)/Ni,g=e.sqrt(e.neg(t));p=(E,B)=>{let O=e.sqr(B);const w=e.mul(E,B);O=e.mul(O,w);let m=e.pow(O,d);m=e.mul(m,w);const v=e.mul(m,g),I=e.mul(e.sqr(m),B),S=e.eql(I,E);let _=e.cmov(v,m,S);return{isValid:S,value:_}}}return p}function $h(e,t){if(_c(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=Rh(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,o,s,c,a,u,f,l;i=e.sqr(r),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),c=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),c=e.mul(c,t.A),o=e.sqr(s),u=e.sqr(c),a=e.mul(u,t.A),o=e.add(o,a),o=e.mul(o,s),u=e.mul(u,c),a=e.mul(u,t.B),o=e.add(o,a),f=e.mul(i,s);const{isValid:h,value:p}=n(o,u);l=e.mul(i,r),l=e.mul(l,p),f=e.cmov(f,s,h),l=e.cmov(l,p,h);const d=e.isOdd(r)===e.isOdd(l);l=e.cmov(e.neg(l),l,d);const g=ir(e,[c],!0)[0];return f=e.mul(f,g),{x:f,y:l}}}function Fh(e){return{hash:e,hmac:(t,...n)=>rr(e,t,Zd(...n)),randomBytes:Pt}}function or(e,t){const n=r=>Nh({...e,...Fh(r)});return{...n(t),create:n}}const Ph=ze;function wt(e,t){if(vn(e),vn(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function kh(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function vn(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Lh(e,t,n,r){bt(e),bt(t),vn(n),t.length>255&&(t=r(Te(yi("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=r,s=Math.ceil(n/i);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const c=Te(t,wt(t.length,1)),a=wt(0,o),u=wt(n,2),f=new Array(s),l=r(Te(a,e,u,wt(0,1),c));f[0]=r(Te(l,wt(1,1),c));for(let p=1;p<=s;p++){const d=[kh(l,f[p-1]),wt(p+1,1),c];f[p]=r(Te(...d))}return Te(...f).slice(0,n)}function Mh(e,t,n,r,i){if(bt(e),bt(t),vn(n),t.length>255){const o=Math.ceil(2*r/8);t=i.create({dkLen:o}).update(yi("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(wt(n,2)).update(t).update(wt(t.length,1)).digest()}function kc(e,t,n){Jt(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:o,hash:s,expand:c,DST:a}=n;bt(e),vn(t);const u=typeof a=="string"?yi(a):a,f=r.toString(2).length,l=Math.ceil((f+i)/8),h=t*o*l;let p;if(c==="xmd")p=Lh(e,u,h,s);else if(c==="xof")p=Mh(e,u,h,i,s);else if(c==="_internal_pass")p=e;else throw new Error('expand must be "xmd" or "xof"');const d=new Array(t);for(let g=0;g<t;g++){const E=new Array(o);for(let B=0;B<o;B++){const O=l*(B+g*o),w=p.subarray(O,O+l);E[B]=ne(Ph(w),r)}d[g]=E}return d}function zh(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[o,s,c,a]=n.map(l=>l.reduce((h,p)=>e.add(e.mul(h,r),p))),[u,f]=ir(e,[s,a],!0);return r=e.mul(o,u),i=e.mul(i,e.mul(c,f)),{x:r,y:i}}}function Hh(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(o){return e.fromAffine(t(o))}function i(o){const s=o.clearCofactor();return s.equals(e.ZERO)?e.ZERO:(s.assertValidity(),s)}return{defaults:n,hashToCurve(o,s){const c=kc(o,2,{...n,DST:n.DST,...s}),a=r(c[0]),u=r(c[1]);return i(a.add(u))},encodeToCurve(o,s){const c=kc(o,1,{...n,DST:n.encodeDST,...s});return i(r(c[0]))},mapToCurve(o){if(!Array.isArray(o))throw new Error("expected array of bigints");for(const s of o)if(typeof s!="bigint")throw new Error("expected array of bigints");return i(r(o))}}}const Dn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ri=BigInt(0),An=BigInt(1),cr=BigInt(2),Lc=(e,t)=>(e+t/cr)/t;function Mc(e){const t=Dn,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),u=e*e*e%t,f=u*u*e%t,l=Q(f,n,t)*f%t,h=Q(l,n,t)*f%t,p=Q(h,cr,t)*u%t,d=Q(p,i,t)*p%t,g=Q(d,o,t)*d%t,E=Q(g,c,t)*g%t,B=Q(E,a,t)*E%t,O=Q(B,c,t)*g%t,w=Q(O,n,t)*f%t,m=Q(w,s,t)*d%t,v=Q(m,r,t)*u%t,I=Q(v,cr,t);if(!yt.eql(yt.sqr(I),e))throw new Error("Cannot find square root");return I}const yt=Qt(Dn,void 0,void 0,{sqrt:Mc}),Bn=or({a:Ri,b:BigInt(7),Fp:yt,n:sr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=sr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-An*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),c=Lc(o*e,t),a=Lc(-r*e,t);let u=ne(e-c*n-a*i,t),f=ne(-c*r-a*o,t);const l=u>s,h=f>s;if(l&&(u=t-u),h&&(f=t-f),u>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:h,k2:f}}}},gt),zc={};function ar(e,...t){let n=zc[e];if(n===void 0){const r=gt(Uint8Array.from(e,i=>i.charCodeAt(0)));n=Te(r,r),zc[e]=n}return gt(Te(n,...t))}const $i=e=>e.toRawBytes(!0).slice(1),Fi=e=>Lt(e,32),Pi=e=>ne(e,Dn),Sn=e=>ne(e,sr),ki=Bn.ProjectivePoint,jh=(e,t,n)=>ki.BASE.multiplyAndAddUnsafe(e,t,n);function Li(e){let t=Bn.utils.normPrivateKeyToScalar(e),n=ki.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Sn(-t),bytes:$i(n)}}function Hc(e){Ze("x",e,An,Dn);const t=Pi(e*e),n=Pi(t*e+BigInt(7));let r=Mc(n);r%cr!==Ri&&(r=Pi(-r));const i=new ki(e,r,An);return i.assertValidity(),i}const en=ze;function jc(...e){return Sn(en(ar("BIP0340/challenge",...e)))}function Vh(e){return Li(e).bytes}function qh(e,t,n=Pt(32)){const r=re("message",e),{bytes:i,scalar:o}=Li(t),s=re("auxRand",n,32),c=Fi(o^en(ar("BIP0340/aux",s))),a=ar("BIP0340/nonce",c,i,r),u=Sn(en(a));if(u===Ri)throw new Error("sign failed: k is zero");const{bytes:f,scalar:l}=Li(u),h=jc(f,i,r),p=new Uint8Array(64);if(p.set(f,0),p.set(Fi(Sn(l+h*o)),32),!Vc(p,r,i))throw new Error("sign: Invalid signature produced");return p}function Vc(e,t,n){const r=re("signature",e,64),i=re("message",t),o=re("publicKey",n,32);try{const s=Hc(en(o)),c=en(r.subarray(0,32));if(!En(c,An,Dn))return!1;const a=en(r.subarray(32,64));if(!En(a,An,sr))return!1;const u=jc(Fi(c),$i(s),i),f=jh(s,a,Sn(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==c)}catch{return!1}}const Kh={getPublicKey:Vh,sign:qh,verify:Vc,utils:{randomPrivateKey:Bn.utils.randomPrivateKey,lift_x:Hc,pointToBytes:$i,numberToBytesBE:Lt,bytesToNumberBE:ze,taggedHash:ar,mod:ne}},Wh=zh(yt,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),Gh=$h(yt,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:yt.create(BigInt("-11"))}),Mi=Hh(Bn.ProjectivePoint,e=>{const{x:t,y:n}=Gh(yt.create(e[0]));return Wh(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:yt.ORDER,m:1,k:128,expand:"xmd",hash:gt});var Yh=Object.freeze({__proto__:null,secp256k1:Bn,schnorr:Kh,secp256k1_hasher:Mi,hashToCurve:Mi.hashToCurve,encodeToCurve:Mi.encodeToCurve});function Zh(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let u=0;u<t.length;u++)t[u]=255;for(let u=0;u<e.length;u++){const f=e.charAt(u),l=f.charCodeAt(0);if(t[l]!==255)throw new TypeError(f+" is ambiguous");t[l]=u}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function s(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let f=0,l=0,h=0;const p=u.length;for(;h!==p&&u[h]===0;)h++,f++;const d=(p-h)*o+1>>>0,g=new Uint8Array(d);for(;h!==p;){let O=u[h],w=0;for(let m=d-1;(O!==0||w<l)&&m!==-1;m--,w++)O+=256*g[m]>>>0,g[m]=O%n>>>0,O=O/n>>>0;if(O!==0)throw new Error("Non-zero carry");l=w,h++}let E=d-l;for(;E!==d&&g[E]===0;)E++;let B=r.repeat(f);for(;E<d;++E)B+=e.charAt(g[E]);return B}function c(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let f=0,l=0,h=0;for(;u[f]===r;)l++,f++;const p=(u.length-f)*i+1>>>0,d=new Uint8Array(p);for(;f<u.length;){const O=u.charCodeAt(f);if(O>255)return;let w=t[O];if(w===255)return;let m=0;for(let v=p-1;(w!==0||m<h)&&v!==-1;v--,m++)w+=n*d[v]>>>0,d[v]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");h=m,f++}let g=p-h;for(;g!==p&&d[g]===0;)g++;const E=new Uint8Array(l+(p-g));let B=l;for(;g!==p;)E[B++]=d[g++];return E}function a(u){const f=c(u);if(f)return f;throw new Error("Non-base"+n+" character")}return{encode:s,decodeUnsafe:c,decode:a}}var Xh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",_n=Zh(Xh);const Jh=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),ie=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),P=new Uint32Array(32);function mt(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=P[2*e],u=P[2*e+1],f=P[2*t],l=P[2*t+1],h=P[2*n],p=P[2*n+1],d=P[2*r],g=P[2*r+1],E=ti(a,f,s);u=ni(E,u,l,c),a=E|0,{Dh:g,Dl:d}={Dh:g^u,Dl:d^a},{Dh:g,Dl:d}={Dh:Pd(g,d),Dl:kd(g)},{h:p,l:h}=$e(p,h,g,d),{Bh:l,Bl:f}={Bh:l^p,Bl:f^h},{Bh:l,Bl:f}={Bh:ot(l,f,24),Bl:st(l,f,24)},P[2*e]=a,P[2*e+1]=u,P[2*t]=f,P[2*t+1]=l,P[2*n]=h,P[2*n+1]=p,P[2*r]=d,P[2*r+1]=g}function Et(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=P[2*e],u=P[2*e+1],f=P[2*t],l=P[2*t+1],h=P[2*n],p=P[2*n+1],d=P[2*r],g=P[2*r+1],E=ti(a,f,s);u=ni(E,u,l,c),a=E|0,{Dh:g,Dl:d}={Dh:g^u,Dl:d^a},{Dh:g,Dl:d}={Dh:ot(g,d,16),Dl:st(g,d,16)},{h:p,l:h}=$e(p,h,g,d),{Bh:l,Bl:f}={Bh:l^p,Bl:f^h},{Bh:l,Bl:f}={Bh:ln(l,f,63),Bl:dn(l,f,63)},P[2*e]=a,P[2*e+1]=u,P[2*t]=f,P[2*t+1]=l,P[2*n]=h,P[2*n+1]=p,P[2*r]=d,P[2*r+1]=g}function Qh(e,t={},n,r,i){if(Ke(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:o,salt:s,personalization:c}=t;if(o!==void 0&&(o.length<1||o.length>n))throw new Error("key length must be undefined or 1.."+n);if(s!==void 0&&s.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}class e1 extends Zn{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ke(t),Ke(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=hn(this.buffer)}update(t){at(this),t=Fe(t),ct(t);const{blockLen:n,buffer:r,buffer32:i}=this,o=t.length,s=t.byteOffset,c=t.buffer;for(let a=0;a<o;){this.pos===n&&(ut(i),this.compress(i,0,!1),ut(i),this.pos=0);const u=Math.min(n-this.pos,o-a),f=s+a;if(u===n&&!(f%4)&&a+u<o){const l=new Uint32Array(c,f,Math.floor((o-a)/4));ut(l);for(let h=0;a+n<o;h+=i.length,a+=n)this.length+=n,this.compress(l,h,!1);ut(l);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,this.length+=u,a+=u}return this}digestInto(t){at(this),ii(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,Ce(this.buffer.subarray(n)),ut(r),this.compress(r,0,!0),ut(r);const i=hn(t);this.get().forEach((o,s)=>i[s]=We(o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:o,outputLen:s,pos:c}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.buffer.set(n),t.destroyed=o,t.finished=i,t.length=r,t.pos=c,t.outputLen=s,t}clone(){return this._cloneInto()}}class t1 extends e1{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=ie[0]|0,this.v0h=ie[1]|0,this.v1l=ie[2]|0,this.v1h=ie[3]|0,this.v2l=ie[4]|0,this.v2h=ie[5]|0,this.v3l=ie[6]|0,this.v3h=ie[7]|0,this.v4l=ie[8]|0,this.v4h=ie[9]|0,this.v5l=ie[10]|0,this.v5h=ie[11]|0,this.v6l=ie[12]|0,this.v6h=ie[13]|0,this.v7l=ie[14]|0,this.v7h=ie[15]|0,Qh(n,t,64,16,16);let{key:r,personalization:i,salt:o}=t,s=0;if(r!==void 0&&(r=Fe(r),s=r.length),this.v0l^=this.outputLen|s<<8|65536|1<<24,o!==void 0){o=Fe(o);const c=hn(o);this.v4l^=We(c[0]),this.v4h^=We(c[1]),this.v5l^=We(c[2]),this.v5h^=We(c[3])}if(i!==void 0){i=Fe(i);const c=hn(i);this.v6l^=We(c[0]),this.v6h^=We(c[1]),this.v7l^=We(c[2]),this.v7h^=We(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:o,v2h:s,v3l:c,v3h:a,v4l:u,v4h:f,v5l:l,v5h:h,v6l:p,v6h:d,v7l:g,v7h:E}=this;return[t,n,r,i,o,s,c,a,u,f,l,h,p,d,g,E]}set(t,n,r,i,o,s,c,a,u,f,l,h,p,d,g,E){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=c|0,this.v3h=a|0,this.v4l=u|0,this.v4h=f|0,this.v5l=l|0,this.v5h=h|0,this.v6l=p|0,this.v6h=d|0,this.v7l=g|0,this.v7h=E|0}compress(t,n,r){this.get().forEach((a,u)=>P[u]=a),P.set(ie,16);let{h:i,l:o}=Ls(BigInt(this.length));P[24]=ie[8]^o,P[25]=ie[9]^i,r&&(P[28]=~P[28],P[29]=~P[29]);let s=0;const c=Jh;for(let a=0;a<12;a++)mt(0,4,8,12,t,n+2*c[s++]),Et(0,4,8,12,t,n+2*c[s++]),mt(1,5,9,13,t,n+2*c[s++]),Et(1,5,9,13,t,n+2*c[s++]),mt(2,6,10,14,t,n+2*c[s++]),Et(2,6,10,14,t,n+2*c[s++]),mt(3,7,11,15,t,n+2*c[s++]),Et(3,7,11,15,t,n+2*c[s++]),mt(0,5,10,15,t,n+2*c[s++]),Et(0,5,10,15,t,n+2*c[s++]),mt(1,6,11,12,t,n+2*c[s++]),Et(1,6,11,12,t,n+2*c[s++]),mt(2,7,8,13,t,n+2*c[s++]),Et(2,7,8,13,t,n+2*c[s++]),mt(3,4,9,14,t,n+2*c[s++]),Et(3,4,9,14,t,n+2*c[s++]);this.v0l^=P[0]^P[16],this.v0h^=P[1]^P[17],this.v1l^=P[2]^P[18],this.v1h^=P[3]^P[19],this.v2l^=P[4]^P[20],this.v2h^=P[5]^P[21],this.v3l^=P[6]^P[22],this.v3h^=P[7]^P[23],this.v4l^=P[8]^P[24],this.v4h^=P[9]^P[25],this.v5l^=P[10]^P[26],this.v5h^=P[11]^P[27],this.v6l^=P[12]^P[28],this.v6h^=P[13]^P[29],this.v7l^=P[14]^P[30],this.v7h^=P[15]^P[31],Ce(P)}destroy(){this.destroyed=!0,Ce(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const n1=Xd(e=>new t1(e));function r1(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<t){const o=e.charCodeAt(r);(o&64512)===56320&&(++r,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function i1(e,t,n){const r=e.length;let i=n,o=0;for(;o<r;){let s=e.charCodeAt(o++);if((s&4294967168)===0){t[i++]=s;continue}else if((s&4294965248)===0)t[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<r){const c=e.charCodeAt(o);(c&64512)===56320&&(++o,s=((s&1023)<<10)+(c&1023)+65536)}(s&4294901760)===0?(t[i++]=s>>12&15|224,t[i++]=s>>6&63|128):(t[i++]=s>>18&7|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128)}t[i++]=s&63|128}}const o1=new TextEncoder,s1=50;function c1(e,t,n){o1.encodeInto(e,t.subarray(n))}function a1(e,t,n){e.length>s1?c1(e,t,n):i1(e,t,n)}const u1=4096;function qc(e,t,n){let r=t;const i=r+n,o=[];let s="";for(;r<i;){const c=e[r++];if((c&128)===0)o.push(c);else if((c&224)===192){const a=e[r++]&63;o.push((c&31)<<6|a)}else if((c&240)===224){const a=e[r++]&63,u=e[r++]&63;o.push((c&31)<<12|a<<6|u)}else if((c&248)===240){const a=e[r++]&63,u=e[r++]&63,f=e[r++]&63;let l=(c&7)<<18|a<<12|u<<6|f;l>65535&&(l-=65536,o.push(l>>>10&1023|55296),l=56320|l&1023),o.push(l)}else o.push(c);o.length>=u1&&(s+=String.fromCharCode(...o),o.length=0)}return o.length>0&&(s+=String.fromCharCode(...o)),s}const f1=new TextDecoder,l1=200;function d1(e,t,n){const r=e.subarray(t,t+n);return f1.decode(r)}function h1(e,t,n){return n>l1?d1(e,t,n):qc(e,t,n)}class ur{constructor(t,n){this.type=t,this.data=n}}class Ae extends Error{constructor(t){super(t);const n=Object.create(Ae.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ae.name})}}const Un=4294967295;function g1(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function Kc(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function Wc(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function b1(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const p1=-1,w1=4294967296-1,y1=17179869184-1;function m1({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=y1)if(t===0&&e<=w1){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),o=new DataView(i.buffer);return o.setUint32(0,t<<2|n&3),o.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),Kc(r,4,e),n}}function E1(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function x1(e){if(e instanceof Date){const t=E1(e);return m1(t)}else return null}function v1(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,o=n>>>2;return{sec:i,nsec:o}}case 12:{const n=Wc(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new Ae(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function D1(e){const t=v1(e);return new Date(t.sec*1e3+t.nsec/1e6)}const A1={type:p1,encode:x1,decode:D1};class fr{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(A1)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=-1-r;return new ur(s,o)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=r;return new ur(s,o)}}}return t instanceof ur?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new ur(n,t)}}fr.defaultCodec=new fr;function B1(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function zi(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):B1(e)?new Uint8Array(e):Uint8Array.from(e)}const S1=100,_1=2048;class Hi{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??fr.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??S1,this.initialBufferSize=t?.initialBufferSize??_1,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Hi({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=r1(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),a1(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=zi(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const o of r){const s=t[o];this.ignoreUndefined&&s===void 0||(this.encodeString(o),this.doEncode(s,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),g1(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),Kc(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}}function U1(e,t){return new Hi(t).encodeSharedRef(e)}function ji(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const I1=16,O1=16;class C1{constructor(t=I1,n=O1){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const o of i){const s=o.bytes;for(let c=0;c<r;c++)if(s[c]!==t[n+c])continue e;return o.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const o=qc(t,n,r),s=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(s,o),o}}const Vi="array",In="map_key",Gc="map_value",T1=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Ae("The type of key must be string or number but "+typeof e)};class N1{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=Vi,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=In,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===Vi){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===In||t.type===Gc){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const On=-1,qi=new DataView(new ArrayBuffer(0)),R1=new Uint8Array(qi.buffer);try{qi.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Yc=new RangeError("Insufficient data"),$1=new C1;class Ki{constructor(t){this.totalPos=0,this.pos=0,this.view=qi,this.bytes=R1,this.headByte=On,this.stack=new N1,this.entered=!1,this.extensionCodec=t?.extensionCodec??fr.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??Un,this.maxBinLength=t?.maxBinLength??Un,this.maxArrayLength=t?.maxArrayLength??Un,this.maxMapLength=t?.maxMapLength??Un,this.maxExtLength=t?.maxExtLength??Un,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:$1,this.mapKeyConverter=t?.mapKeyConverter??T1}clone(){return new Ki({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=On,this.stack.reset()}setBuffer(t){const n=zi(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===On&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=zi(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const c of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{r=this.doDecodeSync(),n=!0}catch(a){if(!(a instanceof RangeError))throw a}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:o,totalPos:s}=this;throw new RangeError(`Insufficient data in parsing ${ji(i)} at ${s} (${o} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const o of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(s){if(!(s instanceof RangeError))throw s}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Ae(`Unrecognized type byte: ${ji(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===Vi)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===In){if(n==="__proto__")throw new Ae("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=Gc;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=In;continue e}}return n}}readHeadByte(){return this.headByte===On&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=On}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Ae(`Unrecognized array type byte: ${ji(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Ae(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Ae(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new Ae(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw Yc;const r=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?i=this.keyDecoder.decode(this.bytes,r,t):i=h1(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===In:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new Ae(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw Yc;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new Ae(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=b1(this.view,this.pos);return this.pos+=8,t}readI64(){const t=Wc(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}}function F1(e,t){return new Ki(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Wi(e,...t){if(!lr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Zc(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Xc(e){if(typeof e!="function")throw new Error("function expected");return!0}function xt(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Cn(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function dr(e){if(!Array.isArray(e))throw new Error("array expected")}function hr(e,t){if(!Zc(!0,t))throw new Error(`${e}: array of strings expected`)}function Gi(e,t){if(!Zc(!1,t))throw new Error(`${e}: array of numbers expected`)}function Be(...e){const t=o=>o,n=(o,s)=>c=>o(s(c)),r=e.map(o=>o.encode).reduceRight(n,t),i=e.map(o=>o.decode).reduce(n,t);return{encode:r,decode:i}}function Se(e){const t=typeof e=="string"?e.split(""):e,n=t.length;hr("alphabet",t);const r=new Map(t.map((i,o)=>[i,o]));return{encode:i=>(dr(i),i.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${e}`);return t[o]})),decode:i=>(dr(i),i.map(o=>{xt("alphabet.decode",o);const s=r.get(o);if(s===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${e}`);return s}))}}function _e(e=""){return xt("join",e),{encode:t=>(hr("join.decode",t),t.join(e)),decode:t=>(xt("join.decode",t),t.split(e))}}function gr(e,t="="){return Cn(e),xt("padding",t),{encode(n){for(hr("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){hr("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function Jc(e){return Xc(e),{encode:t=>t,decode:t=>e(t)}}function Qc(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(dr(e),!e.length)return[];let r=0;const i=[],o=Array.from(e,c=>{if(Cn(c),c<0||c>=t)throw new Error(`invalid integer: ${c}`);return c}),s=o.length;for(;;){let c=0,a=!0;for(let u=r;u<s;u++){const f=o[u],l=t*c,h=l+f;if(!Number.isSafeInteger(h)||l/t!==c||h-f!==l)throw new Error("convertRadix: carry overflow");const p=h/n;c=h%n;const d=Math.floor(p);if(o[u]=d,!Number.isSafeInteger(d)||d*n+c!==h)throw new Error("convertRadix: carry overflow");if(a)d?a=!1:r=u;else continue}if(i.push(c),a)break}for(let c=0;c<e.length-1&&e[c]===0;c++)i.push(0);return i.reverse()}const ea=(e,t)=>t===0?e:ea(t,e%t),br=(e,t)=>e+(t-ea(e,t)),pr=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Yi(e,t,n,r){if(dr(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(br(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${br(t,n)}`);let i=0,o=0;const s=pr[t],c=pr[n]-1,a=[];for(const u of e){if(Cn(u),u>=s)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(i=i<<t|u,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)a.push((i>>o-n&c)>>>0);const f=pr[o];if(f===void 0)throw new Error("invalid carry");i&=f-1}if(i=i<<n-o&c,!r&&o>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function P1(e){Cn(e);const t=2**8;return{encode:n=>{if(!lr(n))throw new Error("radix.encode input should be Uint8Array");return Qc(Array.from(n),t,e)},decode:n=>(Gi("radix.decode",n),Uint8Array.from(Qc(n,e,t)))}}function Ne(e,t=!1){if(Cn(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(br(8,e)>32||br(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!lr(n))throw new Error("radix2.encode input should be Uint8Array");return Yi(Array.from(n),8,e,!t)},decode:n=>(Gi("radix2.decode",n),Uint8Array.from(Yi(n,e,8,t)))}}function ta(e){return Xc(e),function(...t){try{return e.apply(null,t)}catch{}}}const k1=Be(Ne(5),Se("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),gr(5),_e("")),na=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",ra=(e,t)=>{xt("base64",e);const n=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=t?"base64url":"base64";if(e.length>0&&!n.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:r,lastChunkHandling:"strict"})},Zi=e=>Be(P1(58),Se(e),_e("")),Xi=Be(Se("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),_e("")),ia=[996825010,642813549,513874426,1027748829,705979059];function Tn(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<ia.length;r++)(t>>r&1)===1&&(n^=ia[r]);return n}function oa(e,t,n=1){const r=e.length;let i=1;for(let o=0;o<r;o++){const s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=Tn(i)^s>>5}i=Tn(i);for(let o=0;o<r;o++)i=Tn(i)^e.charCodeAt(o)&31;for(let o of t)i=Tn(i)^o;for(let o=0;o<6;o++)i=Tn(i);return i^=n,Xi.encode(Yi([i%pr[30]],30,5,!1))}function sa(e){const t=e==="bech32"?1:734539939,n=Ne(5),r=n.decode,i=n.encode,o=ta(r);function s(l,h,p=90){xt("bech32.encode prefix",l),lr(h)&&(h=Array.from(h)),Gi("bech32.encode",h);const d=l.length;if(d===0)throw new TypeError(`Invalid prefix length ${d}`);const g=d+7+h.length;if(p!==!1&&g>p)throw new TypeError(`Length ${g} exceeds limit ${p}`);const E=l.toLowerCase(),B=oa(E,h,t);return`${E}1${Xi.encode(h)}${B}`}function c(l,h=90){xt("bech32.decode input",l);const p=l.length;if(p<8||h!==!1&&p>h)throw new TypeError(`invalid string length: ${p} (${l}). Expected (8..${h})`);const d=l.toLowerCase();if(l!==d&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");const g=d.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const E=d.slice(0,g),B=d.slice(g+1);if(B.length<6)throw new Error("Data must be at least 6 characters long");const O=Xi.decode(B).slice(0,-6),w=oa(E,O,t);if(!B.endsWith(w))throw new Error(`Invalid checksum in ${l}: expected "${w}"`);return{prefix:E,words:O}}const a=ta(c);function u(l){const{prefix:h,words:p}=c(l,!1);return{prefix:h,words:p,bytes:r(p)}}function f(l,h){return s(l,i(h))}return{encode:s,decode:c,encodeFromBytes:f,decodeToBytes:u,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:o,toWords:i}}const L1=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",M1={encode(e){return Wi(e),e.toHex()},decode(e){return xt("hex",e),Uint8Array.fromHex(e)}},z1="https://rpc.walletconnect.org/v1";function Ji(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(ci(n)).toString("hex")}async function ca(e,t,n,r,i,o){switch(n.t){case"eip191":return await aa(e,t,n.s);case"eip1271":return await ua(e,t,n.s,r,i,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function aa(e,t,n){return(await D0({hash:Ji(t),signature:n})).toLowerCase()===e.toLowerCase()}async function ua(e,t,n,r,i,o){const s=Pr(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",f=n.substring(2),l=Ji(t).substring(2),h=c+l+a+u+f,p=await fetch(`${o||z1}/?chainId=${r}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:H1(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:h},"latest"]})}),{result:d}=await p.json();return d?d.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function H1(){return Date.now()+Math.floor(Math.random()*1e3)}function j1(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const o=Buffer.from(e,"base64").slice(1,65);return _n.encode(o)}function V1(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(o=>o.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=n1(r,{dkLen:32});return _n.encode(i)}function q1(e){const t=new Uint8Array(gt(fa(e)));return _n.encode(t)}function fa(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function K1(e){const t=Buffer.from(e,"base64"),n=F1(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=U1(n),i=Buffer.from("TX"),o=Buffer.concat([i,Buffer.from(r)]),s=$0(o);return k1.encode(s).replace(/=+$/,"")}function Qi(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function W1(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(Qi(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(Qi(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(Qi(r.length)),i.push(r);const o=Buffer.concat(i),s=gt(o);return Buffer.from(s).toString("hex").toUpperCase()}var G1=Object.defineProperty,Y1=Object.defineProperties,Z1=Object.getOwnPropertyDescriptors,la=Object.getOwnPropertySymbols,X1=Object.prototype.hasOwnProperty,J1=Object.prototype.propertyIsEnumerable,da=(e,t,n)=>t in e?G1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eo=(e,t)=>{for(var n in t||(t={}))X1.call(t,n)&&da(e,n,t[n]);if(la)for(var n of la(t))J1.call(t,n)&&da(e,n,t[n]);return e},ha=(e,t)=>Y1(e,Z1(t));const Q1="did:pkh:",wr=e=>e?.split(":"),ga=e=>{const t=e&&wr(e);if(t)return e.includes(Q1)?t[3]:t[1]},ba=e=>{const t=e&&wr(e);if(t)return t[2]+":"+t[3]},to=e=>{const t=e&&wr(e);if(t)return t.pop()};async function eg(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,o=pa(i,i.iss),s=to(i.iss);return await ca(s,o,r,ba(i.iss),n)}const pa=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=to(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,s=`Version: ${e.version}`,c=`Chain ID: ${ga(t)}`,a=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,f=e.exp?`Expiration Time: ${e.exp}`:void 0,l=e.nbf?`Not Before: ${e.nbf}`:void 0,h=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map(g=>`
- ${g}`).join("")}`:void 0,d=mr(e.resources);if(d){const g=vt(d);i=io(i,g)}return[n,r,"",i,"",o,s,c,a,u,f,l,h,p].filter(g=>g!=null).join(`
`)};function tg(e,t,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function ng(e){var t;const{authPayload:n,chains:r,methods:i}=e,o=n.statement||"";if(!(r!=null&&r.length))return n;const s=n.chains,c=Qr(s,r);if(!(c!=null&&c.length))throw new Error("No supported chains");const a=wa(n.resources);if(!a)return n;He(a);const u=ya(a,"eip155");let f=n?.resources||[];if(u!=null&&u.length){const l=ma(u),h=Qr(l,i);if(!(h!=null&&h.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(l)}, supported: ${JSON.stringify(i)}`);const p=no("request",h,{chains:c}),d=Da(a,"eip155",p);f=((t=n?.resources)==null?void 0:t.slice(0,-1))||[],f.push(yr(d))}return ha(eo({},n),{statement:Ba(o,mr(f)),chains:c,resources:n!=null&&n.resources||f.length>0?f:void 0})}function wa(e){const t=mr(e);if(t&&ro(t))return vt(t)}function rg(e,t){var n;return(n=e?.att)==null?void 0:n.hasOwnProperty(t)}function ya(e,t){var n,r;return(n=e?.att)!=null&&n[t]?Object.keys((r=e?.att)==null?void 0:r[t]):[]}function ig(e){return e?.map(t=>Object.keys(t))||[]}function ma(e){return e?.map(t=>{var n;return(n=t.split("/"))==null?void 0:n[1]})||[]}function Ea(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function xa(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function He(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const o=r[i];if(!Array.isArray(o))throw new Error(`Ability limits ${i} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);o.forEach(s=>{if(typeof s!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${s}`)})})})}function va(e,t,n,r={}){return n?.sort((i,o)=>i.localeCompare(o)),{att:{[e]:no(t,n,r)}}}function Da(e,t,n){var r;e.att[t]=eo({},n);const i=(r=Object.keys(e.att))==null?void 0:r.sort((s,c)=>s.localeCompare(c)),o={att:{}};return i.reduce((s,c)=>(s.att[c]=e.att[c],s),o)}function no(e,t,n={}){t=t?.sort((i,o)=>i.localeCompare(o));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function yr(e){return He(e),`urn:recap:${Ea(e).replace(/=/g,"")}`}function vt(e){const t=xa(e.replace("urn:recap:",""));return He(t),t}function og(e,t,n){const r=va(e,t,n);return yr(r)}function ro(e){return e&&e.includes("urn:recap:")}function sg(e,t){const n=vt(e),r=vt(t),i=Aa(n,r);return yr(i)}function Aa(e,t){He(e),He(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,o)=>i.localeCompare(o)),r={att:{}};return n.forEach(i=>{var o,s;Object.keys(((o=e.att)==null?void 0:o[i])||{}).concat(Object.keys(((s=t.att)==null?void 0:s[i])||{})).sort((c,a)=>c.localeCompare(a)).forEach(c=>{var a,u;r.att[i]=ha(eo({},r.att[i]),{[c]:((a=e.att[i])==null?void 0:a[c])||((u=t.att[i])==null?void 0:u[c])})})}),r}function io(e="",t){He(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(c=>{const a=Object.keys(t.att[c]).map(l=>({ability:l.split("/")[0],action:l.split("/")[1]}));a.sort((l,h)=>l.action.localeCompare(h.action));const u={};a.forEach(l=>{u[l.ability]||(u[l.ability]=[]),u[l.ability].push(l.action)});const f=Object.keys(u).map(l=>(i++,`(${i}) '${l}': '${u[l].join("', '")}' for '${c}'.`));r.push(f.join(", ").replace(".,","."))});const o=r.join(" "),s=`${n}${o}`;return`${e?e+" ":""}${s}`}function cg(e){var t;const n=vt(e);He(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function ag(e){const t=vt(e);He(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var o;(o=i?.[0])!=null&&o.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Ba(e,t){if(!t)return e;const n=vt(t);return He(n),io(e,n)}function mr(e){if(!e)return;const t=e?.[e.length-1];return ro(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function Sa(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function oo(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function so(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ve(e,...t){if(!Sa(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function _a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ug(e,t){ve(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Dt(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function tn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function fg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const lg=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function dg(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function co(e){if(typeof e=="string")e=dg(e);else if(Sa(e))e=ao(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function hg(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function gg(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const bg=(e,t)=>{function n(r,...i){if(ve(r),!lg)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const f=i[0];if(!f)throw new Error("nonce / iv required");e.varSizeNonce?ve(f):ve(f,e.nonceLength)}const o=e.tagLength;o&&i[1]!==void 0&&ve(i[1]);const s=t(r,...i),c=(f,l)=>{if(l!==void 0){if(f!==2)throw new Error("cipher output not supported");ve(l)}};let a=!1;return{encrypt(f,l){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,ve(f),c(s.encrypt.length,l),s.encrypt(f,l)},decrypt(f,l){if(ve(f),o&&f.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(s.decrypt.length,l),s.decrypt(f,l)}}}return Object.assign(n,e),n};function Ua(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!wg(t))throw new Error("invalid output, must be aligned");return t}function Ia(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+u,c,r)}function pg(e,t,n){oo(n);const r=new Uint8Array(16),i=fg(r);return Ia(i,0,BigInt(t),n),Ia(i,8,BigInt(e),n),r}function wg(e){return e.byteOffset%4===0}function ao(e){return Uint8Array.from(e)}const Oa=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),yg=Oa("expand 16-byte k"),mg=Oa("expand 32-byte k"),Eg=Dt(yg),xg=Dt(mg);function K(e,t){return e<<t|e>>>32-t}function uo(e){return e.byteOffset%4===0}const Er=64,vg=16,Ca=2**32-1,Ta=new Uint32Array;function Dg(e,t,n,r,i,o,s,c){const a=i.length,u=new Uint8Array(Er),f=Dt(u),l=uo(i)&&uo(o),h=l?Dt(i):Ta,p=l?Dt(o):Ta;for(let d=0;d<a;s++){if(e(t,n,r,f,s,c),s>=Ca)throw new Error("arx: counter overflow");const g=Math.min(Er,a-d);if(l&&g===Er){const E=d/4;if(d%4!==0)throw new Error("arx: invalid block position");for(let B=0,O;B<vg;B++)O=E+B,p[O]=h[O]^f[B];d+=Er;continue}for(let E=0,B;E<g;E++)B=d+E,o[B]=i[B]^u[E];d+=g}}function Ag(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=hg({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return so(i),so(s),oo(o),oo(n),(c,a,u,f,l=0)=>{ve(c),ve(a),ve(u);const h=u.length;if(f===void 0&&(f=new Uint8Array(h)),ve(f),so(l),l<0||l>=Ca)throw new Error("arx: counter overflow");if(f.length<h)throw new Error(`arx: output (${f.length}) is shorter than data (${h})`);const p=[];let d=c.length,g,E;if(d===32)p.push(g=ao(c)),E=xg;else if(d===16&&n)g=new Uint8Array(32),g.set(c),g.set(c,16),E=Eg,p.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${d}`);uo(a)||p.push(a=ao(a));const B=Dt(g);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(E,B,Dt(a.subarray(0,16)),B),a=a.subarray(16)}const O=16-i;if(O!==a.length)throw new Error(`arx: nonce must be ${O} or 16 bytes`);if(O!==12){const m=new Uint8Array(12);m.set(a,o?0:12-a.length),a=m,p.push(a)}const w=Dt(a);return Dg(e,E,B,w,u,f,l,s),tn(...p),f}}const ce=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class Bg{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=co(t),ve(t,32);const n=ce(t,0),r=ce(t,2),i=ce(t,4),o=ce(t,6),s=ce(t,8),c=ce(t,10),a=ce(t,12),u=ce(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let f=0;f<8;f++)this.pad[f]=ce(t,16+2*f)}process(t,n,r=!1){const i=r?0:2048,{h:o,r:s}=this,c=s[0],a=s[1],u=s[2],f=s[3],l=s[4],h=s[5],p=s[6],d=s[7],g=s[8],E=s[9],B=ce(t,n+0),O=ce(t,n+2),w=ce(t,n+4),m=ce(t,n+6),v=ce(t,n+8),I=ce(t,n+10),S=ce(t,n+12),_=ce(t,n+14);let C=o[0]+(B&8191),k=o[1]+((B>>>13|O<<3)&8191),N=o[2]+((O>>>10|w<<6)&8191),$=o[3]+((w>>>7|m<<9)&8191),R=o[4]+((m>>>4|v<<12)&8191),M=o[5]+(v>>>1&8191),x=o[6]+((v>>>14|I<<2)&8191),y=o[7]+((I>>>11|S<<5)&8191),A=o[8]+((S>>>8|_<<8)&8191),U=o[9]+(_>>>5|i),D=0,T=D+C*c+k*(5*E)+N*(5*g)+$*(5*d)+R*(5*p);D=T>>>13,T&=8191,T+=M*(5*h)+x*(5*l)+y*(5*f)+A*(5*u)+U*(5*a),D+=T>>>13,T&=8191;let F=D+C*a+k*c+N*(5*E)+$*(5*g)+R*(5*d);D=F>>>13,F&=8191,F+=M*(5*p)+x*(5*h)+y*(5*l)+A*(5*f)+U*(5*u),D+=F>>>13,F&=8191;let L=D+C*u+k*a+N*c+$*(5*E)+R*(5*g);D=L>>>13,L&=8191,L+=M*(5*d)+x*(5*p)+y*(5*h)+A*(5*l)+U*(5*f),D+=L>>>13,L&=8191;let z=D+C*f+k*u+N*a+$*c+R*(5*E);D=z>>>13,z&=8191,z+=M*(5*g)+x*(5*d)+y*(5*p)+A*(5*h)+U*(5*l),D+=z>>>13,z&=8191;let H=D+C*l+k*f+N*u+$*a+R*c;D=H>>>13,H&=8191,H+=M*(5*E)+x*(5*g)+y*(5*d)+A*(5*p)+U*(5*h),D+=H>>>13,H&=8191;let V=D+C*h+k*l+N*f+$*u+R*a;D=V>>>13,V&=8191,V+=M*c+x*(5*E)+y*(5*g)+A*(5*d)+U*(5*p),D+=V>>>13,V&=8191;let G=D+C*p+k*h+N*l+$*f+R*u;D=G>>>13,G&=8191,G+=M*a+x*c+y*(5*E)+A*(5*g)+U*(5*d),D+=G>>>13,G&=8191;let X=D+C*d+k*p+N*h+$*l+R*f;D=X>>>13,X&=8191,X+=M*u+x*a+y*c+A*(5*E)+U*(5*g),D+=X>>>13,X&=8191;let ee=D+C*g+k*d+N*p+$*h+R*l;D=ee>>>13,ee&=8191,ee+=M*f+x*u+y*a+A*c+U*(5*E),D+=ee>>>13,ee&=8191;let Y=D+C*E+k*g+N*d+$*p+R*h;D=Y>>>13,Y&=8191,Y+=M*l+x*f+y*u+A*a+U*c,D+=Y>>>13,Y&=8191,D=(D<<2)+D|0,D=D+T|0,T=D&8191,D=D>>>13,F+=D,o[0]=T,o[1]=F,o[2]=L,o[3]=z,o[4]=H,o[5]=V,o[6]=G,o[7]=X,o[8]=ee,o[9]=Y}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=i,i=t[c]>>>13,t[c]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let o=(i^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)t[c]=t[c]&o|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+n[0];t[0]=s&65535;for(let c=1;c<8;c++)s=(t[c]+n[c]|0)+(s>>>16)|0,t[c]=s&65535;tn(r)}update(t){_a(this),t=co(t),ve(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s===r){for(;r<=i-o;o+=r)this.process(t,o);continue}n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){tn(this.h,this.r,this.buffer,this.pad)}digestInto(t){_a(this),ug(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)t[o++]=r[s]>>>0,t[o++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function Sg(e){const t=(r,i)=>e(i).update(co(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const _g=Sg(e=>new Bg(e));function Ug(e,t,n,r,i,o=20){let s=e[0],c=e[1],a=e[2],u=e[3],f=t[0],l=t[1],h=t[2],p=t[3],d=t[4],g=t[5],E=t[6],B=t[7],O=i,w=n[0],m=n[1],v=n[2],I=s,S=c,_=a,C=u,k=f,N=l,$=h,R=p,M=d,x=g,y=E,A=B,U=O,D=w,T=m,F=v;for(let z=0;z<o;z+=2)I=I+k|0,U=K(U^I,16),M=M+U|0,k=K(k^M,12),I=I+k|0,U=K(U^I,8),M=M+U|0,k=K(k^M,7),S=S+N|0,D=K(D^S,16),x=x+D|0,N=K(N^x,12),S=S+N|0,D=K(D^S,8),x=x+D|0,N=K(N^x,7),_=_+$|0,T=K(T^_,16),y=y+T|0,$=K($^y,12),_=_+$|0,T=K(T^_,8),y=y+T|0,$=K($^y,7),C=C+R|0,F=K(F^C,16),A=A+F|0,R=K(R^A,12),C=C+R|0,F=K(F^C,8),A=A+F|0,R=K(R^A,7),I=I+N|0,F=K(F^I,16),y=y+F|0,N=K(N^y,12),I=I+N|0,F=K(F^I,8),y=y+F|0,N=K(N^y,7),S=S+$|0,U=K(U^S,16),A=A+U|0,$=K($^A,12),S=S+$|0,U=K(U^S,8),A=A+U|0,$=K($^A,7),_=_+R|0,D=K(D^_,16),M=M+D|0,R=K(R^M,12),_=_+R|0,D=K(D^_,8),M=M+D|0,R=K(R^M,7),C=C+k|0,T=K(T^C,16),x=x+T|0,k=K(k^x,12),C=C+k|0,T=K(T^C,8),x=x+T|0,k=K(k^x,7);let L=0;r[L++]=s+I|0,r[L++]=c+S|0,r[L++]=a+_|0,r[L++]=u+C|0,r[L++]=f+k|0,r[L++]=l+N|0,r[L++]=h+$|0,r[L++]=p+R|0,r[L++]=d+M|0,r[L++]=g+x|0,r[L++]=E+y|0,r[L++]=B+A|0,r[L++]=O+U|0,r[L++]=w+D|0,r[L++]=m+T|0,r[L++]=v+F|0}const Ig=Ag(Ug,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Og=new Uint8Array(16),Na=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Og.subarray(n))},Cg=new Uint8Array(32);function Ra(e,t,n,r,i){const o=e(t,n,Cg),s=_g.create(o);i&&Na(s,i),Na(s,r);const c=pg(r.length,i?i.length:0,!0);s.update(c);const a=s.digest();return tn(o,c),a}const $a=bg({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,n,r)=>({encrypt(o,s){const c=o.length;s=Ua(c+16,s,!1),s.set(o);const a=s.subarray(0,-16);e(t,n,a,a,1);const u=Ra(e,t,n,a,r);return s.set(u,c),tn(u),s},decrypt(o,s){s=Ua(o.length-16,s,!1);const c=o.subarray(0,-16),a=o.subarray(-16),u=Ra(e,t,n,c,r);if(!gg(a,u))throw new Error("invalid tag");return s.set(o.subarray(0,-16)),e(t,n,s,s,1),tn(u),s}}))(Ig));function Tg(e,t,n){return ri(e),n===void 0&&(n=new Uint8Array(e.outputLen)),rr(e,Fe(n),Fe(t))}const fo=Uint8Array.from([0]),Fa=Uint8Array.of();function Ng(e,t,n,r=32){ri(e),Ke(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/i);n===void 0&&(n=Fa);const s=new Uint8Array(o*i),c=rr.create(e,t),a=c._cloneInto(),u=new Uint8Array(c.outputLen);for(let f=0;f<o;f++)fo[0]=f+1,a.update(f===0?Fa:u).update(n).update(fo).digestInto(u),s.set(u,i*f),c._cloneInto(a);return c.destroy(),a.destroy(),Ce(u,fo),s.slice(0,r)}const Rg=(e,t,n,r,i)=>Ng(e,Tg(e,t,n),r,i);BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Nn=BigInt(0),nn=BigInt(1),xr=BigInt(2);function $g(e){return Jt(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function Fg(e){const t=$g(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:o}=t,s=r==="x25519";if(!s&&r!=="x448")throw new Error("invalid type");const c=s?255:448,a=s?32:56,u=BigInt(s?9:5),f=BigInt(s?121665:39081),l=s?xr**BigInt(254):xr**BigInt(447),h=s?BigInt(8)*xr**BigInt(251)-nn:BigInt(4)*xr**BigInt(445)-nn,p=l+h+nn,d=S=>ne(S,n),g=E(u);function E(S){return wi(d(S),a)}function B(S){const _=re("u coordinate",S,a);return s&&(_[31]&=127),d(er(_))}function O(S){return er(i(re("scalar",S,a)))}function w(S,_){const C=I(B(_),O(S));if(C===Nn)throw new Error("invalid private or public key received");return E(C)}function m(S){return w(S,g)}function v(S,_,C){const k=d(S*(_-C));return _=d(_-k),C=d(C+k),{x_2:_,x_3:C}}function I(S,_){Ze("u",S,Nn,n),Ze("scalar",_,l,p);const C=_,k=S;let N=nn,$=Nn,R=S,M=nn,x=Nn;for(let A=BigInt(c-1);A>=Nn;A--){const U=C>>A&nn;x^=U,{x_2:N,x_3:R}=v(x,N,R),{x_2:$,x_3:M}=v(x,$,M),x=U;const D=N+$,T=d(D*D),F=N-$,L=d(F*F),z=T-L,H=R+M,V=R-M,G=d(V*D),X=d(H*F),ee=G+X,Y=G-X;R=d(ee*ee),M=d(k*d(Y*Y)),N=d(T*L),$=d(z*(T+d(f*z)))}({x_2:N,x_3:R}=v(x,N,R)),{x_2:$,x_3:M}=v(x,$,M);const y=o($);return d(N*y)}return{scalarMult:w,scalarMultBase:m,getSharedSecret:(S,_)=>w(S,_),getPublicKey:S=>m(S),utils:{randomPrivateKey:()=>t.randomBytes(a)},GuBytes:g.slice()}}const lo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Pg=BigInt(1),Pa=BigInt(2),kg=BigInt(3),Lg=BigInt(5);BigInt(8);function Mg(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=lo,c=e*e%o*e%o,a=Q(c,Pa,o)*c%o,u=Q(a,Pg,o)*e%o,f=Q(u,Lg,o)*u%o,l=Q(f,t,o)*f%o,h=Q(l,n,o)*l%o,p=Q(h,r,o)*h%o,d=Q(p,i,o)*p%o,g=Q(d,i,o)*p%o,E=Q(g,t,o)*f%o;return{pow_p_5_8:Q(E,Pa,o)*e%o,b2:c}}function zg(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const ho=Fg({P:lo,type:"x25519",powPminus2:e=>{const t=lo,{pow_p_5_8:n,b2:r}=Mg(e);return ne(Q(n,kg,t)*r,t)},adjustScalarBytes:zg,randomBytes:Pt}),ka=Qt(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Hg=ka.create(BigInt("-3")),jg=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Vg=or({a:Hg,b:jg,Fp:ka,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},gt),La=Qt(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),qg=La.create(BigInt("-3")),Kg=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");or({a:qg,b:Kg,Fp:La,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},R0);const Ma=Qt(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),Wg=Ma.create(BigInt("-3")),Gg=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");or({a:Wg,b:Gg,Fp:Ma,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},N0);const Yg=Vg,Zg=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Xg(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Zg(e)}catch{return e}}function Jg(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function za(e,...t){if(!Jg(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ha(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Qg(e,t){za(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const rn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const go=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function eb(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function ja(e){return typeof e=="string"&&(e=eb(e)),za(e),e}class tb{clone(){return this._cloneInto()}}function nb(e){const t=r=>e().update(ja(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function rb(e=32){if(rn&&typeof rn.getRandomValues=="function")return rn.getRandomValues(new Uint8Array(e));if(rn&&typeof rn.randomBytes=="function")return rn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function ib(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,u=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+u,c,r)}class ob extends tb{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=go(this.buffer)}update(t){Ha(this);const{view:n,buffer:r,blockLen:i}=this;t=ja(t);const o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=go(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ha(this),Qg(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let l=s;l<i;l++)n[l]=0;ib(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=go(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)c.setUint32(4*l,f[l],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.length=i,t.pos=c,t.finished=o,t.destroyed=s,i%n&&t.buffer.set(r),t}}const vr=BigInt(2**32-1),bo=BigInt(32);function Va(e,t=!1){return t?{h:Number(e&vr),l:Number(e>>bo&vr)}:{h:Number(e>>bo&vr)|0,l:Number(e&vr)|0}}function sb(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=Va(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]}const cb=(e,t)=>BigInt(e>>>0)<<bo|BigInt(t>>>0),ab=(e,t,n)=>e>>>n,ub=(e,t,n)=>e<<32-n|t>>>n,fb=(e,t,n)=>e>>>n|t<<32-n,lb=(e,t,n)=>e<<32-n|t>>>n,db=(e,t,n)=>e<<64-n|t>>>n-32,hb=(e,t,n)=>e>>>n-32|t<<64-n,gb=(e,t)=>t,bb=(e,t)=>e,pb=(e,t,n)=>e<<n|t>>>32-n,wb=(e,t,n)=>t<<n|e>>>32-n,yb=(e,t,n)=>t<<n-32|e>>>64-n,mb=(e,t,n)=>e<<n-32|t>>>64-n;function Eb(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const xb=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),vb=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,Db=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Ab=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Bb=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Sb=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,q={fromBig:Va,split:sb,toBig:cb,shrSH:ab,shrSL:ub,rotrSH:fb,rotrSL:lb,rotrBH:db,rotrBL:hb,rotr32H:gb,rotr32L:bb,rotlSH:pb,rotlSL:wb,rotlBH:yb,rotlBL:mb,add:Eb,add3L:xb,add3H:vb,add4L:Db,add4H:Ab,add5H:Sb,add5L:Bb},[_b,Ub]=q.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),At=new Uint32Array(80),Bt=new Uint32Array(80);class Ib extends ob{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:u,El:f,Fh:l,Fl:h,Gh:p,Gl:d,Hh:g,Hl:E}=this;return[t,n,r,i,o,s,c,a,u,f,l,h,p,d,g,E]}set(t,n,r,i,o,s,c,a,u,f,l,h,p,d,g,E){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=h|0,this.Gh=p|0,this.Gl=d|0,this.Hh=g|0,this.Hl=E|0}process(t,n){for(let w=0;w<16;w++,n+=4)At[w]=t.getUint32(n),Bt[w]=t.getUint32(n+=4);for(let w=16;w<80;w++){const m=At[w-15]|0,v=Bt[w-15]|0,I=q.rotrSH(m,v,1)^q.rotrSH(m,v,8)^q.shrSH(m,v,7),S=q.rotrSL(m,v,1)^q.rotrSL(m,v,8)^q.shrSL(m,v,7),_=At[w-2]|0,C=Bt[w-2]|0,k=q.rotrSH(_,C,19)^q.rotrBH(_,C,61)^q.shrSH(_,C,6),N=q.rotrSL(_,C,19)^q.rotrBL(_,C,61)^q.shrSL(_,C,6),$=q.add4L(S,N,Bt[w-7],Bt[w-16]),R=q.add4H($,I,k,At[w-7],At[w-16]);At[w]=R|0,Bt[w]=$|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:u,Dl:f,Eh:l,El:h,Fh:p,Fl:d,Gh:g,Gl:E,Hh:B,Hl:O}=this;for(let w=0;w<80;w++){const m=q.rotrSH(l,h,14)^q.rotrSH(l,h,18)^q.rotrBH(l,h,41),v=q.rotrSL(l,h,14)^q.rotrSL(l,h,18)^q.rotrBL(l,h,41),I=l&p^~l&g,S=h&d^~h&E,_=q.add5L(O,v,S,Ub[w],Bt[w]),C=q.add5H(_,B,m,I,_b[w],At[w]),k=_|0,N=q.rotrSH(r,i,28)^q.rotrBH(r,i,34)^q.rotrBH(r,i,39),$=q.rotrSL(r,i,28)^q.rotrBL(r,i,34)^q.rotrBL(r,i,39),R=r&o^r&c^o&c,M=i&s^i&a^s&a;B=g|0,O=E|0,g=p|0,E=d|0,p=l|0,d=h|0,{h:l,l:h}=q.add(u|0,f|0,C|0,k|0),u=c|0,f=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const x=q.add3L(k,$,M);r=q.add3H(x,C,N,R),i=x|0}({h:r,l:i}=q.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=q.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=q.add(this.Ch|0,this.Cl|0,c|0,a|0),{h:u,l:f}=q.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:h}=q.add(this.Eh|0,this.El|0,l|0,h|0),{h:p,l:d}=q.add(this.Fh|0,this.Fl|0,p|0,d|0),{h:g,l:E}=q.add(this.Gh|0,this.Gl|0,g|0,E|0),{h:B,l:O}=q.add(this.Hh|0,this.Hl|0,B|0,O|0),this.set(r,i,o,s,c,a,u,f,l,h,p,d,g,E,B,O)}roundClean(){At.fill(0),Bt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ob=nb(()=>new Ib);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const po=BigInt(0),qa=BigInt(1),Cb=BigInt(2);function wo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function yo(e){if(!wo(e))throw new Error("Uint8Array expected")}function mo(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const Tb=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Eo(e){yo(e);let t="";for(let n=0;n<e.length;n++)t+=Tb[e[n]];return t}function Ka(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?po:BigInt("0x"+e)}const Qe={_0:48,_9:57,A:65,F:70,a:97,f:102};function Wa(e){if(e>=Qe._0&&e<=Qe._9)return e-Qe._0;if(e>=Qe.A&&e<=Qe.F)return e-(Qe.A-10);if(e>=Qe.a&&e<=Qe.f)return e-(Qe.a-10)}function Ga(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=Wa(e.charCodeAt(o)),c=Wa(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function Nb(e){return Ka(Eo(e))}function Dr(e){return yo(e),Ka(Eo(Uint8Array.from(e).reverse()))}function Ya(e,t){return Ga(e.toString(16).padStart(t*2,"0"))}function xo(e,t){return Ya(e,t).reverse()}function et(e,t,n){let r;if(typeof t=="string")try{r=Ga(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(wo(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function Za(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];yo(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}const vo=e=>typeof e=="bigint"&&po<=e;function Rb(e,t,n){return vo(e)&&vo(t)&&vo(n)&&t<=e&&e<n}function Rn(e,t,n,r){if(!Rb(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function $b(e){let t;for(t=0;e>po;e>>=qa,t+=1);return t}const Fb=e=>(Cb<<BigInt(e-1))-qa,Pb={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||wo(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Do(e,t,n={}){const r=(i,o,s)=>{const c=Pb[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}function Xa(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const se=BigInt(0),te=BigInt(1),zt=BigInt(2),kb=BigInt(3),Ao=BigInt(4),Ja=BigInt(5),Qa=BigInt(8);function oe(e,t){const n=e%t;return n>=se?n:t+n}function Lb(e,t,n){if(t<se)throw new Error("invalid exponent, negatives unsupported");if(n<=se)throw new Error("invalid modulus");if(n===te)return se;let r=te;for(;t>se;)t&te&&(r=r*e%n),e=e*e%n,t>>=te;return r}function je(e,t,n){let r=e;for(;t-- >se;)r*=r,r%=n;return r}function eu(e,t){if(e===se)throw new Error("invert: expected non-zero number");if(t<=se)throw new Error("invert: expected positive modulus, got "+t);let n=oe(e,t),r=t,i=se,o=te;for(;n!==se;){const s=r/n,c=r%n,a=i-o*s;r=n,n=c,i=o,o=a}if(r!==te)throw new Error("invert: does not exist");return oe(i,t)}function Mb(e){const t=(e-te)/zt;let n,r,i;for(n=e-te,r=0;n%zt===se;n/=zt,r++);for(i=zt;i<e&&Lb(i,t,e)!==e-te;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(e+te)/Ao;return function(c,a){const u=c.pow(a,s);if(!c.eql(c.sqr(u),a))throw new Error("Cannot find square root");return u}}const o=(n+te)/zt;return function(s,c){if(s.pow(c,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let a=r,u=s.pow(s.mul(s.ONE,i),n),f=s.pow(c,o),l=s.pow(c,n);for(;!s.eql(l,s.ONE);){if(s.eql(l,s.ZERO))return s.ZERO;let h=1;for(let d=s.sqr(l);h<a&&!s.eql(d,s.ONE);h++)d=s.sqr(d);const p=s.pow(u,te<<BigInt(a-h-1));u=s.sqr(p),f=s.mul(f,p),l=s.mul(l,u),a=h}return f}}function zb(e){if(e%Ao===kb){const t=(e+te)/Ao;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%Qa===Ja){const t=(e-Ja)/Qa;return function(n,r){const i=n.mul(r,zt),o=n.pow(i,t),s=n.mul(r,o),c=n.mul(n.mul(s,zt),o),a=n.mul(s,n.sub(c,n.ONE));if(!n.eql(n.sqr(a),r))throw new Error("Cannot find square root");return a}}return Mb(e)}const Hb=(e,t)=>(oe(e,t)&te)===te,jb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vb(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=jb.reduce((r,i)=>(r[i]="function",r),t);return Do(e,n)}function qb(e,t,n){if(n<se)throw new Error("invalid exponent, negatives unsupported");if(n===se)return e.ONE;if(n===te)return t;let r=e.ONE,i=t;for(;n>se;)n&te&&(r=e.mul(r,i)),i=e.sqr(i),n>>=te;return r}function Kb(e,t){const n=new Array(t.length),r=t.reduce((o,s,c)=>e.is0(s)?o:(n[c]=o,e.mul(o,s)),e.ONE),i=e.inv(r);return t.reduceRight((o,s,c)=>e.is0(s)?o:(n[c]=e.mul(o,n[c]),e.mul(o,s)),i),n}function tu(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function nu(e,t,n=!1,r={}){if(e<=se)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=tu(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:Fb(i),ZERO:se,ONE:te,create:a=>oe(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return se<=a&&a<e},is0:a=>a===se,isOdd:a=>(a&te)===te,neg:a=>oe(-a,e),eql:(a,u)=>a===u,sqr:a=>oe(a*a,e),add:(a,u)=>oe(a+u,e),sub:(a,u)=>oe(a-u,e),mul:(a,u)=>oe(a*u,e),pow:(a,u)=>qb(c,a,u),div:(a,u)=>oe(a*eu(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>eu(a,e),sqrt:r.sqrt||(a=>(s||(s=zb(e)),s(c,a))),invertBatch:a=>Kb(c,a),cmov:(a,u,f)=>f?u:a,toBytes:a=>n?xo(a,o):Ya(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?Dr(a):Nb(a)}});return Object.freeze(c)}const ru=BigInt(0),Ar=BigInt(1);function Bo(e,t){const n=t.negate();return e?n:t}function iu(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function So(e,t){iu(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function Wb(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Gb(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const _o=new WeakMap,ou=new WeakMap;function Uo(e){return ou.get(e)||1}function Yb(e,t){return{constTimeNegate:Bo,hasPrecomputes(n){return Uo(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>ru;)r&Ar&&(i=i.add(o)),o=o.double(),r>>=Ar;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=So(r,t),s=[];let c=n,a=c;for(let u=0;u<i;u++){a=c,s.push(a);for(let f=1;f<o;f++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){const{windows:o,windowSize:s}=So(n,t);let c=e.ZERO,a=e.BASE;const u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<o;h++){const p=h*s;let d=Number(i&u);i>>=l,d>s&&(d-=f,i+=Ar);const g=p,E=p+Math.abs(d)-1,B=h%2!==0,O=d<0;d===0?a=a.add(Bo(B,r[g])):c=c.add(Bo(O,r[E]))}return{p:c,f:a}},wNAFUnsafe(n,r,i,o=e.ZERO){const{windows:s,windowSize:c}=So(n,t),a=BigInt(2**n-1),u=2**n,f=BigInt(n);for(let l=0;l<s;l++){const h=l*c;if(i===ru)break;let p=Number(i&a);if(i>>=f,p>c&&(p-=u,i+=Ar),p===0)continue;let d=r[h+Math.abs(p)-1];p<0&&(d=d.negate()),o=o.add(d)}return o},getPrecomputes(n,r,i){let o=_o.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&_o.set(r,i(o))),o},wNAFCached(n,r,i){const o=Uo(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=Uo(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){iu(r,t),ou.set(n,r),_o.delete(n)}}}function Zb(e,t,n,r){if(Wb(n,e),Gb(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,o=$b(BigInt(n.length)),s=o>12?o-3:o>4?o-2:o?2:1,c=(1<<s)-1,a=new Array(c+1).fill(i),u=Math.floor((t.BITS-1)/s)*s;let f=i;for(let l=u;l>=0;l-=s){a.fill(i);for(let p=0;p<r.length;p++){const d=r[p],g=Number(d>>BigInt(l)&BigInt(c));a[g]=a[g].add(n[p])}let h=i;for(let p=a.length-1,d=i;p>0;p--)d=d.add(a[p]),h=h.add(d);if(f=f.add(h),l!==0)for(let p=0;p<s;p++)f=f.double()}return f}function Xb(e){return Vb(e.Fp),Do(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...tu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const ke=BigInt(0),De=BigInt(1),Br=BigInt(2),Jb=BigInt(8),Qb={zip215:!0};function e2(e){const t=Xb(e);return Do(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function t2(e){const t=e2(e),{Fp:n,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:c,h:a}=t,u=Br<<BigInt(c*8)-De,f=n.create,l=nu(t.n,t.nBitLength),h=t.uvRatio||((x,y)=>{try{return{isValid:!0,value:n.sqrt(x*n.inv(y))}}catch{return{isValid:!1,value:ke}}}),p=t.adjustScalarBytes||(x=>x),d=t.domain||((x,y,A)=>{if(mo("phflag",A),y.length||A)throw new Error("Contexts/pre-hash are not supported");return x});function g(x,y){Rn("coordinate "+x,y,ke,u)}function E(x){if(!(x instanceof w))throw new Error("ExtendedPoint expected")}const B=Xa((x,y)=>{const{ex:A,ey:U,ez:D}=x,T=x.is0();y==null&&(y=T?Jb:n.inv(D));const F=f(A*y),L=f(U*y),z=f(D*y);if(T)return{x:ke,y:De};if(z!==De)throw new Error("invZ was invalid");return{x:F,y:L}}),O=Xa(x=>{const{a:y,d:A}=t;if(x.is0())throw new Error("bad point: ZERO");const{ex:U,ey:D,ez:T,et:F}=x,L=f(U*U),z=f(D*D),H=f(T*T),V=f(H*H),G=f(L*y),X=f(H*f(G+z)),ee=f(V+f(A*f(L*z)));if(X!==ee)throw new Error("bad point: equation left != right (1)");const Y=f(U*D),Ee=f(T*F);if(Y!==Ee)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(y,A,U,D){this.ex=y,this.ey=A,this.ez=U,this.et=D,g("x",y),g("y",A),g("z",U),g("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(y){if(y instanceof w)throw new Error("extended point not allowed");const{x:A,y:U}=y||{};return g("x",A),g("y",U),new w(A,U,De,f(A*U))}static normalizeZ(y){const A=n.invertBatch(y.map(U=>U.ez));return y.map((U,D)=>U.toAffine(A[D])).map(w.fromAffine)}static msm(y,A){return Zb(w,l,y,A)}_setWindowSize(y){I.setWindowSize(this,y)}assertValidity(){O(this)}equals(y){E(y);const{ex:A,ey:U,ez:D}=this,{ex:T,ey:F,ez:L}=y,z=f(A*L),H=f(T*D),V=f(U*L),G=f(F*D);return z===H&&V===G}is0(){return this.equals(w.ZERO)}negate(){return new w(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:y}=t,{ex:A,ey:U,ez:D}=this,T=f(A*A),F=f(U*U),L=f(Br*f(D*D)),z=f(y*T),H=A+U,V=f(f(H*H)-T-F),G=z+F,X=G-L,ee=z-F,Y=f(V*X),Ee=f(G*ee),Le=f(V*ee),Ve=f(X*G);return new w(Y,Ee,Ve,Le)}add(y){E(y);const{a:A,d:U}=t,{ex:D,ey:T,ez:F,et:L}=this,{ex:z,ey:H,ez:V,et:G}=y;if(A===BigInt(-1)){const Vf=f((T-D)*(H+z)),qf=f((T+D)*(H-z)),Zo=f(qf-Vf);if(Zo===ke)return this.double();const Kf=f(F*Br*G),Wf=f(L*Br*V),Gf=Wf+Kf,Yf=qf+Vf,Zf=Wf-Kf,m3=f(Gf*Zo),E3=f(Yf*Zf),x3=f(Gf*Zf),v3=f(Zo*Yf);return new w(m3,E3,v3,x3)}const X=f(D*z),ee=f(T*H),Y=f(L*U*G),Ee=f(F*V),Le=f((D+T)*(z+H)-X-ee),Ve=Ee-Y,qe=Ee+Y,Ot=f(ee-A*X),Ct=f(Le*Ve),Fr=f(qe*Ot),w3=f(Le*Ot),y3=f(Ve*qe);return new w(Ct,Fr,y3,w3)}subtract(y){return this.add(y.negate())}wNAF(y){return I.wNAFCached(this,y,w.normalizeZ)}multiply(y){const A=y;Rn("scalar",A,De,r);const{p:U,f:D}=this.wNAF(A);return w.normalizeZ([U,D])[0]}multiplyUnsafe(y,A=w.ZERO){const U=y;return Rn("scalar",U,ke,r),U===ke?v:this.is0()||U===De?this:I.wNAFCachedUnsafe(this,U,w.normalizeZ,A)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(y){return B(this,y)}clearCofactor(){const{h:y}=t;return y===De?this:this.multiplyUnsafe(y)}static fromHex(y,A=!1){const{d:U,a:D}=t,T=n.BYTES;y=et("pointHex",y,T),mo("zip215",A);const F=y.slice(),L=y[T-1];F[T-1]=L&-129;const z=Dr(F),H=A?u:n.ORDER;Rn("pointHex.y",z,ke,H);const V=f(z*z),G=f(V-De),X=f(U*V-D);let{isValid:ee,value:Y}=h(G,X);if(!ee)throw new Error("Point.fromHex: invalid y coordinate");const Ee=(Y&De)===De,Le=(L&128)!==0;if(!A&&Y===ke&&Le)throw new Error("Point.fromHex: x=0 and x_0=1");return Le!==Ee&&(Y=f(-Y)),w.fromAffine({x:Y,y:z})}static fromPrivateKey(y){return C(y).point}toRawBytes(){const{x:y,y:A}=this.toAffine(),U=xo(A,n.BYTES);return U[U.length-1]|=y&De?128:0,U}toHex(){return Eo(this.toRawBytes())}}w.BASE=new w(t.Gx,t.Gy,De,f(t.Gx*t.Gy)),w.ZERO=new w(ke,De,De,ke);const{BASE:m,ZERO:v}=w,I=Yb(w,c*8);function S(x){return oe(x,r)}function _(x){return S(Dr(x))}function C(x){const y=n.BYTES;x=et("private key",x,y);const A=et("hashed private key",o(x),2*y),U=p(A.slice(0,y)),D=A.slice(y,2*y),T=_(U),F=m.multiply(T),L=F.toRawBytes();return{head:U,prefix:D,scalar:T,point:F,pointBytes:L}}function k(x){return C(x).pointBytes}function N(x=new Uint8Array,...y){const A=Za(...y);return _(o(d(A,et("context",x),!!i)))}function $(x,y,A={}){x=et("message",x),i&&(x=i(x));const{prefix:U,scalar:D,pointBytes:T}=C(y),F=N(A.context,U,x),L=m.multiply(F).toRawBytes(),z=N(A.context,L,T,x),H=S(F+z*D);Rn("signature.s",H,ke,r);const V=Za(L,xo(H,n.BYTES));return et("result",V,n.BYTES*2)}const R=Qb;function M(x,y,A,U=R){const{context:D,zip215:T}=U,F=n.BYTES;x=et("signature",x,2*F),y=et("message",y),A=et("publicKey",A,F),T!==void 0&&mo("zip215",T),i&&(y=i(y));const L=Dr(x.slice(F,2*F));let z,H,V;try{z=w.fromHex(A,T),H=w.fromHex(x.slice(0,F),T),V=m.multiplyUnsafe(L)}catch{return!1}if(!T&&z.isSmallOrder())return!1;const G=N(D,H.toRawBytes(),z.toRawBytes(),y);return H.add(z.multiplyUnsafe(G)).subtract(V).clearCofactor().equals(w.ZERO)}return m._setWindowSize(8),{CURVE:t,getPublicKey:k,sign:$,verify:M,ExtendedPoint:w,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>s(n.BYTES),precompute(x=8,y=w.BASE){return y._setWindowSize(x),y.multiply(BigInt(3)),y}}}}BigInt(0),BigInt(1);const Io=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),su=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const n2=BigInt(1),cu=BigInt(2);BigInt(3);const r2=BigInt(5),i2=BigInt(8);function o2(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=Io,s=e*e%o*e%o,c=je(s,cu,o)*s%o,a=je(c,n2,o)*e%o,u=je(a,r2,o)*a%o,f=je(u,t,o)*u%o,l=je(f,n,o)*f%o,h=je(l,r,o)*l%o,p=je(h,i,o)*h%o,d=je(p,i,o)*h%o,g=je(d,t,o)*u%o;return{pow_p_5_8:je(g,cu,o)*e%o,b2:s}}function s2(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function c2(e,t){const n=Io,r=oe(t*t*t,n),i=oe(r*r*t,n),o=o2(e*i).pow_p_5_8;let s=oe(e*r*o,n);const c=oe(t*s*s,n),a=s,u=oe(s*su,n),f=c===e,l=c===oe(-e,n),h=c===oe(-e*su,n);return f&&(s=a),(l||h)&&(s=u),Hb(s,n)&&(s=oe(-s,n)),{isValid:f||l,value:s}}const a2=nu(Io,void 0,!0),u2={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:a2,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:i2,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ob,randomBytes:rb,adjustScalarBytes:s2,uvRatio:c2};t2(u2);const au=".",uu="base64url",f2="utf8",l2="utf8";function fu(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function d2(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fu(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function h2(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var g=0,E=0,B=0,O=d.length;B!==O&&d[B]===0;)B++,g++;for(var w=(O-B)*f+1>>>0,m=new Uint8Array(w);B!==O;){for(var v=d[B],I=0,S=w-1;(v!==0||I<E)&&S!==-1;S--,I++)v+=256*m[S]>>>0,m[S]=v%c>>>0,v=v/c>>>0;if(v!==0)throw new Error("Non-zero carry");E=I,B++}for(var _=w-E;_!==w&&m[_]===0;)_++;for(var C=a.repeat(g);_<w;++_)C+=e.charAt(m[_]);return C}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var g=0;if(d[g]!==" "){for(var E=0,B=0;d[g]===a;)E++,g++;for(var O=(d.length-g)*u+1>>>0,w=new Uint8Array(O);d[g];){var m=n[d.charCodeAt(g)];if(m===255)return;for(var v=0,I=O-1;(m!==0||v<B)&&I!==-1;I--,v++)m+=c*w[I]>>>0,w[I]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");B=v,g++}if(d[g]!==" "){for(var S=O-B;S!==O&&w[S]===0;)S++;for(var _=new Uint8Array(E+(O-S)),C=E;S!==O;)_[C++]=w[S++];return _}}}function p(d){var g=h(d);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:p}}var g2=h2,b2=g2;const lu=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},p2=e=>new TextEncoder().encode(e),w2=e=>new TextDecoder().decode(e);class y2{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class m2{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return du(this,t)}}class E2{constructor(t){this.decoders=t}or(t){return du(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const du=(e,t)=>new E2({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class x2{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new y2(t,n,r),this.decoder=new m2(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Sr=({name:e,prefix:t,encode:n,decode:r})=>new x2(e,t,n,r),$n=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=b2(n,t);return Sr({prefix:e,name:t,encode:r,decode:o=>lu(i(o))})},v2=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,u=0;for(let f=0;f<o;++f){const l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|l,c+=n,c>=8&&(c-=8,s[u++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},D2=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},ae=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Sr({prefix:t,name:e,encode(i){return D2(i,r,n)},decode(i){return v2(i,r,n,e)}}),A2=Sr({prefix:"\0",name:"identity",encode:e=>w2(e),decode:e=>p2(e)});var B2=Object.freeze({__proto__:null,identity:A2});const S2=ae({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _2=Object.freeze({__proto__:null,base2:S2});const U2=ae({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var I2=Object.freeze({__proto__:null,base8:U2});const O2=$n({prefix:"9",name:"base10",alphabet:"0123456789"});var C2=Object.freeze({__proto__:null,base10:O2});const T2=ae({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),N2=ae({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var R2=Object.freeze({__proto__:null,base16:T2,base16upper:N2});const $2=ae({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),F2=ae({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),P2=ae({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),k2=ae({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),L2=ae({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),M2=ae({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),z2=ae({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),H2=ae({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j2=ae({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var V2=Object.freeze({__proto__:null,base32:$2,base32upper:F2,base32pad:P2,base32padupper:k2,base32hex:L2,base32hexupper:M2,base32hexpad:z2,base32hexpadupper:H2,base32z:j2});const q2=$n({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),K2=$n({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var W2=Object.freeze({__proto__:null,base36:q2,base36upper:K2});const G2=$n({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Y2=$n({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Z2=Object.freeze({__proto__:null,base58btc:G2,base58flickr:Y2});const X2=ae({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),J2=ae({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Q2=ae({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ep=ae({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tp=Object.freeze({__proto__:null,base64:X2,base64pad:J2,base64url:Q2,base64urlpad:ep});const hu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),np=hu.reduce((e,t,n)=>(e[n]=t,e),[]),rp=hu.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function ip(e){return e.reduce((t,n)=>(t+=np[n],t),"")}function op(e){const t=[];for(const n of e){const r=rp[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const sp=Sr({prefix:"\u{1F680}",name:"base256emoji",encode:ip,decode:op});var cp=Object.freeze({__proto__:null,base256emoji:sp}),ap=bu,gu=128,up=127,fp=~up,lp=Math.pow(2,31);function bu(e,t,n){t=t||[],n=n||0;for(var r=n;e>=lp;)t[n++]=e&255|gu,e/=128;for(;e&fp;)t[n++]=e&255|gu,e>>>=7;return t[n]=e|0,bu.bytes=n-r+1,t}var dp=Oo,hp=128,pu=127;function Oo(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw Oo.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&pu)<<i:(s&pu)*Math.pow(2,i),i+=7}while(s>=hp);return Oo.bytes=o-r,n}var gp=Math.pow(2,7),bp=Math.pow(2,14),pp=Math.pow(2,21),wp=Math.pow(2,28),yp=Math.pow(2,35),mp=Math.pow(2,42),Ep=Math.pow(2,49),xp=Math.pow(2,56),vp=Math.pow(2,63),Dp=function(e){return e<gp?1:e<bp?2:e<pp?3:e<wp?4:e<yp?5:e<mp?6:e<Ep?7:e<xp?8:e<vp?9:10},Ap={encode:ap,decode:dp,encodingLength:Dp},wu=Ap;const yu=(e,t,n=0)=>(wu.encode(e,t,n),t),mu=e=>wu.encodingLength(e),Co=(e,t)=>{const n=t.byteLength,r=mu(e),i=r+mu(n),o=new Uint8Array(i+n);return yu(e,o,0),yu(n,o,r),o.set(t,i),new Bp(e,n,t,o)};class Bp{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Eu=({name:e,code:t,encode:n})=>new Sp(e,t,n);class Sp{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Co(this.code,n):n.then(r=>Co(this.code,r))}else throw Error("Unknown type, must be binary type")}}const xu=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),_p=Eu({name:"sha2-256",code:18,encode:xu("SHA-256")}),Up=Eu({name:"sha2-512",code:19,encode:xu("SHA-512")});var Ip=Object.freeze({__proto__:null,sha256:_p,sha512:Up});const vu=0,Op="identity",Du=lu;var Cp=Object.freeze({__proto__:null,identity:{code:vu,name:Op,encode:Du,digest:e=>Co(vu,Du(e))}});new TextEncoder,new TextDecoder;const Au={...B2,..._2,...I2,...C2,...R2,...V2,...W2,...Z2,...tp,...cp};({...Ip,...Cp});function Bu(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Su=Bu("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),To=Bu("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=d2(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),_u={utf8:Su,"utf-8":Su,hex:Au.base16,latin1:To,ascii:To,binary:To,...Au};function Tp(e,t="utf8"){const n=_u[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function No(e,t="utf8"){const n=_u[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fu(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Uu(e){return Xg(Tp(No(e,uu),f2))}function Np(e){return No(e,uu)}function Rp(e){const t=e.split(au),n=Uu(t[0]),r=Uu(t[1]),i=Np(t[2]),o=No(t.slice(0,2).join(au),l2);return{header:n,payload:r,signature:i,data:o}}function Ro(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Iu(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ro(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Fn(e,t){t||(t=e.reduce((i,o)=>i+o.length,0));const n=Iu(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return Ro(n)}function $p(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var g=0,E=0,B=0,O=d.length;B!==O&&d[B]===0;)B++,g++;for(var w=(O-B)*f+1>>>0,m=new Uint8Array(w);B!==O;){for(var v=d[B],I=0,S=w-1;(v!==0||I<E)&&S!==-1;S--,I++)v+=256*m[S]>>>0,m[S]=v%c>>>0,v=v/c>>>0;if(v!==0)throw new Error("Non-zero carry");E=I,B++}for(var _=w-E;_!==w&&m[_]===0;)_++;for(var C=a.repeat(g);_<w;++_)C+=e.charAt(m[_]);return C}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var g=0;if(d[g]!==" "){for(var E=0,B=0;d[g]===a;)E++,g++;for(var O=(d.length-g)*u+1>>>0,w=new Uint8Array(O);d[g];){var m=n[d.charCodeAt(g)];if(m===255)return;for(var v=0,I=O-1;(m!==0||v<B)&&I!==-1;I--,v++)m+=c*w[I]>>>0,w[I]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");B=v,g++}if(d[g]!==" "){for(var S=O-B;S!==O&&w[S]===0;)S++;for(var _=new Uint8Array(E+(O-S)),C=E;S!==O;)_[C++]=w[S++];return _}}}function p(d){var g=h(d);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:p}}var Fp=$p,Pp=Fp;const Ou=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},kp=e=>new TextEncoder().encode(e),Lp=e=>new TextDecoder().decode(e);class Mp{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class zp{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Cu(this,t)}}class Hp{constructor(t){this.decoders=t}or(t){return Cu(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Cu=(e,t)=>new Hp({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class jp{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Mp(t,n,r),this.decoder=new zp(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const _r=({name:e,prefix:t,encode:n,decode:r})=>new jp(e,t,n,r),Pn=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=Pp(n,t);return _r({prefix:e,name:t,encode:r,decode:o=>Ou(i(o))})},Vp=(e,t,n,r)=>{const i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,u=0;for(let f=0;f<o;++f){const l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|l,c+=n,c>=8&&(c-=8,s[u++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},qp=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},ue=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>_r({prefix:t,name:e,encode(i){return qp(i,r,n)},decode(i){return Vp(i,r,n,e)}}),Kp=_r({prefix:"\0",name:"identity",encode:e=>Lp(e),decode:e=>kp(e)});var Wp=Object.freeze({__proto__:null,identity:Kp});const Gp=ue({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Yp=Object.freeze({__proto__:null,base2:Gp});const Zp=ue({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Xp=Object.freeze({__proto__:null,base8:Zp});const Jp=Pn({prefix:"9",name:"base10",alphabet:"0123456789"});var Qp=Object.freeze({__proto__:null,base10:Jp});const ew=ue({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tw=ue({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var nw=Object.freeze({__proto__:null,base16:ew,base16upper:tw});const rw=ue({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iw=ue({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ow=ue({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sw=ue({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cw=ue({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aw=ue({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),uw=ue({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fw=ue({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lw=ue({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var dw=Object.freeze({__proto__:null,base32:rw,base32upper:iw,base32pad:ow,base32padupper:sw,base32hex:cw,base32hexupper:aw,base32hexpad:uw,base32hexpadupper:fw,base32z:lw});const hw=Pn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gw=Pn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bw=Object.freeze({__proto__:null,base36:hw,base36upper:gw});const pw=Pn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ww=Pn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var yw=Object.freeze({__proto__:null,base58btc:pw,base58flickr:ww});const mw=ue({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ew=ue({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xw=ue({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vw=ue({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Dw=Object.freeze({__proto__:null,base64:mw,base64pad:Ew,base64url:xw,base64urlpad:vw});const Tu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Aw=Tu.reduce((e,t,n)=>(e[n]=t,e),[]),Bw=Tu.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Sw(e){return e.reduce((t,n)=>(t+=Aw[n],t),"")}function _w(e){const t=[];for(const n of e){const r=Bw[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const Uw=_r({prefix:"\u{1F680}",name:"base256emoji",encode:Sw,decode:_w});var Iw=Object.freeze({__proto__:null,base256emoji:Uw}),Ow=Ru,Nu=128,Cw=127,Tw=~Cw,Nw=Math.pow(2,31);function Ru(e,t,n){t=t||[],n=n||0;for(var r=n;e>=Nw;)t[n++]=e&255|Nu,e/=128;for(;e&Tw;)t[n++]=e&255|Nu,e>>>=7;return t[n]=e|0,Ru.bytes=n-r+1,t}var Rw=$o,$w=128,$u=127;function $o(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw $o.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&$u)<<i:(s&$u)*Math.pow(2,i),i+=7}while(s>=$w);return $o.bytes=o-r,n}var Fw=Math.pow(2,7),Pw=Math.pow(2,14),kw=Math.pow(2,21),Lw=Math.pow(2,28),Mw=Math.pow(2,35),zw=Math.pow(2,42),Hw=Math.pow(2,49),jw=Math.pow(2,56),Vw=Math.pow(2,63),qw=function(e){return e<Fw?1:e<Pw?2:e<kw?3:e<Lw?4:e<Mw?5:e<zw?6:e<Hw?7:e<jw?8:e<Vw?9:10},Kw={encode:Ow,decode:Rw,encodingLength:qw},Fu=Kw;const Pu=(e,t,n=0)=>(Fu.encode(e,t,n),t),ku=e=>Fu.encodingLength(e),Fo=(e,t)=>{const n=t.byteLength,r=ku(e),i=r+ku(n),o=new Uint8Array(i+n);return Pu(e,o,0),Pu(n,o,r),o.set(t,i),new Ww(e,n,t,o)};class Ww{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Lu=({name:e,code:t,encode:n})=>new Gw(e,t,n);class Gw{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Fo(this.code,n):n.then(r=>Fo(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Mu=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Yw=Lu({name:"sha2-256",code:18,encode:Mu("SHA-256")}),Zw=Lu({name:"sha2-512",code:19,encode:Mu("SHA-512")});var Xw=Object.freeze({__proto__:null,sha256:Yw,sha512:Zw});const zu=0,Jw="identity",Hu=Ou;var Qw=Object.freeze({__proto__:null,identity:{code:zu,name:Jw,encode:Hu,digest:e=>Fo(zu,Hu(e))}});new TextEncoder,new TextDecoder;const ju={...Wp,...Yp,...Xp,...Qp,...nw,...dw,...bw,...yw,...Dw,...Iw};({...Xw,...Qw});function Vu(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const qu=Vu("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Po=Vu("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=Iu(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Ku={utf8:qu,"utf-8":qu,hex:ju.base16,latin1:Po,ascii:Po,binary:Po,...ju};function Re(e,t="utf8"){const n=Ku[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ro(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Ue(e,t="utf8"){const n=Ku[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const ko="base10",me="base16",on="base64pad",Ur="base64url",sn="utf8",Lo=0,cn=1,kn=2,ey=0,Wu=1,Ln=12,Mo=32;function ty(){const e=ho.utils.randomPrivateKey(),t=ho.getPublicKey(e);return{privateKey:Ue(e,me),publicKey:Ue(t,me)}}function ny(){const e=Pt(Mo);return Ue(e,me)}function ry(e,t){const n=ho.getSharedSecret(Re(e,me),Re(t,me)),r=Rg(Xn,n,void 0,void 0,Mo);return Ue(r,me)}function iy(e){const t=Xn(Re(e,me));return Ue(t,me)}function oy(e){const t=Xn(Re(e,sn));return Ue(t,me)}function zo(e){return Re(`${e}`,ko)}function Ht(e){return Number(Ue(e,ko))}function Gu(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Yu(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function sy(e){const t=zo(typeof e.type<"u"?e.type:Lo);if(Ht(t)===cn&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Re(e.senderPublicKey,me):void 0,r=typeof e.iv<"u"?Re(e.iv,me):Pt(Ln),i=Re(e.symKey,me),o=$a(i,r).encrypt(Re(e.message,sn)),s=Ho({type:t,sealed:o,iv:r,senderPublicKey:n});return e.encoding===Ur?Gu(s):s}function cy(e){const t=Re(e.symKey,me),{sealed:n,iv:r}=Ir({encoded:e.encoded,encoding:e.encoding}),i=$a(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Ue(i,sn)}function ay(e,t){const n=zo(kn),r=Pt(Ln),i=Re(e,sn),o=Ho({type:n,sealed:i,iv:r});return t===Ur?Gu(o):o}function uy(e,t){const{sealed:n}=Ir({encoded:e,encoding:t});return Ue(n,sn)}function Ho(e){if(Ht(e.type)===kn)return Ue(Fn([e.type,e.sealed]),on);if(Ht(e.type)===cn){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ue(Fn([e.type,e.senderPublicKey,e.iv,e.sealed]),on)}return Ue(Fn([e.type,e.iv,e.sealed]),on)}function Ir(e){const t=(e.encoding||on)===Ur?Yu(e.encoded):e.encoded,n=Re(t,on),r=n.slice(ey,Wu),i=Wu;if(Ht(r)===cn){const a=i+Mo,u=a+Ln,f=n.slice(i,a),l=n.slice(a,u),h=n.slice(u);return{type:r,sealed:h,iv:l,senderPublicKey:f}}if(Ht(r)===kn){const a=n.slice(i),u=Pt(Ln);return{type:r,sealed:a,iv:u}}const o=i+Ln,s=n.slice(i,o),c=n.slice(o);return{type:r,sealed:c,iv:s}}function fy(e,t){const n=Ir({encoded:e,encoding:t?.encoding});return Zu({type:Ht(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ue(n.senderPublicKey,me):void 0,receiverPublicKey:t?.receiverPublicKey})}function Zu(e){const t=e?.type||Lo;if(t===cn){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function ly(e){return e.type===cn&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function dy(e){return e.type===kn}function Xu(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Fn([new Uint8Array([4]),t,n])}function hy(e,t){const[n,r,i]=e.split("."),o=Buffer.from(Yu(i),"base64");if(o.length!==64)throw new Error("Invalid signature length");const s=o.slice(0,32),c=o.slice(32,64),a=`${n}.${r}`,u=Xn(a),f=Xu(t);if(!Yg.verify(Fn([s,c]),u,f))throw new Error("Invalid signature");return Rp(e).payload}const gy={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Ju="irn";function by(e){return e?.relay||{protocol:Ju}}function py(e){const t=gy[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function Qu(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const o=i.replace(r,""),s=e[i];n[o]=s}}),n}function wy(e){if(!e.includes("wc:")){const u=ei(e);u!=null&&u.includes("wc:")&&(e=u)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),o=typeof n<"u"?e.substring(n):"",s=new URLSearchParams(o),c={};s.forEach((u,f)=>{c[f]=u});const a=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:r,topic:ef(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:Qu(c),methods:a,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function ef(e){return e.startsWith("//")?e.substring(2):e}function tf(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const o=i,s=n+t+o;e[o]&&(r[s]=e[o])}),r}function yy(e){const t=new URLSearchParams,n=tf(e.relay);Object.keys(n).sort().forEach(i=>{t.set(i,n[i])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function my(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var Ey=Object.defineProperty,xy=Object.defineProperties,vy=Object.getOwnPropertyDescriptors,nf=Object.getOwnPropertySymbols,Dy=Object.prototype.hasOwnProperty,Ay=Object.prototype.propertyIsEnumerable,rf=(e,t,n)=>t in e?Ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,By=(e,t)=>{for(var n in t||(t={}))Dy.call(t,n)&&rf(e,n,t[n]);if(nf)for(var n of nf(t))Ay.call(t,n)&&rf(e,n,t[n]);return e},Sy=(e,t)=>xy(e,vy(t));function jt(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function of(e){const t=[];return Object.values(e).forEach(n=>{t.push(...jt(n.accounts))}),t}function sf(e,t){const n=[];return Object.values(e).forEach(r=>{jt(r.accounts).includes(t)&&n.push(...r.methods)}),n}function cf(e,t){const n=[];return Object.values(e).forEach(r=>{jt(r.accounts).includes(t)&&n.push(...r.events)}),n}function _y(e,t){const n=yf(e,t);if(n)throw new Error(n.message);const r={};for(const[i,o]of Object.entries(e))r[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return r}function Uy(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:n={}},supportedNamespaces:r}=e,i=Mn(t),o=Mn(n),s={};Object.keys(r).forEach(u=>{const f=r[u].chains,l=r[u].methods,h=r[u].events,p=r[u].accounts;f.forEach(d=>{if(!p.some(g=>g.includes(d)))throw new Error(`No accounts provided for chain ${d} in namespace ${u}`)}),s[u]={chains:f,methods:l,events:h,accounts:p}});const c=Ef(t,s,"approve()");if(c)throw new Error(c.message);const a={};return!Object.keys(t).length&&!Object.keys(n).length?s:(Object.keys(i).forEach(u=>{const f=r[u].chains.filter(d=>{var g,E;return(E=(g=i[u])==null?void 0:g.chains)==null?void 0:E.includes(d)}),l=r[u].methods.filter(d=>{var g,E;return(E=(g=i[u])==null?void 0:g.methods)==null?void 0:E.includes(d)}),h=r[u].events.filter(d=>{var g,E;return(E=(g=i[u])==null?void 0:g.events)==null?void 0:E.includes(d)}),p=f.map(d=>r[u].accounts.filter(g=>g.includes(`${d}:`))).flat();a[u]={chains:f,methods:l,events:h,accounts:p}}),Object.keys(o).forEach(u=>{var f,l,h,p,d,g;if(!r[u])return;const E=(l=(f=o[u])==null?void 0:f.chains)==null?void 0:l.filter(m=>r[u].chains.includes(m)),B=r[u].methods.filter(m=>{var v,I;return(I=(v=o[u])==null?void 0:v.methods)==null?void 0:I.includes(m)}),O=r[u].events.filter(m=>{var v,I;return(I=(v=o[u])==null?void 0:v.events)==null?void 0:I.includes(m)}),w=E?.map(m=>r[u].accounts.filter(v=>v.includes(`${m}:`))).flat();a[u]={chains:Oe((h=a[u])==null?void 0:h.chains,E),methods:Oe((p=a[u])==null?void 0:p.methods,B),events:Oe((d=a[u])==null?void 0:d.events,O),accounts:Oe((g=a[u])==null?void 0:g.accounts,w)}}),a)}function jo(e){return e.includes(":")}function af(e){return jo(e)?e.split(":")[0]:e}function Mn(e){var t,n,r;const i={};if(!Or(e))return i;for(const[o,s]of Object.entries(e)){const c=jo(o)?[o]:s.chains,a=s.methods||[],u=s.events||[],f=af(o);i[f]=Sy(By({},i[f]),{chains:Oe(c,(t=i[f])==null?void 0:t.chains),methods:Oe(a,(n=i[f])==null?void 0:n.methods),events:Oe(u,(r=i[f])==null?void 0:r.events)})}return i}function uf(e){const t={};return e?.forEach(n=>{var r;const[i,o]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${o}`)}),t}function Iy(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=uf(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Oe(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function Oy(e,t){var n,r,i,o,s,c;const a=Mn(e),u=Mn(t),f={},l=Object.keys(a).concat(Object.keys(u));for(const h of l)f[h]={chains:Oe((n=a[h])==null?void 0:n.chains,(r=u[h])==null?void 0:r.chains),methods:Oe((i=a[h])==null?void 0:i.methods,(o=u[h])==null?void 0:o.methods),events:Oe((s=a[h])==null?void 0:s.events,(c=u[h])==null?void 0:c.events)};return f}const ff={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},lf={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function tt(e,t){const{message:n,code:r}=lf[e];return{message:t?`${n} ${t}`:n,code:r}}function Vt(e,t){const{message:n,code:r}=ff[e];return{message:t?`${n} ${t}`:n,code:r}}function zn(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Or(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function St(e){return typeof e>"u"}function Ie(e,t){return t&&St(e)?!0:typeof e=="string"&&!!e.trim().length}function Cr(e,t){return t&&St(e)?!0:typeof e=="number"&&!isNaN(e)}function Cy(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let o=!0;return it(i,r)?(r.forEach(s=>{const{accounts:c,methods:a,events:u}=e.namespaces[s],f=jt(c),l=n[s];(!it(Kn(s,l),f)||!it(l.methods,a)||!it(l.events,u))&&(o=!1)}),o):!1}function Hn(e){return Ie(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function df(e){if(Ie(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&Hn(n)}}return!1}function Ty(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Ie(e,!1)){if(t(e))return!0;const n=ei(e);return t(n)}}catch{}return!1}function Ny(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function Ry(e){return e?.topic}function $y(e,t){let n=null;return Ie(e?.publicKey,!1)||(n=tt("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function Vo(e){let t=!0;return zn(e)?e.length&&(t=e.every(n=>Ie(n,!1))):t=!1,t}function hf(e,t,n){let r=null;return zn(t)&&t.length?t.forEach(i=>{r||Hn(i)||(r=Vt("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Hn(e)||(r=Vt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function gf(e,t,n){let r=null;return Object.entries(e).forEach(([i,o])=>{if(r)return;const s=hf(i,Kn(i,o),`${t} ${n}`);s&&(r=s)}),r}function bf(e,t){let n=null;return zn(e)?e.forEach(r=>{n||df(r)||(n=Vt("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Vt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function pf(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=bf(r?.accounts,`${t} namespace`);i&&(n=i)}),n}function wf(e,t){let n=null;return Vo(e?.methods)?Vo(e?.events)||(n=Vt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Vt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function qo(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=wf(r,`${t}, namespace`);i&&(n=i)}),n}function Fy(e,t,n){let r=null;if(e&&Or(e)){const i=qo(e,t);i&&(r=i);const o=gf(e,t,n);o&&(r=o)}else r=tt("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function yf(e,t){let n=null;if(e&&Or(e)){const r=qo(e,t);r&&(n=r);const i=pf(e,t);i&&(n=i)}else n=tt("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function mf(e){return Ie(e.protocol,!0)}function Py(e,t){let n=!1;return t&&!e?n=!0:e&&zn(e)&&e.length&&e.forEach(r=>{n=mf(r)}),n}function ky(e){return typeof e=="number"}function Ly(e){return typeof e<"u"&&typeof e!==null}function My(e){return!(!e||typeof e!="object"||!e.code||!Cr(e.code,!1)||!e.message||!Ie(e.message,!1))}function zy(e){return!(St(e)||!Ie(e.method,!1))}function Hy(e){return!(St(e)||St(e.result)&&St(e.error)||!Cr(e.id,!1)||!Ie(e.jsonrpc,!1))}function jy(e){return!(St(e)||!Ie(e.name,!1))}function Vy(e,t){return!(!Hn(t)||!of(e).includes(t))}function qy(e,t,n){return Ie(n,!1)?sf(e,t).includes(n):!1}function Ky(e,t,n){return Ie(n,!1)?cf(e,t).includes(n):!1}function Ef(e,t,n){let r=null;const i=Wy(e),o=Gy(t),s=Object.keys(i),c=Object.keys(o),a=xf(Object.keys(e)),u=xf(Object.keys(t)),f=a.filter(l=>!u.includes(l));return f.length&&(r=tt("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(t).toString()}`)),it(s,c)||(r=tt("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${s.toString()}
      Approved: ${c.toString()}`)),Object.keys(t).forEach(l=>{if(!l.includes(":")||r)return;const h=jt(t[l].accounts);h.includes(l)||(r=tt("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${l}
        Required: ${l}
        Approved: ${h.toString()}`))}),s.forEach(l=>{r||(it(i[l].methods,o[l].methods)?it(i[l].events,o[l].events)||(r=tt("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${l}`)):r=tt("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${l}`))}),r}function Wy(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function xf(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Gy(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=jt(e[n].accounts);r?.forEach(i=>{t[i]={accounts:e[n].accounts.filter(o=>o.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function Yy(e,t){return Cr(e,!1)&&e<=t.max&&e>=t.min}function Zy(){const e=Ft();return new Promise(t=>{switch(e){case pe.browser:t(vf());break;case pe.reactNative:t(Df());break;case pe.node:t(Af());break;default:t(!0)}})}function vf(){return Gt()&&navigator?.onLine}async function Df(){if(rt()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function Af(){return!0}function Xy(e){switch(Ft()){case pe.browser:Bf(e);break;case pe.reactNative:Sf(e);break;case pe.node:break}}function Bf(e){!rt()&&Gt()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function Sf(e){rt()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function Jy(){var e;return Gt()&&Wt()?((e=Wt())==null?void 0:e.visibilityState)==="visible":!0}const Ko={};class Qy{static get(t){return Ko[t]}static set(t,n){Ko[t]=n}static delete(t){delete Ko[t]}}const e3="Input must be an string, Buffer or Uint8Array";function t3(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(e3);return t}function n3(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function Tr(e){return(4294967296+e).toString(16).substring(1)}function r3(e,t,n){let r=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(n===32)r+=Tr(t[i]).toUpperCase(),r+=" ",r+=Tr(t[i+1]).toUpperCase();else if(n===64)r+=Tr(t[i+1]).toUpperCase(),r+=Tr(t[i]).toUpperCase();else throw new Error("Invalid size "+n);i%6===4?r+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(r+=" ")}console.log(r)}function i3(e,t,n){let r=new Date().getTime();const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=s%256;const o=new Date().getTime();console.log("Generated random input in "+(o-r)+"ms"),r=o;for(let s=0;s<n;s++){const c=e(i),a=new Date().getTime(),u=a-r;r=a,console.log("Hashed in "+u+"ms: "+c.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var _f={normalizeInput:t3,toHex:n3,debugPrint:r3,testSpeed:i3};const Nr=_f;function Rr(e,t,n){const r=e[t]+e[n];let i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function Uf(e,t,n,r){let i=e[t]+n;n<0&&(i+=4294967296);let o=e[t+1]+r;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function If(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function _t(e,t,n,r,i,o){const s=jn[i],c=jn[i+1],a=jn[o],u=jn[o+1];Rr(j,e,t),Uf(j,e,s,c);let f=j[r]^j[e],l=j[r+1]^j[e+1];j[r]=l,j[r+1]=f,Rr(j,n,r),f=j[t]^j[n],l=j[t+1]^j[n+1],j[t]=f>>>24^l<<8,j[t+1]=l>>>24^f<<8,Rr(j,e,t),Uf(j,e,a,u),f=j[r]^j[e],l=j[r+1]^j[e+1],j[r]=f>>>16^l<<16,j[r+1]=l>>>16^f<<16,Rr(j,n,r),f=j[t]^j[n],l=j[t+1]^j[n+1],j[t]=l>>>31^f<<1,j[t+1]=f>>>31^l<<1}const Of=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o3=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],ge=new Uint8Array(o3.map(function(e){return e*2})),j=new Uint32Array(32),jn=new Uint32Array(32);function Cf(e,t){let n=0;for(n=0;n<16;n++)j[n]=e.h[n],j[n+16]=Of[n];for(j[24]=j[24]^e.t,j[25]=j[25]^e.t/4294967296,t&&(j[28]=~j[28],j[29]=~j[29]),n=0;n<32;n++)jn[n]=If(e.b,4*n);for(n=0;n<12;n++)_t(0,8,16,24,ge[n*16+0],ge[n*16+1]),_t(2,10,18,26,ge[n*16+2],ge[n*16+3]),_t(4,12,20,28,ge[n*16+4],ge[n*16+5]),_t(6,14,22,30,ge[n*16+6],ge[n*16+7]),_t(0,10,20,30,ge[n*16+8],ge[n*16+9]),_t(2,12,22,24,ge[n*16+10],ge[n*16+11]),_t(4,14,16,26,ge[n*16+12],ge[n*16+13]),_t(6,8,18,28,ge[n*16+14],ge[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^j[n]^j[n+16]}const Ut=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Tf(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};Ut.fill(0),Ut[0]=e,t&&(Ut[1]=t.length),Ut[2]=1,Ut[3]=1,n&&Ut.set(n,32),r&&Ut.set(r,48);for(let o=0;o<16;o++)i.h[o]=Of[o]^If(Ut,o*4);return t&&(Wo(i,t),i.c=128),i}function Wo(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,Cf(e,!1),e.c=0),e.b[e.c++]=t[n]}function Nf(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;Cf(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function Rf(e,t,n,r,i){n=n||64,e=Nr.normalizeInput(e),r&&(r=Nr.normalizeInput(r)),i&&(i=Nr.normalizeInput(i));const o=Tf(n,t,r,i);return Wo(o,e),Nf(o)}function s3(e,t,n,r,i){const o=Rf(e,t,n,r,i);return Nr.toHex(o)}var c3={blake2b:Rf,blake2bHex:s3,blake2bInit:Tf,blake2bUpdate:Wo,blake2bFinal:Nf};const $f=_f;function a3(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function It(e,t,n,r,i,o){W[e]=W[e]+W[t]+i,W[r]=$r(W[r]^W[e],16),W[n]=W[n]+W[r],W[t]=$r(W[t]^W[n],12),W[e]=W[e]+W[t]+o,W[r]=$r(W[r]^W[e],8),W[n]=W[n]+W[r],W[t]=$r(W[t]^W[n],7)}function $r(e,t){return e>>>t^e<<32-t}const Ff=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),be=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),W=new Uint32Array(16),fe=new Uint32Array(16);function Pf(e,t){let n=0;for(n=0;n<8;n++)W[n]=e.h[n],W[n+8]=Ff[n];for(W[12]^=e.t,W[13]^=e.t/4294967296,t&&(W[14]=~W[14]),n=0;n<16;n++)fe[n]=a3(e.b,4*n);for(n=0;n<10;n++)It(0,4,8,12,fe[be[n*16+0]],fe[be[n*16+1]]),It(1,5,9,13,fe[be[n*16+2]],fe[be[n*16+3]]),It(2,6,10,14,fe[be[n*16+4]],fe[be[n*16+5]]),It(3,7,11,15,fe[be[n*16+6]],fe[be[n*16+7]]),It(0,5,10,15,fe[be[n*16+8]],fe[be[n*16+9]]),It(1,6,11,12,fe[be[n*16+10]],fe[be[n*16+11]]),It(2,7,8,13,fe[be[n*16+12]],fe[be[n*16+13]]),It(3,4,9,14,fe[be[n*16+14]],fe[be[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=W[n]^W[n+8]}function kf(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Ff),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(Go(r,t),r.c=64),r}function Go(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,Pf(e,!1),e.c=0),e.b[e.c++]=t[n]}function Lf(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;Pf(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function Mf(e,t,n){n=n||32,e=$f.normalizeInput(e);const r=kf(n,t);return Go(r,e),Lf(r)}function u3(e,t,n){const r=Mf(e,t,n);return $f.toHex(r)}var f3={blake2s:Mf,blake2sHex:u3,blake2sInit:kf,blake2sUpdate:Go,blake2sFinal:Lf};const Vn=c3,qn=f3;var l3={blake2b:Vn.blake2b,blake2bHex:Vn.blake2bHex,blake2bInit:Vn.blake2bInit,blake2bUpdate:Vn.blake2bUpdate,blake2bFinal:Vn.blake2bFinal,blake2s:qn.blake2s,blake2sHex:qn.blake2sHex,blake2sInit:qn.blake2sInit,blake2sUpdate:qn.blake2sUpdate,blake2sFinal:qn.blake2sFinal};function zf(e){const t=_n.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function Hf({publicKey:e,signature:t,payload:n}){var r;const i=Yo(n.method),o=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),s=h3(n.address),c=n.era==="00"?new Uint8Array([0]):Yo(n.era);if(c.length!==1&&c.length!==2)throw new Error("Invalid era length");const a=parseInt(n.nonce,16),u=new Uint8Array([a&255,a>>8&255]),f=BigInt(`0x${d3(n.tip)}`),l=b3(f),h=new Uint8Array([0,...e,s,...t,...c,...u,...l,...i]),p=g3(h.length+1);return new Uint8Array([...p,o,...h])}function jf(e){const t=Yo(e),n=l3.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Yo(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function d3(e){return e.startsWith("0x")?e.slice(2):e}function h3(e){const t=_n.decode(e)[0];return t===42?0:t===60?2:1}function g3(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function b3(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function p3(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=zf(e.transaction.address),r=Hf({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return jf(i)}b.BASE10=ko,b.BASE16=me,b.BASE64=on,b.BASE64URL=Ur,b.COLON=cd,b.DEFAULT_DEPTH=Zr,b.EMPTY_SPACE=Gn,b.ENV_MAP=pe,b.INTERNAL_ERRORS=lf,b.MemoryStore=Qy,b.ONE_THOUSAND=ad,b.REACT_NATIVE_PRODUCT=vs,b.RELAYER_DEFAULT_PROTOCOL=Ju,b.SDK_ERRORS=ff,b.SDK_TYPE=As,b.SLASH=Ds,b.TYPE_0=Lo,b.TYPE_1=cn,b.TYPE_2=kn,b.UTF8=sn,b.addResourceToRecap=Da,b.addSignatureToExtrinsic=Hf,b.appendToQueryString=Bs,b.assertType=pd,b.assignAbilityToActions=no,b.base64Decode=xa,b.base64Encode=Ea,b.buildApprovedNamespaces=Uy,b.buildAuthObject=tg,b.buildNamespacesFromAuth=Iy,b.buildRecapStatement=Ba,b.buildSignedExtrinsicHash=p3,b.calcExpiry=Ud,b.capitalize=vd,b.capitalizeWord=Ts,b.createDelayedPromise=Dd,b.createEncodedRecap=og,b.createExpiringPromise=Ad,b.createRecap=va,b.decodeRecap=vt,b.decodeTypeByte=Ht,b.decodeTypeTwoEnvelope=uy,b.decrypt=cy,b.deriveExtrinsicHash=jf,b.deriveSymKey=ry,b.deserialize=Ir,b.encodeRecap=yr,b.encodeTypeByte=zo,b.encodeTypeTwoEnvelope=ay,b.encrypt=sy,b.engineEvent=Od,b.enumify=xd,b.extractSolanaTransactionId=j1,b.formatAccountId=Jo,b.formatAccountWithChain=Xf,b.formatChainId=Xo,b.formatDeeplinkUrl=Ns,b.formatExpirerTarget=Jr,b.formatIdTarget=Sd,b.formatMessage=pa,b.formatMessageContext=wd,b.formatRelayParams=tf,b.formatRelayRpcUrl=gd,b.formatStatementFromRecap=io,b.formatTopicTarget=Bd,b.formatUA=Is,b.formatUri=yy,b.fromBase64=ei,b.generateKeyPair=ty,b.generateRandomBytes32=ny,b.getAccountsChains=jt,b.getAccountsFromNamespaces=Qf,b.getAddressFromAccount=Qo,b.getAddressesFromAccounts=Jf,b.getAlgorandTransactionId=K1,b.getAppId=ld,b.getAppMetadata=Ss,b.getBrowserOnlineStatus=vf,b.getChainFromAccount=es,b.getChainsFromAccounts=ts,b.getChainsFromNamespace=Kn,b.getChainsFromNamespaces=el,b.getChainsFromRecap=ag,b.getChainsFromRequiredNamespaces=tl,b.getCommonValuesInArrays=Qr,b.getCryptoKeyFromKeyData=Xu,b.getDecodedRecapFromResources=wa,b.getDeepLink=Td,b.getDidAddress=to,b.getDidAddressSegments=wr,b.getDidChainId=ga,b.getEnvironment=Ft,b.getHttpUrl=bd,b.getInternalError=tt,b.getJavascriptID=Us,b.getJavascriptOS=_s,b.getLastItems=Cs,b.getLinkModeURL=my,b.getMethodsFromRecap=cg,b.getNamespacedDidChainId=ba,b.getNamespacesChains=of,b.getNamespacesEventsForChainId=cf,b.getNamespacesFromAccounts=uf,b.getNamespacesMethodsForChainId=sf,b.getNearTransactionIdFromSignedTransaction=q1,b.getNearUint8ArrayFromBytes=fa,b.getNodeOnlineStatus=Af,b.getReCapActions=ma,b.getReactNativeOnlineStatus=Df,b.getRecapAbilitiesFromResource=ig,b.getRecapFromResources=mr,b.getRecapResource=ya,b.getRelayClientMetadata=hd,b.getRelayProtocolApi=py,b.getRelayProtocolName=by,b.getRequiredNamespacesFromNamespaces=_y,b.getSdkError=Vt,b.getSearchParamFromURL=Nd,b.getSignDirectHash=W1,b.getSuiDigest=V1,b.getUniqueValues=Lr,b.handleDeeplinkRedirect=Cd,b.hasOverlap=it,b.hashEthereumMessage=Ji,b.hashKey=iy,b.hashMessage=oy,b.isAndroid=ud,b.isAppVisible=Jy,b.isBrowser=Gt,b.isCaipNamespace=jo,b.isConformingNamespaces=Ef,b.isExpired=Id,b.isIframe=Fs,b.isIos=fd,b.isNode=Xr,b.isOnline=Zy,b.isProposalStruct=Ny,b.isReactNative=rt,b.isRecap=ro,b.isSessionCompatible=Cy,b.isSessionStruct=Ry,b.isTelegram=$s,b.isTestRun=$d,b.isTypeOneEnvelope=ly,b.isTypeTwoEnvelope=dy,b.isUndefined=St,b.isValidAccountId=df,b.isValidAccounts=bf,b.isValidActions=wf,b.isValidArray=zn,b.isValidChainId=Hn,b.isValidChains=hf,b.isValidController=$y,b.isValidEip1271Signature=ua,b.isValidEip191Signature=aa,b.isValidErrorReason=My,b.isValidEvent=jy,b.isValidId=ky,b.isValidNamespaceAccounts=pf,b.isValidNamespaceActions=qo,b.isValidNamespaceChains=gf,b.isValidNamespaceMethodsOrEvents=Vo,b.isValidNamespaces=yf,b.isValidNamespacesChainId=Vy,b.isValidNamespacesEvent=Ky,b.isValidNamespacesRequest=qy,b.isValidNumber=Cr,b.isValidObject=Or,b.isValidParams=Ly,b.isValidRecap=He,b.isValidRelay=mf,b.isValidRelays=Py,b.isValidRequest=zy,b.isValidRequestExpiry=Yy,b.isValidRequiredNamespaces=Fy,b.isValidResponse=Hy,b.isValidString=Ie,b.isValidUrl=Ty,b.mapEntries=Ed,b.mapToObj=yd,b.mergeArrays=Oe,b.mergeEncodedRecaps=sg,b.mergeRecaps=Aa,b.mergeRequiredAndOptionalNamespaces=Oy,b.normalizeNamespaces=Mn,b.objToMap=md,b.openDeeplink=Rs,b.parseAccountId=kr,b.parseChainId=Pr,b.parseContextNames=Os,b.parseExpirerTarget=_d,b.parseNamespaceKey=af,b.parseRelayParams=Qu,b.parseTopic=ef,b.parseUri=wy,b.populateAppMetadata=dd,b.populateAuthPayload=ng,b.recapHasResource=rg,b.serialize=Ho,b.sleep=Fd,b.ss58AddressToPublicKey=zf,b.subscribeToBrowserNetworkChange=Bf,b.subscribeToNetworkChange=Xy,b.subscribeToReactNativeNetworkChange=Sf,b.toBase64=Ps,b.uuidv4=Rd,b.validateDecoding=fy,b.validateEncoding=Zu,b.validateSignedCacao=eg,b.verifyP256Jwt=hy,b.verifySignature=ca,Object.defineProperty(b,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
